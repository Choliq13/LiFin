<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/AndroidManifest.xml">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/AndroidManifest.xml" />
              <option name="originalContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#10;    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;&#10;    &lt;application&#10;        android:allowBackup=&quot;true&quot;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#10;        android:label=&quot;@string/app_name&quot;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#10;        android:supportsRtl=&quot;true&quot;&#10;        android:theme=&quot;@style/Theme.LiFin&quot;&gt;&#10;        &lt;activity&#10;            android:name=&quot;.MainActivity&quot;&#10;            android:exported=&quot;true&quot;&#10;            android:label=&quot;@string/app_name&quot;&#10;            android:theme=&quot;@style/Theme.LiFin&quot;&gt;&#10;            &lt;intent-filter&gt;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#10;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#10;            &lt;/intent-filter&gt;&#10;        &lt;/activity&gt;&#10;    &lt;/application&gt;&#10;&#10;&lt;/manifest&gt;" />
              <option name="updatedContent" value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&#13;&#10;    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;&#13;&#10;    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;&#13;&#10;    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;&#13;&#10;    &lt;application&#13;&#10;        android:allowBackup=&quot;true&quot;&#13;&#10;        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;&#13;&#10;        android:fullBackupContent=&quot;@xml/backup_rules&quot;&#13;&#10;        android:icon=&quot;@mipmap/ic_launcher&quot;&#13;&#10;        android:label=&quot;@string/app_name&quot;&#13;&#10;        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;&#13;&#10;        android:supportsRtl=&quot;true&quot;&#13;&#10;        android:theme=&quot;@style/Theme.LiFin&quot;&gt;&#13;&#10;        &lt;activity&#13;&#10;            android:name=&quot;.MainActivity&quot;&#13;&#10;            android:exported=&quot;true&quot;&#13;&#10;            android:label=&quot;@string/app_name&quot;&#13;&#10;            android:theme=&quot;@style/Theme.LiFin&quot;&gt;&#13;&#10;            &lt;intent-filter&gt;&#13;&#10;                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;&#13;&#10;&#13;&#10;                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;&#13;&#10;            &lt;/intent-filter&gt;&#13;&#10;        &lt;/activity&gt;&#13;&#10;        &lt;receiver&#13;&#10;            android:name=&quot;.notification.NotificationReceiver&quot;&#13;&#10;            android:exported=&quot;false&quot; /&gt;&#13;&#10;    &lt;/application&gt;&#13;&#10;&#13;&#10;&lt;/manifest&gt;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/MainActivity.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/MainActivity.kt" />
              <option name="originalContent" value="package com.example.lifin&#10;&#10;import android.os.Bundle&#10;import androidx.activity.ComponentActivity&#10;import androidx.activity.compose.setContent&#10;import androidx.activity.enableEdgeToEdge&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Surface&#10;import androidx.compose.runtime.DisposableEffect&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Modifier&#10;import androidx.lifecycle.Lifecycle&#10;import androidx.lifecycle.LifecycleEventObserver&#10;import androidx.lifecycle.ProcessLifecycleOwner&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.lifin.navigation.AppNavGraph&#10;import com.example.lifin.navigation.Screen&#10;import com.example.lifin.security.AppLockManager&#10;import com.example.lifin.ui.theme.LiFinTheme&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;// --- 1. MODEL DATA (Struktur Tabel) ---&#10;@Serializable&#10;data class WeightLog(&#10;    val id: Long? = null,  // Nullable untuk handle auto-increment&#10;    val weight: Double,&#10;    @SerialName(&quot;created_at&quot;) val createdAt: String? = null  // Nullable untuk handle timestamp&#10;)&#10;&#10;class MainActivity : ComponentActivity() {&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        enableEdgeToEdge()&#10;&#10;        setContent {&#10;            LiFinTheme {&#10;                Surface(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    color = MaterialTheme.colorScheme.background&#10;                ) {&#10;                    val navController = rememberNavController()&#10;&#10;                    // Initialize repositories with fully qualified names to avoid import issues&#10;                    val authRepository: com.example.lifin.data.repository.AuthRepository = remember {&#10;                        com.example.lifin.data.repository.AuthRepository()&#10;                    }&#10;                    val pinRepository: com.example.lifin.data.repository.PinRepository = remember {&#10;                        com.example.lifin.data.repository.PinRepository(this)&#10;                    }&#10;                    val lockManager = remember { AppLockManager.getInstance(this) }&#10;&#10;                    // Observe app moving to foreground to enforce PIN when needed&#10;                    DisposableEffect(Unit) {&#10;                        val lifecycle = ProcessLifecycleOwner.get().lifecycle&#10;                        val observer = LifecycleEventObserver { _, event -&gt;&#10;                            if (event == Lifecycle.Event.ON_START) {&#10;                                lockManager.evaluateLockOnForeground()&#10;                                if (lockManager.isLocked) {&#10;                                    // Navigate to PIN verify if not already there&#10;                                    val currentRoute = navController.currentDestination?.route&#10;                                    if (currentRoute != Screen.PinVerify.route &amp;&amp;&#10;                                        currentRoute != Screen.Login.route &amp;&amp;&#10;                                        currentRoute != Screen.Register.route &amp;&amp;&#10;                                        currentRoute != Screen.SetPin.route &amp;&amp;&#10;                                        currentRoute != Screen.Splash.route&#10;                                    ) {&#10;                                        navController.navigate(Screen.PinVerify.route) {&#10;                                            launchSingleTop = true&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        }&#10;                        lifecycle.addObserver(observer)&#10;                        onDispose { lifecycle.removeObserver(observer) }&#10;                    }&#10;&#10;                    AppNavGraph(&#10;                        navController = navController,&#10;                        authRepository = authRepository,&#10;                        pinRepository = pinRepository&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// HomeScreen has been moved to ui/home/HomeScreen.kt&#10;" />
              <option name="updatedContent" value="package com.example.lifin&#10;&#10;import android.os.Bundle&#10;import androidx.activity.ComponentActivity&#10;import androidx.activity.compose.setContent&#10;import androidx.activity.enableEdgeToEdge&#10;import androidx.compose.foundation.layout.fillMaxSize&#10;import androidx.compose.material3.MaterialTheme&#10;import androidx.compose.material3.Surface&#10;import androidx.compose.runtime.DisposableEffect&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Modifier&#10;import androidx.lifecycle.Lifecycle&#10;import androidx.lifecycle.LifecycleEventObserver&#10;import androidx.lifecycle.ProcessLifecycleOwner&#10;import androidx.navigation.compose.rememberNavController&#10;import com.example.lifin.navigation.AppNavGraph&#10;import com.example.lifin.navigation.Screen&#10;import com.example.lifin.security.AppLockManager&#10;import com.example.lifin.ui.theme.LiFinTheme&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;// --- 1. MODEL DATA (Struktur Tabel) ---&#10;@Serializable&#10;data class WeightLog(&#10;    val id: Long? = null,  // Nullable untuk handle auto-increment&#10;    val weight: Double,&#10;    @SerialName(&quot;created_at&quot;) val createdAt: String? = null  // Nullable untuk handle timestamp&#10;)&#10;&#10;class MainActivity : ComponentActivity() {&#10;    override fun onCreate(savedInstanceState: Bundle?) {&#10;        super.onCreate(savedInstanceState)&#10;        enableEdgeToEdge()&#10;&#10;        setContent {&#10;            LiFinTheme {&#10;                Surface(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    color = MaterialTheme.colorScheme.background&#10;                ) {&#10;                    val navController = rememberNavController()&#10;&#10;                    // Initialize repositories with fully qualified names to avoid import issues&#10;                    val authRepository: com.example.lifin.data.repository.AuthRepository = remember {&#10;                        com.example.lifin.data.repository.AuthRepository(this)&#10;                    }&#10;                    val pinRepository: com.example.lifin.data.repository.PinRepository = remember {&#10;                        com.example.lifin.data.repository.PinRepository(this)&#10;                    }&#10;                    val lockManager = remember { AppLockManager.getInstance(this) }&#10;&#10;                    // Observe app moving to foreground to enforce PIN when needed&#10;                    DisposableEffect(Unit) {&#10;                        val lifecycle = ProcessLifecycleOwner.get().lifecycle&#10;                        val observer = LifecycleEventObserver { _, event -&gt;&#10;                            if (event == Lifecycle.Event.ON_START) {&#10;                                lockManager.evaluateLockOnForeground()&#10;                                if (lockManager.isLocked) {&#10;                                    // Navigate to PIN verify if not already there&#10;                                    val currentRoute = navController.currentDestination?.route&#10;                                    if (currentRoute != Screen.PinVerify.route &amp;&amp;&#10;                                        currentRoute != Screen.Login.route &amp;&amp;&#10;                                        currentRoute != Screen.Register.route &amp;&amp;&#10;                                        currentRoute != Screen.SetPin.route &amp;&amp;&#10;                                        currentRoute != Screen.Splash.route&#10;                                    ) {&#10;                                        navController.navigate(Screen.PinVerify.route) {&#10;                                            launchSingleTop = true&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        }&#10;                        lifecycle.addObserver(observer)&#10;                        onDispose { lifecycle.removeObserver(observer) }&#10;                    }&#10;&#10;                    AppNavGraph(&#10;                        navController = navController,&#10;                        authRepository = authRepository,&#10;                        pinRepository = pinRepository&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// HomeScreen has been moved to ui/home/HomeScreen.kt" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/local/EncryptedPreferences.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/local/EncryptedPreferences.kt" />
              <option name="originalContent" value="package com.example.lifin.data.local&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;import androidx.security.crypto.EncryptedSharedPreferences&#10;import androidx.security.crypto.MasterKey&#10;&#10;class EncryptedPreferences(context: Context) {&#10;    private val masterKey = MasterKey.Builder(context)&#10;        .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)&#10;        .build()&#10;&#10;    private val prefs: SharedPreferences = EncryptedSharedPreferences.create(&#10;        context,&#10;        &quot;lifin_secure_prefs&quot;,&#10;        masterKey,&#10;        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,&#10;        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM&#10;    )&#10;&#10;    companion object {&#10;        private const val KEY_PIN = &quot;user_pin&quot;&#10;        private const val KEY_PIN_ENABLED = &quot;pin_enabled&quot;&#10;        private const val KEY_BIOMETRIC_ENABLED = &quot;biometric_enabled&quot;&#10;    }&#10;&#10;    // PIN Management&#10;    fun savePin(pin: String) {&#10;        prefs.edit().putString(KEY_PIN, pin).apply()&#10;        prefs.edit().putBoolean(KEY_PIN_ENABLED, true).apply()&#10;    }&#10;&#10;    fun getPin(): String? = prefs.getString(KEY_PIN, null)&#10;&#10;    fun isPinEnabled(): Boolean = prefs.getBoolean(KEY_PIN_ENABLED, false)&#10;&#10;    fun clearPin() {&#10;        prefs.edit().remove(KEY_PIN).apply()&#10;        prefs.edit().putBoolean(KEY_PIN_ENABLED, false).apply()&#10;    }&#10;&#10;    // Biometric&#10;    fun setBiometricEnabled(enabled: Boolean) {&#10;        prefs.edit().putBoolean(KEY_BIOMETRIC_ENABLED, enabled).apply()&#10;    }&#10;&#10;    fun isBiometricEnabled(): Boolean =&#10;        prefs.getBoolean(KEY_BIOMETRIC_ENABLED, false)&#10;}&#10;&#10;&#10;&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.data.local&#10;&#10;import android.content.Context&#10;import android.content.SharedPreferences&#10;import androidx.security.crypto.EncryptedSharedPreferences&#10;import androidx.security.crypto.MasterKey&#10;&#10;class EncryptedPreferences(context: Context) {&#10;    private val masterKey = MasterKey.Builder(context)&#10;        .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)&#10;        .build()&#10;&#10;    private val prefs: SharedPreferences = EncryptedSharedPreferences.create(&#10;        context,&#10;        &quot;lifin_secure_prefs&quot;,&#10;        masterKey,&#10;        EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,&#10;        EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM&#10;    )&#10;&#10;    companion object {&#10;        private const val KEY_PIN = &quot;user_pin&quot;&#10;        private const val KEY_PIN_ENABLED = &quot;pin_enabled&quot;&#10;        private const val KEY_BIOMETRIC_ENABLED = &quot;biometric_enabled&quot;&#10;        private const val KEY_IS_LOGGED_IN = &quot;is_logged_in&quot;&#10;        private const val KEY_AUTH_EMAIL = &quot;auth_email&quot;&#10;        private const val KEY_NOTIF_ENABLED = &quot;notif_enabled&quot;&#10;        private const val KEY_NOTIF_HOUR = &quot;notif_hour&quot;&#10;        private const val KEY_NOTIF_MINUTE = &quot;notif_minute&quot;&#10;&#10;        private const val KEY_PROFILE_NAME = &quot;profile_name&quot;&#10;        private const val KEY_PROFILE_DOB = &quot;profile_dob&quot; // ISO-8601 yyyy-MM-dd&#10;        private const val KEY_PROFILE_GENDER = &quot;profile_gender&quot;&#10;        private const val KEY_PROFILE_HEIGHT_CM = &quot;profile_height_cm&quot;&#10;        private const val KEY_PROFILE_WEIGHT_GOAL = &quot;profile_weight_goal&quot;&#10;&#10;        private const val KEY_PROFILE_FIRST_NAME = &quot;profile_first_name&quot;&#10;        private const val KEY_PROFILE_LAST_NAME = &quot;profile_last_name&quot;&#10;        private const val KEY_PROFILE_IMAGE_URI = &quot;profile_image_uri&quot;&#10;        private const val KEY_PROFILE_AVATAR_INDEX = &quot;profile_avatar_index&quot; // -1 if none&#10;&#10;        private const val KEY_LAST_LOGIN_DATE = &quot;last_login_date&quot; // ISO yyyy-MM-dd&#10;        private const val KEY_HEALTH_NOTE_DATES = &quot;health_note_dates&quot; // CSV ISO dates&#10;    }&#10;&#10;    // PIN Management&#10;    fun savePin(pin: String) {&#10;        prefs.edit().putString(KEY_PIN, pin).apply()&#10;        prefs.edit().putBoolean(KEY_PIN_ENABLED, true).apply()&#10;    }&#10;&#10;    fun getPin(): String? = prefs.getString(KEY_PIN, null)&#10;&#10;    fun isPinEnabled(): Boolean = prefs.getBoolean(KEY_PIN_ENABLED, false)&#10;&#10;    fun clearPin() {&#10;        prefs.edit().remove(KEY_PIN).apply()&#10;        prefs.edit().putBoolean(KEY_PIN_ENABLED, false).apply()&#10;    }&#10;&#10;    // Biometric&#10;    fun setBiometricEnabled(enabled: Boolean) {&#10;        prefs.edit().putBoolean(KEY_BIOMETRIC_ENABLED, enabled).apply()&#10;    }&#10;&#10;    fun isBiometricEnabled(): Boolean =&#10;        prefs.getBoolean(KEY_BIOMETRIC_ENABLED, false)&#10;&#10;    // Auth session (login state)&#10;    fun setLoggedIn(email: String) {&#10;        prefs.edit().putBoolean(KEY_IS_LOGGED_IN, true).apply()&#10;        prefs.edit().putString(KEY_AUTH_EMAIL, email).apply()&#10;    }&#10;&#10;    fun isLoggedIn(): Boolean = prefs.getBoolean(KEY_IS_LOGGED_IN, false)&#10;&#10;    fun getEmail(): String? = prefs.getString(KEY_AUTH_EMAIL, null)&#10;&#10;    fun clearLogin() {&#10;        prefs.edit().putBoolean(KEY_IS_LOGGED_IN, false).apply()&#10;        prefs.edit().remove(KEY_AUTH_EMAIL).apply()&#10;    }&#10;&#10;    // Notification preferences&#10;    fun setNotificationEnabled(enabled: Boolean) {&#10;        prefs.edit().putBoolean(KEY_NOTIF_ENABLED, enabled).apply()&#10;    }&#10;&#10;    fun isNotificationEnabled(): Boolean = prefs.getBoolean(KEY_NOTIF_ENABLED, false)&#10;&#10;    fun setNotificationTime(hour: Int, minute: Int) {&#10;        prefs.edit().putInt(KEY_NOTIF_HOUR, hour).apply()&#10;        prefs.edit().putInt(KEY_NOTIF_MINUTE, minute).apply()&#10;    }&#10;&#10;    fun getNotificationHour(default: Int = 8): Int = prefs.getInt(KEY_NOTIF_HOUR, default)&#10;&#10;    fun getNotificationMinute(default: Int = 0): Int = prefs.getInt(KEY_NOTIF_MINUTE, default)&#10;&#10;    // Profile data&#10;    fun setProfileName(name: String) { prefs.edit().putString(KEY_PROFILE_NAME, name).apply() }&#10;    fun getProfileName(): String = prefs.getString(KEY_PROFILE_NAME, &quot;&quot;) ?: &quot;&quot;&#10;&#10;    fun setProfileDob(isoDate: String) { prefs.edit().putString(KEY_PROFILE_DOB, isoDate).apply() }&#10;    fun getProfileDob(): String? = prefs.getString(KEY_PROFILE_DOB, null)&#10;&#10;    fun setProfileGender(gender: String) { prefs.edit().putString(KEY_PROFILE_GENDER, gender).apply() }&#10;    fun getProfileGender(): String = prefs.getString(KEY_PROFILE_GENDER, &quot;Unspecified&quot;) ?: &quot;Unspecified&quot;&#10;&#10;    fun setProfileHeightCm(height: Int) { prefs.edit().putInt(KEY_PROFILE_HEIGHT_CM, height).apply() }&#10;    fun getProfileHeightCm(): Int = prefs.getInt(KEY_PROFILE_HEIGHT_CM, 0)&#10;&#10;    fun setProfileWeightGoal(weight: Float) { prefs.edit().putFloat(KEY_PROFILE_WEIGHT_GOAL, weight).apply() }&#10;    fun getProfileWeightGoal(): Float = prefs.getFloat(KEY_PROFILE_WEIGHT_GOAL, 0f)&#10;&#10;    fun setProfileFirstName(name: String) { prefs.edit().putString(KEY_PROFILE_FIRST_NAME, name).apply() }&#10;    fun getProfileFirstName(): String = prefs.getString(KEY_PROFILE_FIRST_NAME, &quot;&quot;) ?: &quot;&quot;&#10;&#10;    fun setProfileLastName(name: String) { prefs.edit().putString(KEY_PROFILE_LAST_NAME, name).apply() }&#10;    fun getProfileLastName(): String = prefs.getString(KEY_PROFILE_LAST_NAME, &quot;&quot;) ?: &quot;&quot;&#10;&#10;    fun setProfileImageUri(uri: String) { prefs.edit().putString(KEY_PROFILE_IMAGE_URI, uri).apply() }&#10;    fun getProfileImageUri(): String? = prefs.getString(KEY_PROFILE_IMAGE_URI, null)&#10;&#10;    fun setProfileAvatarIndex(index: Int) { prefs.edit().putInt(KEY_PROFILE_AVATAR_INDEX, index).apply() }&#10;    fun getProfileAvatarIndex(default: Int = -1): Int = prefs.getInt(KEY_PROFILE_AVATAR_INDEX, default)&#10;&#10;    // Last login date&#10;    fun setLastLoginDateIso(iso: String) { prefs.edit().putString(KEY_LAST_LOGIN_DATE, iso).apply() }&#10;    fun getLastLoginDateIso(): String? = prefs.getString(KEY_LAST_LOGIN_DATE, null)&#10;&#10;    // Health note dates&#10;    fun addHealthNoteDate(iso: String) {&#10;        val current = prefs.getString(KEY_HEALTH_NOTE_DATES, &quot;&quot;) ?: &quot;&quot;&#10;        val set = current.split(',').filter { it.isNotBlank() }.toMutableSet()&#10;        set.add(iso)&#10;        prefs.edit().putString(KEY_HEALTH_NOTE_DATES, set.joinToString(&quot;,&quot;)).apply()&#10;    }&#10;    fun getHealthNoteDates(): Set&lt;String&gt; {&#10;        val current = prefs.getString(KEY_HEALTH_NOTE_DATES, &quot;&quot;) ?: &quot;&quot;&#10;        return current.split(',').filter { it.isNotBlank() }.toSet()&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/ActivityRecord.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/ActivityRecord.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.example.lifin.data.models&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class ActivityRecord(&#10;    @SerialName(&quot;activity_id&quot;) val id: Int? = null,&#10;    @SerialName(&quot;user_id&quot;) val userId: Int,&#10;    @SerialName(&quot;activity_name&quot;) val activityName: String?,&#10;    @SerialName(&quot;duration_minutes&quot;) val durationMinutes: Int?,&#10;    @SerialName(&quot;intensity&quot;) val intensity: String?,&#10;    @SerialName(&quot;created_at&quot;) val createdAt: String? = null&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/BloodGlucoseRecord.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/BloodGlucoseRecord.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.example.lifin.data.models&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class BloodGlucoseRecord(&#10;    @SerialName(&quot;gl_id&quot;) val id: Int? = null,&#10;    @SerialName(&quot;user_id&quot;) val userId: Int,&#10;    @SerialName(&quot;glucose_value&quot;) val glucoseValue: Double?,&#10;    @SerialName(&quot;created_at&quot;) val createdAt: String? = null&#10;)&#10;&#10;// deprecated - replaced by aggregated HealthNoteRecord" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/BloodPressureRecord.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/BloodPressureRecord.kt" />
              <option name="updatedContent" value="package com.example.lifin.data.models&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class BloodPressureRecord(&#10;    @SerialName(&quot;bp_id&quot;) val id: Int? = null,&#10;    @SerialName(&quot;user_id&quot;) val userId: Int,&#10;    @SerialName(&quot;bp_value&quot;) val bpValue: String?,&#10;    @SerialName(&quot;systolic&quot;) val systolic: Int?,&#10;    @SerialName(&quot;diastolic&quot;) val diastolic: Int?,&#10;    @SerialName(&quot;created_at&quot;) val createdAt: String? = null&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/HealthNoteRecord.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/HealthNoteRecord.kt" />
              <option name="updatedContent" value="package com.example.lifin.data.models&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class HealthNoteRecord(&#10;    @SerialName(&quot;id&quot;) val id: String? = null,&#10;    @SerialName(&quot;user_id&quot;) val userId: String,&#10;    @SerialName(&quot;weight_kg&quot;) val weightKg: Double?,&#10;    @SerialName(&quot;height_cm&quot;) val heightCm: Double?,&#10;    @SerialName(&quot;blood_pressure&quot;) val bloodPressure: String?,&#10;    @SerialName(&quot;blood_glucose&quot;) val bloodGlucose: Double?,&#10;    @SerialName(&quot;activity_minutes&quot;) val activityMinutes: Int?,&#10;    @SerialName(&quot;nutrition&quot;) val nutrition: String?,&#10;    @SerialName(&quot;created_at&quot;) val createdAt: String? = null&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/WeightHeightRecord.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/models/WeightHeightRecord.kt" />
              <option name="updatedContent" value="package com.example.lifin.data.models&#10;&#10;import kotlinx.serialization.SerialName&#10;import kotlinx.serialization.Serializable&#10;&#10;@Serializable&#10;data class WeightHeightRecord(&#10;    @SerialName(&quot;wh_id&quot;) val id: Int? = null,&#10;    @SerialName(&quot;user_id&quot;) val userId: Int,&#10;    @SerialName(&quot;weight&quot;) val weight: Double?,&#10;    @SerialName(&quot;height&quot;) val height: Double?,&#10;    @SerialName(&quot;created_at&quot;) val createdAt: String? = null&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/repository/AuthRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/repository/AuthRepository.kt" />
              <option name="originalContent" value="&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.data.repository&#10;&#10;import android.content.Context&#10;import com.example.lifin.data.local.EncryptedPreferences&#10;&#10;class AuthRepository {&#10;    private var prefs: EncryptedPreferences? = null&#10;&#10;    constructor()&#10;    constructor(context: Context) { prefs = EncryptedPreferences(context) }&#10;&#10;    private fun hasPrefs() = prefs != null&#10;&#10;    fun isLoggedIn(): Boolean {&#10;        return prefs?.isLoggedIn() ?: false&#10;    }&#10;&#10;    fun login(email: String, password: String): Result&lt;Unit&gt; {&#10;        // Stubbed login: accept email contains '@' and password length &gt;= 6&#10;        return if (email.contains(&quot;@&quot;) &amp;&amp; password.length &gt;= 6) {&#10;            prefs?.setLoggedIn(email)&#10;            Result.success(Unit)&#10;        } else Result.failure(IllegalArgumentException(&quot;Email atau password tidak valid&quot;))&#10;    }&#10;&#10;    fun logout(): Result&lt;Unit&gt; {&#10;        prefs?.clearLogin()&#10;        return Result.success(Unit)&#10;    }&#10;&#10;    fun changePassword(current: String, new: String): Result&lt;Unit&gt; {&#10;        // Stubbed logic: accept any non-empty current, new length &gt;= 6 and different from current&#10;        return if (current.isNotBlank() &amp;&amp; new.length &gt;= 6 &amp;&amp; new != current) {&#10;            Result.success(Unit)&#10;        } else {&#10;            val reason = when {&#10;                current.isBlank() -&gt; &quot;Password saat ini tidak boleh kosong&quot;&#10;                new.length &lt; 6 -&gt; &quot;Password baru minimal 6 karakter&quot;&#10;                new == current -&gt; &quot;Password baru tidak boleh sama dengan password saat ini&quot;&#10;                else -&gt; &quot;Gagal mengubah password&quot;&#10;            }&#10;            Result.failure(IllegalArgumentException(reason))&#10;        }&#10;    }&#10;&#10;    fun requestPasswordReset(email: String): Result&lt;Unit&gt; {&#10;        if (!email.contains(&quot;@&quot;)) return Result.failure(IllegalArgumentException(&quot;Email tidak valid&quot;))&#10;        // In a real app, send code via email or OTP service. We just succeed for UI flow.&#10;        return Result.success(Unit)&#10;    }&#10;&#10;    fun resetPassword(email: String, code: String, newPassword: String): Result&lt;Unit&gt; {&#10;        return if (email.contains(&quot;@&quot;) &amp;&amp; code.length == 6 &amp;&amp; newPassword.length &gt;= 6) {&#10;            Result.success(Unit)&#10;        } else {&#10;            val reason = when {&#10;                !email.contains(&quot;@&quot;) -&gt; &quot;Email tidak valid&quot;&#10;                code.length != 6 -&gt; &quot;Kode verifikasi salah&quot;&#10;                newPassword.length &lt; 6 -&gt; &quot;Password baru minimal 6 karakter&quot;&#10;                else -&gt; &quot;Gagal reset password&quot;&#10;            }&#10;            Result.failure(IllegalArgumentException(reason))&#10;        }&#10;    }&#10;&#10;    fun register(email: String, password: String): Result&lt;Unit&gt; {&#10;        return if (email.contains(&quot;@&quot;) &amp;&amp; password.length &gt;= 6) {&#10;            Result.success(Unit)&#10;        } else {&#10;            Result.failure(IllegalArgumentException(&quot;Email atau password tidak valid&quot;))&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/repository/PinRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/data/repository/PinRepository.kt" />
              <option name="originalContent" value="&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.data.repository&#10;&#10;import android.content.Context&#10;import com.example.lifin.data.local.EncryptedPreferences&#10;&#10;class PinRepository(context: Context) {&#10;    private val prefs = EncryptedPreferences(context)&#10;&#10;    fun isPinSet(): Boolean {&#10;        val pin = prefs.getPin()&#10;        return prefs.isPinEnabled() &amp;&amp; pin != null &amp;&amp; pin.length == 6&#10;    }&#10;&#10;    fun clearPin() {&#10;        prefs.clearPin()&#10;    }&#10;&#10;    fun verifyPin(pin: String): Boolean {&#10;        val stored = prefs.getPin()&#10;        return stored != null &amp;&amp; pin.length == 6 &amp;&amp; pin == stored&#10;    }&#10;&#10;    fun setupPin(pin: String): Result&lt;Unit&gt; {&#10;        return if (pin.length == 6 &amp;&amp; pin.all { it.isDigit() }) {&#10;            prefs.savePin(pin)&#10;            Result.success(Unit)&#10;        } else {&#10;            Result.failure(IllegalArgumentException(&quot;PIN harus 6 digit&quot;))&#10;        }&#10;    }&#10;&#10;    // Optional biometric helpers if needed by UI later&#10;    fun setBiometricEnabled(enabled: Boolean) = prefs.setBiometricEnabled(enabled)&#10;    fun isBiometricEnabled(): Boolean = prefs.isBiometricEnabled()&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/navigation/AppNavGraph.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/navigation/AppNavGraph.kt" />
              <option name="originalContent" value="package com.example.lifin.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import com.example.lifin.ui.auth.LoginScreen&#10;import com.example.lifin.ui.auth.RegisterScreen&#10;import com.example.lifin.ui.calendar.CalendarScreen&#10;import com.example.lifin.ui.home.HomeScreen&#10;import com.example.lifin.ui.profile.ProfileScreen&#10;import com.example.lifin.ui.security.PinVerifyScreen&#10;import com.example.lifin.ui.security.SetPinScreen&#10;import com.example.lifin.ui.splash.SplashScreen&#10;import kotlinx.coroutines.launch&#10;&#10;sealed class Screen(val route: String) {&#10;    object Splash : Screen(&quot;splash&quot;)&#10;    object Login : Screen(&quot;login&quot;)&#10;    object Register : Screen(&quot;register&quot;)&#10;    object SetPin : Screen(&quot;set_pin&quot;)&#10;    object PinVerify : Screen(&quot;pin_verify&quot;)&#10;    object Home : Screen(&quot;home&quot;)&#10;    object Calendar : Screen(&quot;calendar&quot;)&#10;    object Profile : Screen(&quot;profile&quot;)&#10;}&#10;&#10;@Composable&#10;fun AppNavGraph(&#10;    navController: NavHostController,&#10;    authRepository: com.example.lifin.data.repository.AuthRepository,&#10;    pinRepository: com.example.lifin.data.repository.PinRepository&#10;) {&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = Screen.Splash.route&#10;    ) {&#10;        // Splash&#10;        composable(Screen.Splash.route) {&#10;            // Check auth status dynamically each time splash is shown&#10;            val isLoggedIn = authRepository.isLoggedIn()&#10;            val isPinSet = pinRepository.isPinSet()&#10;&#10;            SplashScreen(&#10;                onNavigateToLogin = {&#10;                    navController.navigate(Screen.Login.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToSetPin = {&#10;                    navController.navigate(Screen.SetPin.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToPinVerify = {&#10;                    navController.navigate(Screen.PinVerify.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToHome = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                isLoggedIn = isLoggedIn,&#10;                isPinSet = isPinSet&#10;            )&#10;        }&#10;&#10;        // Login&#10;        composable(Screen.Login.route) {&#10;            LoginScreen(&#10;                onLoginSuccess = {&#10;                    // Setelah login, cek apakah PIN sudah di-set&#10;                    val isPinSet = pinRepository.isPinSet()&#10;                    if (isPinSet) {&#10;                        // Jika sudah ada PIN, jangan langsung ke Home. Wajib verifikasi PIN terlebih dahulu&#10;                        navController.navigate(Screen.PinVerify.route) {&#10;                            popUpTo(Screen.Login.route) { inclusive = true }&#10;                        }&#10;                    } else {&#10;                        navController.navigate(Screen.SetPin.route) {&#10;                            popUpTo(Screen.Login.route) { inclusive = true }&#10;                        }&#10;                    }&#10;                },&#10;                onNavigateToRegister = {&#10;                    navController.navigate(Screen.Register.route)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Register&#10;        composable(Screen.Register.route) {&#10;            RegisterScreen(&#10;                onRegisterSuccess = {&#10;                    // Setelah register berhasil, kembali ke login screen&#10;                    navController.popBackStack()&#10;                },&#10;                onNavigateBack = {&#10;                    navController.popBackStack()&#10;                }&#10;            )&#10;        }&#10;&#10;        // Set PIN (setelah login pertama kali)&#10;        composable(Screen.SetPin.route) {&#10;            SetPinScreen(&#10;                onPinSet = {&#10;                    // Setelah PIN dibuat, wajib verifikasi saat masuk berikutnya, tapi sekarang boleh ke Home&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.SetPin.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        // PIN Verify (saat buka app lagi / setelah login jika sudah punya PIN)&#10;        composable(Screen.PinVerify.route) {&#10;            PinVerifyScreen(&#10;                onPinVerified = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.PinVerify.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        // Home&#10;        composable(Screen.Home.route) {&#10;            HomeScreen(&#10;                onNavigateToProfile = {&#10;                    navController.navigate(Screen.Profile.route)&#10;                },&#10;                onNavigateToCalendar = {&#10;                    navController.navigate(Screen.Calendar.route)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Calendar&#10;        composable(Screen.Calendar.route) {&#10;            CalendarScreen(&#10;                onNavigateToHome = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.Home.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToProfile = {&#10;                    navController.navigate(Screen.Profile.route)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Profile&#10;        composable(Screen.Profile.route) {&#10;            ProfileScreen(&#10;                authRepository = authRepository,&#10;                pinRepository = pinRepository,&#10;                onNavigateBack = {&#10;                    navController.popBackStack()&#10;                },&#10;                onNavigateToHome = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.Home.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToCalendar = {&#10;                    navController.navigate(Screen.Calendar.route)&#10;                },&#10;                onLogoutSuccess = {&#10;                    navController.navigate(Screen.Login.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                        launchSingleTop = true&#10;                    }&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.navigation&#10;&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.remember&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import com.example.lifin.ui.auth.LoginScreen&#10;import com.example.lifin.ui.auth.RegisterScreen&#10;import com.example.lifin.ui.calendar.CalendarScreen&#10;import com.example.lifin.ui.home.HomeScreen&#10;import com.example.lifin.ui.profile.ProfileScreen&#10;import com.example.lifin.ui.profile.EditProfileScreen&#10;import com.example.lifin.ui.security.ChangePasswordScreen&#10;import com.example.lifin.ui.security.PinVerifyScreen&#10;import kotlinx.coroutines.launch&#10;&#10;sealed class Screen(val route: String) {&#10;    object Splash : Screen(&quot;splash&quot;)&#10;    object Login : Screen(&quot;login&quot;)&#10;    object Register : Screen(&quot;register&quot;)&#10;    object SetPin : Screen(&quot;set_pin&quot;)&#10;    object PinVerify : Screen(&quot;pin_verify&quot;)&#10;    object Home : Screen(&quot;home&quot;)&#10;    object Calendar : Screen(&quot;calendar&quot;)&#10;    object Profile : Screen(&quot;profile&quot;)&#10;    object ChangePassword : Screen(&quot;change_password&quot;)&#10;    object ForgotPassword : Screen(&quot;forgot_password&quot;)&#10;    object EditProfile : Screen(&quot;edit_profile&quot;)&#10;}&#10;&#10;@Composable&#10;fun AppNavGraph(&#10;    navController: NavHostController,&#10;    authRepository: com.example.lifin.data.repository.AuthRepository,&#10;    pinRepository: com.example.lifin.data.repository.PinRepository&#10;) {&#10;    NavHost(&#10;        navController = navController,&#10;        startDestination = Screen.Splash.route&#10;    ) {&#10;        // Splash&#10;        composable(Screen.Splash.route) {&#10;            // Check auth status dynamically each time splash is shown&#10;            val isLoggedIn = authRepository.isLoggedIn()&#10;            val isPinSet = pinRepository.isPinSet()&#10;&#10;            com.example.lifin.ui.splash.SplashScreen(&#10;                onNavigateToLogin = {&#10;                    navController.navigate(Screen.Login.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToSetPin = {&#10;                    navController.navigate(Screen.SetPin.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToPinVerify = {&#10;                    navController.navigate(Screen.PinVerify.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToHome = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                isLoggedIn = isLoggedIn,&#10;                isPinSet = isPinSet&#10;            )&#10;        }&#10;&#10;        // Login&#10;        composable(Screen.Login.route) {&#10;            val context = androidx.compose.ui.platform.LocalContext.current&#10;            val prefs = remember { com.example.lifin.data.local.EncryptedPreferences(context) }&#10;            com.example.lifin.ui.auth.LoginScreen(&#10;                onLoginSuccess = {&#10;                    // mark login date&#10;                    val iso = java.time.LocalDate.now().toString()&#10;                    prefs.setLastLoginDateIso(iso)&#10;                    val isPinSet = pinRepository.isPinSet()&#10;                    if (isPinSet) {&#10;                        navController.navigate(Screen.PinVerify.route) {&#10;                            popUpTo(Screen.Login.route) { inclusive = true }&#10;                        }&#10;                    } else {&#10;                        navController.navigate(Screen.SetPin.route) {&#10;                            popUpTo(Screen.Login.route) { inclusive = true }&#10;                        }&#10;                    }&#10;                },&#10;                onNavigateToRegister = { navController.navigate(Screen.Register.route) },&#10;                onNavigateToForgotPassword = { navController.navigate(Screen.ForgotPassword.route) }&#10;            )&#10;        }&#10;&#10;        // Forgot Password&#10;        composable(Screen.ForgotPassword.route) {&#10;            com.example.lifin.ui.auth.ForgotPasswordScreen(&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onResetSuccess = {&#10;                    // Back to Login after reset&#10;                    navController.popBackStack(Screen.Login.route, inclusive = false)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Register&#10;        composable(Screen.Register.route) {&#10;            RegisterScreen(&#10;                onRegisterSuccess = {&#10;                    // Setelah register berhasil, kembali ke login screen&#10;                    navController.popBackStack()&#10;                },&#10;                onNavigateBack = {&#10;                    navController.popBackStack()&#10;                }&#10;            )&#10;        }&#10;&#10;        // Set PIN (setelah login pertama kali)&#10;        composable(Screen.SetPin.route) {&#10;            com.example.lifin.ui.security.SetPinScreen(&#10;                onPinSet = {&#10;                    // Setelah PIN dibuat, wajib verifikasi saat masuk berikutnya, tapi sekarang boleh ke Home&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.SetPin.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        // PIN Verify (saat buka app lagi / setelah login jika sudah punya PIN)&#10;        composable(Screen.PinVerify.route) {&#10;            PinVerifyScreen(&#10;                onPinVerified = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.PinVerify.route) { inclusive = true }&#10;                    }&#10;                }&#10;            )&#10;        }&#10;&#10;        // Home&#10;        composable(Screen.Home.route) {&#10;            val context = androidx.compose.ui.platform.LocalContext.current&#10;            val prefs = remember { com.example.lifin.data.local.EncryptedPreferences(context) }&#10;            com.example.lifin.ui.home.HomeScreen(&#10;                onNavigateToProfile = {&#10;                    navController.navigate(Screen.Profile.route)&#10;                },&#10;                onNavigateToCalendar = {&#10;                    navController.navigate(Screen.Calendar.route)&#10;                },&#10;                onHealthNoteAdded = {&#10;                    // store note date for calendar&#10;                    val iso = java.time.LocalDate.now().toString()&#10;                    prefs.addHealthNoteDate(iso)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Calendar&#10;        composable(Screen.Calendar.route) {&#10;            CalendarScreen(&#10;                onNavigateToHome = {&#10;                    navController.navigate(Screen.Home.route) {&#10;                        popUpTo(Screen.Home.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToProfile = {&#10;                    navController.navigate(Screen.Profile.route)&#10;                }&#10;            )&#10;        }&#10;&#10;        // Profile&#10;        composable(Screen.Profile.route) {&#10;            val context = androidx.compose.ui.platform.LocalContext.current&#10;            val prefs = remember { com.example.lifin.data.local.EncryptedPreferences(context) }&#10;            com.example.lifin.ui.profile.ProfileScreen(&#10;                authRepository = authRepository,&#10;                pinRepository = pinRepository,&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onNavigateToHome = { navController.navigate(Screen.Home.route) },&#10;                onNavigateToCalendar = { navController.navigate(Screen.Calendar.route) },&#10;                onLogoutSuccess = {&#10;                    navController.navigate(Screen.Login.route) {&#10;                        popUpTo(Screen.Splash.route) { inclusive = true }&#10;                    }&#10;                },&#10;                onNavigateToChangePassword = { navController.navigate(Screen.ChangePassword.route) },&#10;                onNavigateToEditProfile = { navController.navigate(Screen.EditProfile.route) }&#10;            )&#10;        }&#10;&#10;        // Edit Profile&#10;        composable(Screen.EditProfile.route) {&#10;            com.example.lifin.ui.profile.EditProfileScreen(&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onSaved = { navController.popBackStack() },&#10;                onNavigateToChangePin = { navController.navigate(Screen.SetPin.route) }&#10;            )&#10;        }&#10;&#10;        // Change Password&#10;        composable(Screen.ChangePassword.route) {&#10;            ChangePasswordScreen(&#10;                onNavigateBack = { navController.popBackStack() },&#10;                onPasswordChanged = {&#10;                    // After changing password, go back to profile&#10;                    navController.popBackStack()&#10;                }&#10;            )&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/notification/NotificationHelper.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/notification/NotificationHelper.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.example.lifin.notification&#10;&#10;import android.app.AlarmManager&#10;import android.app.NotificationChannel&#10;import android.app.NotificationManager&#10;import android.app.PendingIntent&#10;import android.content.Context&#10;import android.content.Intent&#10;import android.graphics.Color&#10;import android.os.Build&#10;import androidx.core.app.NotificationCompat&#10;import com.example.lifin.R&#10;import java.util.Calendar&#10;&#10;// Import the receiver explicitly&#10;import com.example.lifin.notification.NotificationReceiver&#10;&#10;object NotificationHelper {&#10;    const val CHANNEL_ID = &quot;lifin_daily_channel&quot;&#10;    const val CHANNEL_NAME = &quot;Daily Reminders&quot;&#10;    const val NOTIFICATION_ID = 1001&#10;&#10;    fun ensureChannel(context: Context) {&#10;        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {&#10;            val nm = context.getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager&#10;            val channel = NotificationChannel(CHANNEL_ID, CHANNEL_NAME, NotificationManager.IMPORTANCE_DEFAULT)&#10;            channel.description = &quot;Daily health and weight logging reminders&quot;&#10;            channel.enableLights(true)&#10;            channel.lightColor = Color.GREEN&#10;            nm.createNotificationChannel(channel)&#10;        }&#10;    }&#10;&#10;    fun scheduleDaily(context: Context, hour: Int = 8, minute: Int = 0) {&#10;        ensureChannel(context)&#10;        val alarmManager = context.getSystemService(Context.ALARM_SERVICE) as AlarmManager&#10;        val intent = Intent(context, NotificationReceiver::class.java)&#10;        val pi = PendingIntent.getBroadcast(&#10;            context,&#10;            0,&#10;            intent,&#10;            PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_IMMUTABLE&#10;        )&#10;        val cal = Calendar.getInstance().apply {&#10;            set(Calendar.HOUR_OF_DAY, hour)&#10;            set(Calendar.MINUTE, minute)&#10;            set(Calendar.SECOND, 0)&#10;            set(Calendar.MILLISECOND, 0)&#10;            if (timeInMillis &lt;= System.currentTimeMillis()) {&#10;                add(Calendar.DAY_OF_YEAR, 1)&#10;            }&#10;        }&#10;        alarmManager.setRepeating(&#10;            AlarmManager.RTC_WAKEUP,&#10;            cal.timeInMillis,&#10;            AlarmManager.INTERVAL_DAY,&#10;            pi&#10;        )&#10;    }&#10;&#10;    fun cancelDaily(context: Context) {&#10;        val alarmManager = context.getSystemService(Context.ALARM_SERVICE) as AlarmManager&#10;        val intent = Intent(context, NotificationReceiver::class.java)&#10;        val pi = PendingIntent.getBroadcast(&#10;            context,&#10;            0,&#10;            intent,&#10;            PendingIntent.FLAG_UPDATE_CURRENT or PendingIntent.FLAG_IMMUTABLE&#10;        )&#10;        alarmManager.cancel(pi)&#10;    }&#10;&#10;    fun buildNotification(context: Context): android.app.Notification {&#10;        return NotificationCompat.Builder(context, CHANNEL_ID)&#10;            .setSmallIcon(R.drawable.ic_launcher_foreground)&#10;            .setContentTitle(&quot;LiFin Reminder&quot;)&#10;            .setContentText(&quot;Don't forget to log your weight and check your goals today.&quot;)&#10;            .setAutoCancel(true)&#10;            .build()&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/notification/NotificationReceiver.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/notification/NotificationReceiver.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.example.lifin.notification&#10;&#10;import android.Manifest&#10;import android.content.BroadcastReceiver&#10;import android.content.Context&#10;import android.content.Intent&#10;import android.content.pm.PackageManager&#10;import androidx.core.app.NotificationManagerCompat&#10;import androidx.core.content.ContextCompat&#10;&#10;class NotificationReceiver : BroadcastReceiver() {&#10;    override fun onReceive(context: Context, intent: Intent?) {&#10;        val permissionGranted = ContextCompat.checkSelfPermission(&#10;            context,&#10;            Manifest.permission.POST_NOTIFICATIONS&#10;        ) == PackageManager.PERMISSION_GRANTED&#10;        if (!permissionGranted) {&#10;            // Silently skip if no permission; UI should request it elsewhere when enabling notifications&#10;            return&#10;        }&#10;        val notification = NotificationHelper.buildNotification(context)&#10;        with(NotificationManagerCompat.from(context)) {&#10;            notify(NotificationHelper.NOTIFICATION_ID, notification)&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/security/AppLockManager.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/security/AppLockManager.kt" />
              <option name="originalContent" value="package com.example.lifin.security&#10;&#10;import android.content.Context&#10;import com.example.lifin.data.repository.AuthRepository&#10;import com.example.lifin.data.repository.PinRepository&#10;&#10;/**&#10; * Simple in-memory app lock manager. Determines whether the app should be locked&#10; * when entering foreground if the user is logged in and has a PIN configured.&#10; */&#10;class AppLockManager private constructor(private val context: Context) {&#10;    @Volatile&#10;    var isLocked: Boolean = false&#10;        private set&#10;&#10;    private var lastUnlockAt: Long = 0L&#10;    var lockTimeoutMs: Long = 0L // 0 = lock immediately on foreground&#10;&#10;    private val auth by lazy { AuthRepository() }&#10;    private val pinRepo by lazy { PinRepository(context) }&#10;&#10;    fun evaluateLockOnForeground() {&#10;        val loggedIn = auth.isLoggedIn()&#10;        val hasPin = pinRepo.isPinSet()&#10;        val now = System.currentTimeMillis()&#10;        val timedOut = (now - lastUnlockAt) &gt;= lockTimeoutMs&#10;        isLocked = loggedIn &amp;&amp; hasPin &amp;&amp; timedOut&#10;    }&#10;&#10;    fun unlock() {&#10;        isLocked = false&#10;        lastUnlockAt = System.currentTimeMillis()&#10;    }&#10;&#10;    companion object {&#10;        @Volatile&#10;        @Suppress(&quot;StaticFieldLeak&quot;) // We store only applicationContext to avoid leaking an Activity&#10;        private var INSTANCE: AppLockManager? = null&#10;&#10;        fun getInstance(context: Context): AppLockManager =&#10;            INSTANCE ?: synchronized(this) {&#10;                INSTANCE ?: AppLockManager(context.applicationContext).also { INSTANCE = it }&#10;            }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.lifin.security&#10;&#10;import android.content.Context&#10;import com.example.lifin.data.repository.AuthRepository&#10;import com.example.lifin.data.repository.PinRepository&#10;&#10;/**&#10; * Simple in-memory app lock manager. Determines whether the app should be locked&#10; * when entering foreground if the user is logged in and has a PIN configured.&#10; */&#10;class AppLockManager private constructor(private val context: Context) {&#10;    @Volatile&#10;    var isLocked: Boolean = false&#10;        private set&#10;&#10;    private var lastUnlockAt: Long = 0L&#10;    var lockTimeoutMs: Long = 0L // 0 = lock immediately on foreground&#10;&#10;    private val auth by lazy { AuthRepository(context) }&#10;    private val pinRepo by lazy { PinRepository(context) }&#10;&#10;    fun evaluateLockOnForeground() {&#10;        val loggedIn = auth.isLoggedIn()&#10;        val hasPin = pinRepo.isPinSet()&#10;        val now = System.currentTimeMillis()&#10;        val timedOut = (now - lastUnlockAt) &gt;= lockTimeoutMs&#10;        isLocked = loggedIn &amp;&amp; hasPin &amp;&amp; timedOut&#10;    }&#10;&#10;    fun unlock() {&#10;        isLocked = false&#10;        lastUnlockAt = System.currentTimeMillis()&#10;    }&#10;&#10;    companion object {&#10;        @Volatile&#10;        @Suppress(&quot;StaticFieldLeak&quot;) // We store only applicationContext to avoid leaking an Activity&#10;        private var INSTANCE: AppLockManager? = null&#10;&#10;        fun getInstance(context: Context): AppLockManager =&#10;            INSTANCE ?: synchronized(this) {&#10;                INSTANCE ?: AppLockManager(context.applicationContext).also { INSTANCE = it }&#10;            }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/AuthViewModel.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/AuthViewModel.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.auth&#10;&#10;import android.util.Log&#10;import androidx.lifecycle.ViewModel&#10;import androidx.lifecycle.viewModelScope&#10;import com.example.lifin.data.repository.AuthRepository&#10;import kotlinx.coroutines.flow.MutableStateFlow&#10;import kotlinx.coroutines.flow.StateFlow&#10;import kotlinx.coroutines.flow.asStateFlow&#10;import kotlinx.coroutines.launch&#10;&#10;data class AuthUiState(&#10;    val isLoading: Boolean = false,&#10;    val error: String? = null,&#10;    val isSuccess: Boolean = false&#10;)&#10;&#10;class AuthViewModel : ViewModel() {&#10;    private val repository = AuthRepository()&#10;&#10;    private val _uiState = MutableStateFlow(AuthUiState())&#10;    val uiState: StateFlow&lt;AuthUiState&gt; = _uiState.asStateFlow()&#10;&#10;    fun login(email: String, password: String, onSuccess: () -&gt; Unit) {&#10;        if (email.isBlank() || password.isBlank()) {&#10;            _uiState.value = AuthUiState(error = &quot;Email dan password harus diisi&quot;)&#10;            return&#10;        }&#10;&#10;        viewModelScope.launch {&#10;            _uiState.value = AuthUiState(isLoading = true)&#10;&#10;            val result = repository.login(email, password)&#10;&#10;            result.onSuccess {&#10;                Log.d(&quot;AuthViewModel&quot;, &quot; Login berhasil&quot;)&#10;                _uiState.value = AuthUiState(isSuccess = true)&#10;                onSuccess()&#10;            }.onFailure { error -&gt;&#10;                Log.e(&quot;AuthViewModel&quot;, &quot; Login gagal&quot;, error)&#10;                _uiState.value = AuthUiState(&#10;                    error = &quot;Login gagal: ${error.message}&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    fun register(email: String, password: String, onSuccess: () -&gt; Unit) {&#10;        if (email.isBlank() || password.isBlank()) {&#10;            _uiState.value = AuthUiState(error = &quot;Email dan password harus diisi&quot;)&#10;            return&#10;        }&#10;&#10;        if (password.length &lt; 6) {&#10;            _uiState.value = AuthUiState(error = &quot;Password minimal 6 karakter&quot;)&#10;            return&#10;        }&#10;&#10;        viewModelScope.launch {&#10;            _uiState.value = AuthUiState(isLoading = true)&#10;&#10;            val result = repository.register(email, password)&#10;&#10;            result.onSuccess {&#10;                Log.d(&quot;AuthViewModel&quot;, &quot; Register berhasil&quot;)&#10;                _uiState.value = AuthUiState(isSuccess = true)&#10;                onSuccess()&#10;            }.onFailure { error -&gt;&#10;                Log.e(&quot;AuthViewModel&quot;, &quot; Register gagal&quot;, error)&#10;                _uiState.value = AuthUiState(&#10;                    error = &quot;Pendaftaran gagal: ${error.message}&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    fun clearError() {&#10;        _uiState.value = _uiState.value.copy(error = null)&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.auth&#13;&#10;&#13;&#10;import android.util.Log&#13;&#10;import androidx.lifecycle.ViewModel&#13;&#10;import androidx.lifecycle.viewModelScope&#13;&#10;import com.example.lifin.data.repository.AuthRepository&#13;&#10;import kotlinx.coroutines.flow.MutableStateFlow&#13;&#10;import kotlinx.coroutines.flow.StateFlow&#13;&#10;import kotlinx.coroutines.flow.asStateFlow&#13;&#10;import kotlinx.coroutines.launch&#10;&#10;data class AuthUiState(&#10;    val isLoading: Boolean = false,&#10;    val error: String? = null,&#10;    val isSuccess: Boolean = false&#10;)&#10;&#10;class AuthViewModel(private val repository: AuthRepository) : ViewModel() {&#10;    private val _uiState = MutableStateFlow(AuthUiState())&#10;    val uiState: StateFlow&lt;AuthUiState&gt; = _uiState.asStateFlow()&#10;&#10;    fun login(email: String, password: String, onSuccess: () -&gt; Unit) {&#10;        if (email.isBlank() || password.isBlank()) {&#10;            _uiState.value = AuthUiState(error = &quot;Email dan password harus diisi&quot;)&#10;            return&#10;        }&#10;&#10;        viewModelScope.launch {&#10;            _uiState.value = AuthUiState(isLoading = true)&#10;&#10;            val result = repository.login(email, password)&#10;&#10;            result.onSuccess {&#10;                Log.d(&quot;AuthViewModel&quot;, &quot; Login berhasil&quot;)&#10;                _uiState.value = AuthUiState(isSuccess = true)&#10;                onSuccess()&#10;            }.onFailure { error -&gt;&#10;                Log.e(&quot;AuthViewModel&quot;, &quot; Login gagal&quot;, error)&#10;                _uiState.value = AuthUiState(&#10;                    error = &quot;Login gagal: ${error.message}&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    fun register(email: String, password: String, onSuccess: () -&gt; Unit) {&#10;        if (email.isBlank() || password.isBlank()) {&#10;            _uiState.value = AuthUiState(error = &quot;Email dan password harus diisi&quot;)&#10;            return&#10;        }&#10;&#10;        if (password.length &lt; 6) {&#10;            _uiState.value = AuthUiState(error = &quot;Password minimal 6 karakter&quot;)&#10;            return&#10;        }&#10;&#10;        viewModelScope.launch {&#10;            _uiState.value = AuthUiState(isLoading = true)&#10;&#10;            val result = repository.register(email, password)&#10;&#10;            result.onSuccess {&#10;                Log.d(&quot;AuthViewModel&quot;, &quot; Register berhasil&quot;)&#10;                _uiState.value = AuthUiState(isSuccess = true)&#10;                onSuccess()&#10;            }.onFailure { error -&gt;&#10;                Log.e(&quot;AuthViewModel&quot;, &quot; Register gagal&quot;, error)&#10;                _uiState.value = AuthUiState(&#10;                    error = &quot;Pendaftaran gagal: ${error.message}&quot;&#10;                )&#10;            }&#10;        }&#10;    }&#10;&#10;    fun clearError() {&#10;        _uiState.value = _uiState.value.copy(error = null)&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/ForgotPasswordScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/ForgotPasswordScreen.kt" />
              <option name="originalContent" value="&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.auth&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ForgotPasswordScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    onResetSuccess: () -&gt; Unit&#10;) {&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;    val auth = remember { com.example.lifin.data.repository.AuthRepository(context) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    var step by remember { mutableStateOf(1) } // 1: request, 2: verify+reset&#10;    var email by remember { mutableStateOf(&quot;&quot;) }&#10;    var code by remember { mutableStateOf(&quot;&quot;) }&#10;    var newPassword by remember { mutableStateOf(&quot;&quot;) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Forgot Password&quot;, fontSize = 18.sp, fontWeight = FontWeight.Bold) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = &quot;Back&quot;)&#10;                    }&#10;                },&#10;                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Transparent)&#10;            )&#10;        },&#10;        snackbarHost = { SnackbarHost(snackbarHostState) }&#10;    ) { padding -&gt;&#10;        Box(modifier = Modifier.fillMaxSize().padding(padding)) {&#10;            Image(&#10;                painter = painterResource(id = R.drawable.bgawal),&#10;                contentDescription = null,&#10;                contentScale = ContentScale.Crop,&#10;                modifier = Modifier.fillMaxSize(),&#10;                alpha = 0.5f&#10;            )&#10;&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(24.dp)&#10;                    .align(Alignment.Center),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(containerColor = Color(0xFFF5F5F5).copy(alpha = 0.95f)),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier.padding(24.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    if (step == 1) {&#10;                        OutlinedTextField(&#10;                            value = email,&#10;                            onValueChange = { email = it },&#10;                            placeholder = { Text(&quot;Email&quot;, color = Color(0xFFB7B4B4)) },&#10;                            singleLine = true,&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email, imeAction = ImeAction.Done),&#10;                            shape = RoundedCornerShape(8.dp),&#10;                            colors = OutlinedTextFieldDefaults.colors(&#10;                                focusedBorderColor = Color(0xFF738A45),&#10;                                unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                                focusedContainerColor = Color.White,&#10;                                unfocusedContainerColor = Color.White&#10;                            ),&#10;                            modifier = Modifier.fillMaxWidth()&#10;                        )&#10;                        if (errorMessage != null) Text(errorMessage!!, color = Color.Red, fontSize = 12.sp)&#10;                        Button(&#10;                            onClick = {&#10;                                errorMessage = null&#10;                                val res = auth.requestPasswordReset(email)&#10;                                if (res.isSuccess) {&#10;                                    scope.launch { snackbarHostState.showSnackbar(&quot;Verification code sent&quot;) }&#10;                                    step = 2&#10;                                } else {&#10;                                    errorMessage = res.exceptionOrNull()?.message&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth().height(48.dp),&#10;                            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF738A45)),&#10;                            shape = RoundedCornerShape(8.dp)&#10;                        ) { Text(&quot;Send Code&quot;, color = Color.White, fontWeight = FontWeight.Bold) }&#10;                    } else {&#10;                        OutlinedTextField(&#10;                            value = code,&#10;                            onValueChange = { code = it.filter { ch -&gt; ch.isDigit() }.take(6) },&#10;                            placeholder = { Text(&quot;Verification Code (6 digits)&quot;) },&#10;                            singleLine = true,&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Number, imeAction = ImeAction.Next),&#10;                            shape = RoundedCornerShape(8.dp),&#10;                            colors = OutlinedTextFieldDefaults.colors(&#10;                                focusedBorderColor = Color(0xFF738A45),&#10;                                unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                                focusedContainerColor = Color.White,&#10;                                unfocusedContainerColor = Color.White&#10;                            ),&#10;                            modifier = Modifier.fillMaxWidth()&#10;                        )&#10;                        OutlinedTextField(&#10;                            value = newPassword,&#10;                            onValueChange = { newPassword = it },&#10;                            placeholder = { Text(&quot;New Password (min 6 characters)&quot;) },&#10;                            visualTransformation = PasswordVisualTransformation(),&#10;                            singleLine = true,&#10;                            keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password, imeAction = ImeAction.Done),&#10;                            shape = RoundedCornerShape(8.dp),&#10;                            colors = OutlinedTextFieldDefaults.colors(&#10;                                focusedBorderColor = Color(0xFF738A45),&#10;                                unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                                focusedContainerColor = Color.White,&#10;                                unfocusedContainerColor = Color.White&#10;                            ),&#10;                            modifier = Modifier.fillMaxWidth()&#10;                        )&#10;                        if (errorMessage != null) Text(errorMessage!!, color = Color.Red, fontSize = 12.sp)&#10;                        Button(&#10;                            onClick = {&#10;                                errorMessage = null&#10;                                val res = auth.resetPassword(email, code, newPassword)&#10;                                if (res.isSuccess) {&#10;                                    scope.launch { snackbarHostState.showSnackbar(&quot;Password reset successful&quot;) }&#10;                                    onResetSuccess()&#10;                                } else {&#10;                                    errorMessage = res.exceptionOrNull()?.message&#10;                                }&#10;                            },&#10;                            modifier = Modifier.fillMaxWidth().height(48.dp),&#10;                            colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF738A45)),&#10;                            shape = RoundedCornerShape(8.dp)&#10;                        ) { Text(&quot;Reset Password&quot;, color = Color.White, fontWeight = FontWeight.Bold) }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/LoginScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/LoginScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.auth&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.SpanStyle&#10;import androidx.compose.ui.text.buildAnnotatedString&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.text.withStyle&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.AuthRepository&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun LoginScreen(&#10;    onLoginSuccess: () -&gt; Unit,&#10;    onNavigateToRegister: () -&gt; Unit&#10;) {&#10;    var showLoginSheet by remember { mutableStateOf(false) }&#10;    var email by remember { mutableStateOf(&quot;&quot;) }&#10;    var password by remember { mutableStateOf(&quot;&quot;) }&#10;    var isLoading by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;    val scope = rememberCoroutineScope()&#10;    val authRepository = remember { AuthRepository() }&#10;    val sheetState = rememberModalBottomSheetState(skipPartiallyExpanded = true)&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image - Mountains&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize()&#10;        )&#10;&#10;        // Content&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(horizontal = 32.dp),&#10;            horizontalAlignment = Alignment.Start,&#10;            verticalArrangement = Arrangement.SpaceBetween&#10;        ) {&#10;            // Top section with welcome text&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 120.dp),&#10;                horizontalAlignment = Alignment.Start&#10;            ) {&#10;                Text(&#10;                    text = &quot;Hello !&quot;,&#10;                    fontSize = 40.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(&#10;                        text = &quot;Welcome to &quot;,&#10;                        fontSize = 28.sp,&#10;                        fontWeight = FontWeight.Normal,&#10;                        color = Color.Black&#10;                    )&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(&#10;                                style = SpanStyle(&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    fontSize = 28.sp,&#10;                                    color = Color.Black&#10;                                )&#10;                            ) {&#10;                                append(&quot;LiFin&quot;)&#10;                            }&#10;                            withStyle(&#10;                                style = SpanStyle(&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    fontSize = 20.sp,&#10;                                    color = Color(0xFF4CAF50)&#10;                                )&#10;                            ) {&#10;                                append(&quot;+&quot;)&#10;                            }&#10;                        }&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Bottom card with buttons&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(bottom = 48.dp),&#10;                shape = RoundedCornerShape(24.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFFFFFF0) // Cream color&#10;                )&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(24.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    // Top indicator line&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .width(60.dp)&#10;                            .height(4.dp)&#10;                            .background(&#10;                                color = Color(0xFF738A45),&#10;                                shape = RoundedCornerShape(2.dp)&#10;                            )&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                    // Daftar Button&#10;                    Button(&#10;                        onClick = onNavigateToRegister,&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45) // Olive green&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp)&#10;                    ) {&#10;                        Text(&#10;                            &quot;Daftar&quot;,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                    }&#10;&#10;                    // Masuk Button (Outlined)&#10;                    OutlinedButton(&#10;                        onClick = { showLoginSheet = true },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.outlinedButtonColors(&#10;                            contentColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        border = androidx.compose.foundation.BorderStroke(2.dp, Color(0xFF738A45))&#10;                    ) {&#10;                        Text(&#10;                            &quot;Masuk&quot;,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Bold&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        // Bottom Sheet for Login Form&#10;        if (showLoginSheet) {&#10;            ModalBottomSheet(&#10;                onDismissRequest = {&#10;                    showLoginSheet = false&#10;                    errorMessage = null&#10;                },&#10;                sheetState = sheetState,&#10;                containerColor = Color(0xFFFFFFF0)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(horizontal = 32.dp, vertical = 24.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    // Top indicator line&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .width(60.dp)&#10;                            .height(4.dp)&#10;                            .background(&#10;                                color = Color(0xFF738A45),&#10;                                shape = RoundedCornerShape(2.dp)&#10;                            )&#10;                    )&#10;&#10;                    Text(&#10;                        text = &quot;Masuk&quot;,&#10;                        fontSize = 32.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.Black&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // Email Field&#10;                    OutlinedTextField(&#10;                        value = email,&#10;                        onValueChange = {&#10;                            email = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Email&quot;, color = Color(0xFFB7B4B4)) },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Password Field&#10;                    OutlinedTextField(&#10;                        value = password,&#10;                        onValueChange = {&#10;                            password = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Password&quot;, color = Color(0xFFB7B4B4)) },&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Error Message&#10;                    if (errorMessage != null) {&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // Masuk Button&#10;                    Button(&#10;                        onClick = {&#10;                            when {&#10;                                email.isEmpty() -&gt; errorMessage = &quot;Mohon isi email&quot;&#10;                                password.isEmpty() -&gt; errorMessage = &quot;Mohon isi password&quot;&#10;                                else -&gt; {&#10;                                    isLoading = true&#10;                                    scope.launch {&#10;                                        val result = authRepository.login(email, password)&#10;                                        result.onSuccess {&#10;                                            isLoading = false&#10;                                            showLoginSheet = false&#10;                                            onLoginSuccess()&#10;                                        }.onFailure { error -&gt;&#10;                                            isLoading = false&#10;                                            errorMessage = error.message&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        enabled = !isLoading&#10;                    ) {&#10;                        if (isLoading) {&#10;                            CircularProgressIndicator(&#10;                                color = Color.White,&#10;                                modifier = Modifier.size(24.dp)&#10;                            )&#10;                        } else {&#10;                            Text(&#10;                                &quot;Masuk&quot;,&#10;                                fontSize = 18.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(32.dp))&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.auth&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.SpanStyle&#10;import androidx.compose.ui.text.buildAnnotatedString&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.text.withStyle&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.AuthRepository&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun LoginScreen(&#10;    onLoginSuccess: () -&gt; Unit,&#10;    onNavigateToRegister: () -&gt; Unit,&#10;    onNavigateToForgotPassword: () -&gt; Unit&#10;) {&#10;    var showLoginSheet by remember { mutableStateOf(false) }&#10;    var email by remember { mutableStateOf(&quot;&quot;) }&#10;    var password by remember { mutableStateOf(&quot;&quot;) }&#10;    var isLoading by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;    val scope = rememberCoroutineScope()&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;    val authRepository = remember { AuthRepository(context) }&#10;    val sheetState = rememberModalBottomSheetState(skipPartiallyExpanded = true)&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image - Mountains&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize()&#10;        )&#10;&#10;        // Content&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(horizontal = 32.dp),&#10;            horizontalAlignment = Alignment.Start,&#10;            verticalArrangement = Arrangement.SpaceBetween&#10;        ) {&#10;            // Top section with welcome text&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(top = 120.dp),&#10;                horizontalAlignment = Alignment.Start&#10;            ) {&#10;                Text(&#10;                    text = &quot;Hello!&quot;,&#10;                    fontSize = 40.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;&#10;                Row(&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    Text(&#10;                        text = &quot;Welcome to &quot;,&#10;                        fontSize = 28.sp,&#10;                        fontWeight = FontWeight.Normal,&#10;                        color = Color.Black&#10;                    )&#10;                    Text(&#10;                        text = buildAnnotatedString {&#10;                            withStyle(&#10;                                style = SpanStyle(&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    fontSize = 28.sp,&#10;                                    color = Color.Black&#10;                                )&#10;                            ) {&#10;                                append(&quot;LiFin&quot;)&#10;                            }&#10;                            withStyle(&#10;                                style = SpanStyle(&#10;                                    fontWeight = FontWeight.Bold,&#10;                                    fontSize = 20.sp,&#10;                                    color = Color(0xFF4CAF50)&#10;                                )&#10;                            ) {&#10;                                append(&quot;+&quot;)&#10;                            }&#10;                        }&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Bottom card with buttons&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(bottom = 48.dp),&#10;                shape = RoundedCornerShape(24.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFFFFFF0) // Cream color&#10;                )&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(24.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    // Top indicator line&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .width(60.dp)&#10;                            .height(4.dp)&#10;                            .background(&#10;                                color = Color(0xFF738A45),&#10;                                shape = RoundedCornerShape(2.dp)&#10;                            )&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                    // Daftar Button&#10;                    Button(&#10;                        onClick = onNavigateToRegister,&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45) // Olive green&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp)&#10;                    ) {&#10;                        Text(&#10;                            &quot;Register&quot;,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                    }&#10;&#10;                    // Masuk Button (Outlined)&#10;                    OutlinedButton(&#10;                        onClick = { showLoginSheet = true },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.outlinedButtonColors(&#10;                            contentColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        border = androidx.compose.foundation.BorderStroke(2.dp, Color(0xFF738A45))&#10;                    ) {&#10;                        Text(&#10;                            &quot;Login&quot;,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Bold&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        // Bottom Sheet for Login Form&#10;        if (showLoginSheet) {&#10;            ModalBottomSheet(&#10;                onDismissRequest = {&#10;                    showLoginSheet = false&#10;                    errorMessage = null&#10;                },&#10;                sheetState = sheetState,&#10;                containerColor = Color(0xFFFFFFF0)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(horizontal = 32.dp, vertical = 24.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    // Top indicator line&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .width(60.dp)&#10;                            .height(4.dp)&#10;                            .background(&#10;                                color = Color(0xFF738A45),&#10;                                shape = RoundedCornerShape(2.dp)&#10;                            )&#10;                    )&#10;&#10;                    Text(&#10;                        text = &quot;Login&quot;,&#10;                        fontSize = 32.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.Black&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // Email Field&#10;                    OutlinedTextField(&#10;                        value = email,&#10;                        onValueChange = {&#10;                            email = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Email&quot;, color = Color(0xFFB7B4B4)) },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Password Field&#10;                    OutlinedTextField(&#10;                        value = password,&#10;                        onValueChange = {&#10;                            password = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Password&quot;, color = Color(0xFFB7B4B4)) },&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Error Message&#10;                    if (errorMessage != null) {&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // Masuk Button&#10;                    Button(&#10;                        onClick = {&#10;                            when {&#10;                                email.isEmpty() -&gt; errorMessage = &quot;Please enter email&quot;&#10;                                password.isEmpty() -&gt; errorMessage = &quot;Please enter password&quot;&#10;                                else -&gt; {&#10;                                    isLoading = true&#10;                                    scope.launch {&#10;                                        val result = authRepository.login(email, password)&#10;                                        result.onSuccess {&#10;                                            isLoading = false&#10;                                            showLoginSheet = false&#10;                                            onLoginSuccess()&#10;                                        }.onFailure { error -&gt;&#10;                                            isLoading = false&#10;                                            errorMessage = error.message&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        enabled = !isLoading&#10;                    ) {&#10;                        if (isLoading) {&#10;                            CircularProgressIndicator(&#10;                                color = Color.White,&#10;                                modifier = Modifier.size(24.dp)&#10;                            )&#10;                        } else {&#10;                            Text(&#10;                                &quot;Login&quot;,&#10;                                fontSize = 18.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Forgot password link&#10;                    TextButton(onClick = onNavigateToForgotPassword) {&#10;                        Text(&quot;Forgot password?&quot;, color = Color(0xFF738A45))&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(32.dp))&#10;                }&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/RegisterScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/auth/RegisterScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.auth&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.AuthRepository&#10;import kotlinx.coroutines.launch&#10;&#10;@Composable&#10;fun RegisterScreen(&#10;    onRegisterSuccess: () -&gt; Unit,&#10;    onNavigateBack: () -&gt; Unit&#10;) {&#10;    var name by remember { mutableStateOf(&quot;&quot;) }&#10;    var email by remember { mutableStateOf(&quot;&quot;) }&#10;    var password by remember { mutableStateOf(&quot;&quot;) }&#10;    var confirmPassword by remember { mutableStateOf(&quot;&quot;) }&#10;    var isLoading by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;    val scope = rememberCoroutineScope()&#10;    val authRepository = remember { AuthRepository() }&#10;&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image (dimmed mountains)&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize(),&#10;            alpha = 0.4f&#10;        )&#10;&#10;        // Cream overlay card&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(top = 100.dp),&#10;            contentAlignment = Alignment.TopCenter&#10;        ) {&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 24.dp),&#10;                shape = RoundedCornerShape(topStart = 24.dp, topEnd = 24.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFFFFFF0)&#10;                )&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(32.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(20.dp)&#10;                ) {&#10;                    // Top indicator line&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .width(60.dp)&#10;                            .height(4.dp)&#10;                            .background(&#10;                                color = Color(0xFF738A45),&#10;                                shape = RoundedCornerShape(2.dp)&#10;                            )&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                    // Title&#10;                    Text(&#10;                        text = &quot;Daftar&quot;,&#10;                        fontSize = 32.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.Black&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                    // Nama Field&#10;                    OutlinedTextField(&#10;                        value = name,&#10;                        onValueChange = {&#10;                            name = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Nama&quot;, color = Color(0xFFB7B4B4)) },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Email Field&#10;                    OutlinedTextField(&#10;                        value = email,&#10;                        onValueChange = {&#10;                            email = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Email&quot;, color = Color(0xFFB7B4B4)) },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Password Field&#10;                    OutlinedTextField(&#10;                        value = password,&#10;                        onValueChange = {&#10;                            password = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Password&quot;, color = Color(0xFFB7B4B4)) },&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Konfirmasi Password Field&#10;                    OutlinedTextField(&#10;                        value = confirmPassword,&#10;                        onValueChange = {&#10;                            confirmPassword = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Konfirmasi Password&quot;, color = Color(0xFFB7B4B4)) },&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                        isError = confirmPassword.isNotEmpty() &amp;&amp; password != confirmPassword,&#10;                        singleLine = true&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                    // Daftar Button&#10;                    Button(&#10;                        onClick = {&#10;                            when {&#10;                                name.isEmpty() -&gt; errorMessage = &quot;Mohon isi nama&quot;&#10;                                email.isEmpty() -&gt; errorMessage = &quot;Mohon isi email&quot;&#10;                                password.length &lt; 6 -&gt; errorMessage = &quot;Password minimal 6 karakter&quot;&#10;                                password != confirmPassword -&gt; errorMessage = &quot;Password tidak cocok&quot;&#10;                                else -&gt; {&#10;                                    isLoading = true&#10;                                    scope.launch {&#10;                                        val result = authRepository.register(email, password)&#10;                                        result.onSuccess {&#10;                                            isLoading = false&#10;                                            // Navigate back to login screen&#10;                                            onNavigateBack()&#10;                                        }.onFailure { error -&gt;&#10;                                            isLoading = false&#10;                                            errorMessage = error.message&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        enabled = !isLoading&#10;                    ) {&#10;                        if (isLoading) {&#10;                            CircularProgressIndicator(&#10;                                color = Color.White,&#10;                                modifier = Modifier.size(24.dp)&#10;                            )&#10;                        } else {&#10;                            Text(&#10;                                &quot;Daftar&quot;,&#10;                                fontSize = 18.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Already have account text&#10;                    Row(&#10;                        horizontalArrangement = Arrangement.Center,&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Sudah punya akun? &quot;,&#10;                            color = Color.Black,&#10;                            fontSize = 14.sp&#10;                        )&#10;                        Text(&#10;                            text = &quot;Masuk&quot;,&#10;                            color = Color(0xFF738A45),&#10;                            fontSize = 14.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            modifier = Modifier.clickable { onNavigateBack() }&#10;                        )&#10;                    }&#10;&#10;                    // Error Message&#10;                    if (errorMessage != null) {&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.auth&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.AuthRepository&#10;import kotlinx.coroutines.launch&#10;&#10;@Composable&#10;fun RegisterScreen(&#10;    onRegisterSuccess: () -&gt; Unit,&#10;    onNavigateBack: () -&gt; Unit&#10;) {&#10;    var name by remember { mutableStateOf(&quot;&quot;) }&#10;    var email by remember { mutableStateOf(&quot;&quot;) }&#10;    var password by remember { mutableStateOf(&quot;&quot;) }&#10;    var confirmPassword by remember { mutableStateOf(&quot;&quot;) }&#10;    var isLoading by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;    val scope = rememberCoroutineScope()&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;    val authRepository = remember { AuthRepository(context) }&#10;&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image (dimmed mountains)&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize(),&#10;            alpha = 0.4f&#10;        )&#10;&#10;        // Cream overlay card&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(top = 100.dp),&#10;            contentAlignment = Alignment.TopCenter&#10;        ) {&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(horizontal = 24.dp),&#10;                shape = RoundedCornerShape(topStart = 24.dp, topEnd = 24.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFFFFFF0)&#10;                )&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(32.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(20.dp)&#10;                ) {&#10;                    // Top indicator line&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .width(60.dp)&#10;                            .height(4.dp)&#10;                            .background(&#10;                                color = Color(0xFF738A45),&#10;                                shape = RoundedCornerShape(2.dp)&#10;                            )&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                    // Title&#10;                    Text(&#10;                        text = &quot;Register&quot;,&#10;                        fontSize = 32.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.Black&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                    // Nama Field&#10;                    OutlinedTextField(&#10;                        value = name,&#10;                        onValueChange = {&#10;                            name = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Nama&quot;, color = Color(0xFFB7B4B4)) },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Email Field&#10;                    OutlinedTextField(&#10;                        value = email,&#10;                        onValueChange = {&#10;                            email = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Email&quot;, color = Color(0xFFB7B4B4)) },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Email),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Password Field&#10;                    OutlinedTextField(&#10;                        value = password,&#10;                        onValueChange = {&#10;                            password = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Password&quot;, color = Color(0xFFB7B4B4)) },&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                        singleLine = true&#10;                    )&#10;&#10;                    // Konfirmasi Password Field&#10;                    OutlinedTextField(&#10;                        value = confirmPassword,&#10;                        onValueChange = {&#10;                            confirmPassword = it&#10;                            errorMessage = null&#10;                        },&#10;                        placeholder = { Text(&quot;Konfirmasi Password&quot;, color = Color(0xFFB7B4B4)) },&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = Color(0xFF738A45),&#10;                            unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        keyboardOptions = KeyboardOptions(keyboardType = KeyboardType.Password),&#10;                        isError = confirmPassword.isNotEmpty() &amp;&amp; password != confirmPassword,&#10;                        singleLine = true&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                    // Daftar Button&#10;                    Button(&#10;                        onClick = {&#10;                            when {&#10;                                name.isEmpty() -&gt; errorMessage = &quot;Please enter name&quot;&#10;                                email.isEmpty() -&gt; errorMessage = &quot;Please enter email&quot;&#10;                                password.length &lt; 6 -&gt; errorMessage = &quot;Password must be at least 6 characters&quot;&#10;                                password != confirmPassword -&gt; errorMessage = &quot;Passwords do not match&quot;&#10;                                else -&gt; {&#10;                                    isLoading = true&#10;                                    scope.launch {&#10;                                        val result = authRepository.register(email, password)&#10;                                        result.onSuccess {&#10;                                            isLoading = false&#10;                                            // Notify success to caller (AppNavGraph will pop back to login)&#10;                                            onRegisterSuccess()&#10;                                        }.onFailure { error -&gt;&#10;                                            isLoading = false&#10;                                            errorMessage = error.message&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(56.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        enabled = !isLoading&#10;                    ) {&#10;                        if (isLoading) {&#10;                            CircularProgressIndicator(&#10;                                color = Color.White,&#10;                                modifier = Modifier.size(24.dp)&#10;                            )&#10;                        } else {&#10;                            Text(&#10;                                &quot;Register&quot;,&#10;                                fontSize = 18.sp,&#10;                                fontWeight = FontWeight.Bold,&#10;                                color = Color.White&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Already have account text&#10;                    Row(&#10;                        horizontalArrangement = Arrangement.Center,&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Already have an account? &quot;,&#10;                            color = Color.Black,&#10;                            fontSize = 14.sp&#10;                        )&#10;                        Text(&#10;                            text = &quot;Login&quot;,&#10;                            color = Color(0xFF738A45),&#10;                            fontSize = 14.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            modifier = Modifier.clickable { onNavigateBack() }&#10;                        )&#10;                    }&#10;&#10;                    // Error Message&#10;                    if (errorMessage != null) {&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/calendar/CalendarScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/calendar/CalendarScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.calendar&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.KeyboardArrowLeft&#10;import androidx.compose.material.icons.automirrored.filled.KeyboardArrowRight&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import java.util.*&#10;import java.text.SimpleDateFormat&#10;&#10;// Removed stacked cards related data classes and composables (HealthCardModel, HealthCardType, StackedCardsSection, HealthCardItem, AktivitasFisikContent, GulaDarahContent, GulaDarahCard, TekananDarahContent, TekananDarahRow, KaloriContent, FoodItem)&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun CalendarScreen(&#10;    onNavigateToHome: () -&gt; Unit = {},&#10;    onNavigateToProfile: () -&gt; Unit = {}&#10;) {&#10;    var searchQuery by remember { mutableStateOf(&quot;&quot;) }&#10;    // Replace YearMonth with Calendar instance&#10;    var calendar by remember { mutableStateOf(Calendar.getInstance()) }&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            CalendarBottomNavigationBar(&#10;                onHomeClick = onNavigateToHome,&#10;                onCalendarClick = { /* Already on calendar */ },&#10;                onProfileClick = onNavigateToProfile&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Color(0xFFF5FFEF))&#10;                .padding(paddingValues)&#10;                .padding(horizontal = 20.dp)&#10;        ) {&#10;            item {&#10;                Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                // Search Bar&#10;                OutlinedTextField(&#10;                    value = searchQuery,&#10;                    onValueChange = { searchQuery = it },&#10;                    placeholder = { Text(&quot;Search&quot;, color = Color.Gray) },&#10;                    leadingIcon = {&#10;                        Icon(&#10;                            Icons.Default.Search,&#10;                            contentDescription = &quot;Search&quot;,&#10;                            tint = Color.Gray&#10;                        )&#10;                    },&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    shape = RoundedCornerShape(50.dp),&#10;                    colors = OutlinedTextFieldDefaults.colors(&#10;                        focusedBorderColor = Color.Transparent,&#10;                        unfocusedBorderColor = Color.Transparent,&#10;                        focusedContainerColor = Color.White,&#10;                        unfocusedContainerColor = Color.White&#10;                    ),&#10;                    singleLine = true&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(20.dp))&#10;            }&#10;&#10;            // Health Curve Chart&#10;            item {&#10;                Text(&#10;                    &quot;Health Curve&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                HealthCurveChart()&#10;&#10;                Spacer(modifier = Modifier.height(20.dp))&#10;            }&#10;&#10;            // Calendar&#10;            item {&#10;                CalendarWidget(&#10;                    calendar = calendar,&#10;                    onMonthChanged = { calendar = it },&#10;                    selectedDates = listOf(3, 4, 5, 6, 7, 8, 9)&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(20.dp))&#10;            }&#10;&#10;            // Progress Circle Stats&#10;            item {&#10;                ProgressStatsSection()&#10;&#10;                Spacer(modifier = Modifier.height(20.dp))&#10;            }&#10;&#10;            // History Pencatatan&#10;            item {&#10;                Text(&#10;                    &quot;History Pencatatan&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;            }&#10;&#10;            items(historyItems) { item -&gt;&#10;                HistoryItem(item)&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun HealthCurveChart() {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(200.dp),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = Color.White&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(16.dp)&#10;        ) {&#10;            // Simple bar chart representation&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(150.dp)&#10;                    .align(Alignment.BottomCenter),&#10;                horizontalArrangement = Arrangement.SpaceEvenly,&#10;                verticalAlignment = Alignment.Bottom&#10;            ) {&#10;                // Sample data - 7 bars (Sunday to Saturday)&#10;                BarChartItem(heightPercent = 0.4f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.5f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.7f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.6f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.8f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.65f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.7f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;            }&#10;&#10;            // Tooltip (Rectangle 65)&#10;            Box(&#10;                modifier = Modifier&#10;                    .align(Alignment.TopCenter)&#10;                    .offset(y = 20.dp)&#10;                    .background(Color(0xFF56AAFF), RoundedCornerShape(8.dp))&#10;                    .padding(horizontal = 12.dp, vertical = 6.dp)&#10;            ) {&#10;                Text(&#10;                    &quot;Rectangle 65&quot;,&#10;                    color = Color.White,&#10;                    fontSize = 12.sp,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BarChartItem(heightPercent: Float, color1: Color, color2: Color) {&#10;    Column(&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        modifier = Modifier.height(150.dp),&#10;        verticalArrangement = Arrangement.Bottom&#10;    ) {&#10;        // Blue bar&#10;        Box(&#10;            modifier = Modifier&#10;                .width(12.dp)&#10;                .fillMaxHeight(heightPercent * 0.5f)&#10;                .background(color1, RoundedCornerShape(topStart = 4.dp, topEnd = 4.dp))&#10;        )&#10;        Spacer(modifier = Modifier.height(2.dp))&#10;        // Pink bar&#10;        Box(&#10;            modifier = Modifier&#10;                .width(12.dp)&#10;                .fillMaxHeight(heightPercent * 0.5f)&#10;                .background(color2, RoundedCornerShape(bottomStart = 4.dp, bottomEnd = 4.dp))&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun CalendarWidget(&#10;    calendar: Calendar,&#10;    onMonthChanged: (Calendar) -&gt; Unit,&#10;    selectedDates: List&lt;Int&gt;&#10;) {&#10;    // Create a copy to avoid mutating original when computing values&#10;    val displayCal = calendar.clone() as Calendar&#10;    displayCal.set(Calendar.DAY_OF_MONTH, 1)&#10;    // Use non-deprecated locale creation&#10;    val localeId = Locale.forLanguageTag(&quot;id-ID&quot;)&#10;    val monthYearFormat = SimpleDateFormat(&quot;MMMM yyyy&quot;, localeId)&#10;    val monthYearLabel = monthYearFormat.format(displayCal.time).replaceFirstChar { it.titlecase(localeId) }&#10;    val firstDayOfWeekIndex = displayCal.get(Calendar.DAY_OF_WEEK) - 1 // 0..6 (Sunday=1)&#10;    val daysInMonth = displayCal.getActualMaximum(Calendar.DAY_OF_MONTH)&#10;&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            // Month/Year Header with navigation&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                IconButton(onClick = {&#10;                    val newCal = (calendar.clone() as Calendar).apply { add(Calendar.MONTH, -1) }&#10;                    onMonthChanged(newCal)&#10;                }) {&#10;                    Icon(Icons.AutoMirrored.Filled.KeyboardArrowLeft, &quot;Previous Month&quot;, tint = Color.Gray)&#10;                }&#10;&#10;                Text(&#10;                    text = monthYearLabel,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;&#10;                IconButton(onClick = {&#10;                    val newCal = (calendar.clone() as Calendar).apply { add(Calendar.MONTH, 1) }&#10;                    onMonthChanged(newCal)&#10;                }) {&#10;                    Icon(Icons.AutoMirrored.Filled.KeyboardArrowRight, &quot;Next Month&quot;, tint = Color.Gray)&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            // Day headers (S M T W T F S)&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceEvenly&#10;            ) {&#10;                listOf(&quot;S&quot;, &quot;M&quot;, &quot;T&quot;, &quot;W&quot;, &quot;T&quot;, &quot;F&quot;, &quot;S&quot;).forEach { day -&gt;&#10;                    Text(&#10;                        text = day,&#10;                        modifier = Modifier.weight(1f),&#10;                        textAlign = TextAlign.Center,&#10;                        fontSize = 12.sp,&#10;                        color = Color.Gray,&#10;                        fontWeight = FontWeight.Medium&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(8.dp))&#10;&#10;            // Calendar days with colored backgrounds&#10;            Column {&#10;                var dayCounter = 1&#10;                repeat(6) { week -&gt;&#10;                    if (dayCounter &lt;= daysInMonth) {&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.SpaceEvenly&#10;                        ) {&#10;                            repeat(7) { dayOfWeek -&gt;&#10;                                if (week == 0 &amp;&amp; dayOfWeek &lt; firstDayOfWeekIndex) {&#10;                                    Spacer(modifier = Modifier.weight(1f))&#10;                                } else if (dayCounter &lt;= daysInMonth) {&#10;                                    CalendarDayItem(&#10;                                        day = dayCounter,&#10;                                        isSelected = selectedDates.contains(dayCounter),&#10;                                        color = getDayColor(dayCounter, selectedDates),&#10;                                        modifier = Modifier.weight(1f)&#10;                                    )&#10;                                    dayCounter++&#10;                                } else {&#10;                                    Spacer(modifier = Modifier.weight(1f))&#10;                                }&#10;                            }&#10;                        }&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;fun getDayColor(day: Int, selectedDates: List&lt;Int&gt;): Color {&#10;    if (!selectedDates.contains(day)) return Color.Transparent&#10;&#10;    // Rainbow colors for selected days (matching design)&#10;    val colors = listOf(&#10;        Color(0xFFFF1414), // Red - 03&#10;        Color(0xFFFF892F), // Orange - 04&#10;        Color(0xFFFFE629), // Yellow - 05&#10;        Color(0xFF77FF4A), // Green - 06&#10;        Color(0xFF58BAFF), // Blue - 07&#10;        Color(0xFF9B89FF), // Purple - 08&#10;        Color(0xFFEF74FF)  // Pink - 09&#10;    )&#10;&#10;    val index = selectedDates.indexOf(day)&#10;    return if (index in colors.indices) colors[index] else Color.Gray&#10;}&#10;&#10;@Composable&#10;fun CalendarDayItem(&#10;    day: Int,&#10;    isSelected: Boolean,&#10;    color: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Box(&#10;        modifier = modifier&#10;            .aspectRatio(1f)&#10;            .padding(4.dp)&#10;            .clip(RoundedCornerShape(12.dp))&#10;            .background(color)&#10;            .border(&#10;                width = if (isSelected) 2.dp else 0.dp,&#10;                color = if (isSelected) Color.White else Color.Transparent,&#10;                shape = RoundedCornerShape(12.dp)&#10;            ),&#10;        contentAlignment = Alignment.Center&#10;    ) {&#10;        Text(&#10;            text = day.toString().padStart(2, '0'),&#10;            color = if (isSelected) Color.White else Color.Black,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isSelected) FontWeight.Bold else FontWeight.Normal&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProgressStatsSection() {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        // Circular Progress&#10;        Box(&#10;            modifier = Modifier.size(140.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            CircularProgressIndicator(&#10;                progress = { 0.87f },&#10;                modifier = Modifier.size(140.dp),&#10;                strokeWidth = 12.dp,&#10;                color = Color(0xFF51E0F9),&#10;                trackColor = Color(0xFFE0E0E0)&#10;            )&#10;            CircularProgressIndicator(&#10;                progress = { 0.65f },&#10;                modifier = Modifier.size(110.dp),&#10;                strokeWidth = 12.dp,&#10;                color = Color(0xFFFF1414),&#10;                trackColor = Color.Transparent&#10;            )&#10;            Text(&#10;                &quot;87%&quot;,&#10;                fontSize = 28.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color.Black&#10;            )&#10;        }&#10;&#10;        Spacer(modifier = Modifier.width(20.dp))&#10;&#10;        // Stats&#10;        Column(&#10;            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            StatItem(&#10;                icon = &quot;&quot;,&#10;                value = &quot;1,820&quot;,&#10;                unit = &quot;kcal&quot;,&#10;                color = Color(0xFF51E0F9)&#10;            )&#10;            StatItem(&#10;                icon = &quot;&quot;,&#10;                value = &quot;50&quot;,&#10;                unit = &quot;mnt&quot;,&#10;                color = Color(0xFFFF1414)&#10;            )&#10;            StatItem(&#10;                icon = &quot;&quot;,&#10;                value = &quot;7&quot;,&#10;                unit = &quot;gelas&quot;,&#10;                color = Color(0xFF9B89FF)&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatItem(icon: String, value: String, unit: String, color: Color) {&#10;    Row(&#10;        verticalAlignment = Alignment.CenterVertically,&#10;        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;    ) {&#10;        Text(icon, fontSize = 20.sp)&#10;        Text(&#10;            value,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = color // gunakan parameter color di sini&#10;        )&#10;        Text(&#10;            unit,&#10;            fontSize = 14.sp,&#10;            color = Color.Gray&#10;        )&#10;    }&#10;}&#10;&#10;data class HistoryItemData(&#10;    val title: String,&#10;    val date: String&#10;)&#10;&#10;val historyItems = listOf(&#10;    HistoryItemData(&quot;Rabu, 18 November 2025&quot;, &quot;Detail&quot;),&#10;    HistoryItemData(&quot;Jumat, 30 November 2025&quot;, &quot;Detail&quot;)&#10;)&#10;&#10;@Composable&#10;fun HistoryItem(item: HistoryItemData) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = Color.White&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Text(&#10;                item.title,&#10;                fontSize = 14.sp,&#10;                color = Color.Black&#10;            )&#10;&#10;            TextButton(onClick = { /* Show detail */ }) {&#10;                Text(&#10;                    &quot;Detail&quot;,&#10;                    color = Color(0xFF56AAFF),&#10;                    fontSize = 14.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun CalendarBottomNavigationBar(&#10;    onHomeClick: () -&gt; Unit,&#10;    onCalendarClick: () -&gt; Unit,&#10;    onProfileClick: () -&gt; Unit&#10;) {&#10;    NavigationBar(&#10;        containerColor = Color(0xFFF5F5F5),&#10;        tonalElevation = 8.dp&#10;    ) {&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    Icons.Default.Home,&#10;                    contentDescription = &quot;Home&quot;,&#10;                    tint = Color.Gray&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onHomeClick&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .clip(CircleShape)&#10;                        .background(Color(0xFF738A45)),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        Icons.Default.DateRange,&#10;                        contentDescription = &quot;Calendar&quot;,&#10;                        tint = Color.White&#10;                    )&#10;                }&#10;            },&#10;            selected = true,&#10;            onClick = onCalendarClick&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    Icons.Default.Person,&#10;                    contentDescription = &quot;Profile&quot;,&#10;                    tint = Color.Gray&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onProfileClick&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.calendar&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.automirrored.filled.ArrowForward&#10;import androidx.compose.material.icons.automirrored.filled.KeyboardArrowLeft&#10;import androidx.compose.material.icons.automirrored.filled.KeyboardArrowRight&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import java.time.LocalDate&#10;import java.time.format.DateTimeFormatter&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import java.util.*&#10;import java.text.SimpleDateFormat&#10;import com.example.lifin.ui.components.AppBottomNavBar&#10;import com.example.lifin.ui.components.BottomNavItem&#10;&#10;// Removed stacked cards related data classes and composables (HealthCardModel, HealthCardType, StackedCardsSection, HealthCardItem, AktivitasFisikContent, GulaDarahContent, GulaDarahCard, TekananDarahContent, TekananDarahRow, KaloriContent, FoodItem)&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun CalendarScreen(&#10;    onNavigateToHome: () -&gt; Unit = {},&#10;    onNavigateToProfile: () -&gt; Unit = {}&#10;) {&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;    val prefs = remember { com.example.lifin.data.local.EncryptedPreferences(context) }&#10;    // read dates&#10;    val loginDateIso = remember { prefs.getLastLoginDateIso() }&#10;    val noteDates = remember { prefs.getHealthNoteDates() }&#10;&#10;    var displayMonth by remember { mutableStateOf(LocalDate.now().withDayOfMonth(1)) }&#10;    val firstOfMonth = displayMonth&#10;    val startDayOfWeekIndex = firstOfMonth.dayOfWeek.value % 7&#10;    val daysInMonth = firstOfMonth.lengthOfMonth()&#10;    val formatter = DateTimeFormatter.ISO_DATE&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            AppBottomNavBar(&#10;                selected = BottomNavItem.Calendar,&#10;                onHome = onNavigateToHome,&#10;                onCalendar = { },&#10;                onProfile = onNavigateToProfile&#10;            )&#10;        }&#10;    ) { paddingValues -&gt;&#10;        LazyColumn(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .background(Color(0xFFF5FFEF))&#10;                .padding(paddingValues)&#10;                .padding(horizontal = 20.dp)&#10;        ) {&#10;            item {&#10;                Row(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    horizontalArrangement = Arrangement.SpaceBetween,&#10;                    verticalAlignment = Alignment.CenterVertically&#10;                ) {&#10;                    IconButton(onClick = { displayMonth = displayMonth.minusMonths(1) }) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = &quot;Prev&quot;, tint = Color(0xFF738A45))&#10;                    }&#10;                    Text(&#10;                        text = displayMonth.format(DateTimeFormatter.ofPattern(&quot;MMMM yyyy&quot;)),&#10;                        fontSize = 18.sp,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                    IconButton(onClick = { displayMonth = displayMonth.plusMonths(1) }) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowForward, contentDescription = &quot;Next&quot;, tint = Color(0xFF738A45))&#10;                    }&#10;                }&#10;                Spacer(Modifier.height(12.dp))&#10;&#10;                // Calendar grid&#10;                for (week in 0..5) {&#10;                    Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.spacedBy(6.dp)) {&#10;                        for (dow in 0..6) {&#10;                            val cellIndex = week * 7 + dow&#10;                            val dayNumber = cellIndex - startDayOfWeekIndex + 1&#10;                            if (dayNumber in 1..daysInMonth) {&#10;                                val date = firstOfMonth.withDayOfMonth(dayNumber)&#10;                                val iso = date.format(formatter)&#10;                                val bg = when {&#10;                                    loginDateIso == iso -&gt; Color(0xFFFFF59D) // kuning prioritas&#10;                                    noteDates.contains(iso) -&gt; Color(0xFFC8E6C9) // hijau&#10;                                    else -&gt; Color.White&#10;                                }&#10;                                Box(&#10;                                    modifier = Modifier&#10;                                        .weight(1f)&#10;                                        .height(42.dp)&#10;                                        .clip(RoundedCornerShape(8.dp))&#10;                                        .background(bg),&#10;                                    contentAlignment = Alignment.Center&#10;                                ) { Text(dayNumber.toString(), fontSize = 12.sp) }&#10;                            } else {&#10;                                Spacer(Modifier.weight(1f).height(42.dp))&#10;                            }&#10;                        }&#10;                    }&#10;                    Spacer(Modifier.height(6.dp))&#10;                }&#10;                Spacer(Modifier.height(24.dp))&#10;            }&#10;&#10;            // Health Curve Chart&#10;            item {&#10;                Text(&#10;                    &quot;Health Curve&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                HealthCurveChart()&#10;&#10;                Spacer(modifier = Modifier.height(20.dp))&#10;            }&#10;&#10;            // Progress Circle Stats&#10;            item {&#10;                ProgressStatsSection()&#10;&#10;                Spacer(modifier = Modifier.height(20.dp))&#10;            }&#10;&#10;            // History Pencatatan&#10;            item {&#10;                Text(&#10;                    &quot;History Pencatatan&quot;,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;            }&#10;&#10;            items(historyItems) { item -&gt;&#10;                HistoryItem(item)&#10;                Spacer(modifier = Modifier.height(8.dp))&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun HealthCurveChart() {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(200.dp),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = Color.White&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(16.dp)&#10;        ) {&#10;            // Simple bar chart representation&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(150.dp)&#10;                    .align(Alignment.BottomCenter),&#10;                horizontalArrangement = Arrangement.SpaceEvenly,&#10;                verticalAlignment = Alignment.Bottom&#10;            ) {&#10;                // Sample data - 7 bars (Sunday to Saturday)&#10;                BarChartItem(heightPercent = 0.4f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.5f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.7f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.6f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.8f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.65f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;                BarChartItem(heightPercent = 0.7f, color1 = Color(0xFF56AAFF), color2 = Color(0xFFFF5699))&#10;            }&#10;&#10;            // Tooltip (Rectangle 65)&#10;            Box(&#10;                modifier = Modifier&#10;                    .align(Alignment.TopCenter)&#10;                    .offset(y = 20.dp)&#10;                    .background(Color(0xFF56AAFF), RoundedCornerShape(8.dp))&#10;                    .padding(horizontal = 12.dp, vertical = 6.dp)&#10;            ) {&#10;                Text(&#10;                    &quot;Rectangle 65&quot;,&#10;                    color = Color.White,&#10;                    fontSize = 12.sp,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BarChartItem(heightPercent: Float, color1: Color, color2: Color) {&#10;    Column(&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        modifier = Modifier.height(150.dp),&#10;        verticalArrangement = Arrangement.Bottom&#10;    ) {&#10;        // Blue bar&#10;        Box(&#10;            modifier = Modifier&#10;                .width(12.dp)&#10;                .fillMaxHeight(heightPercent * 0.5f)&#10;                .background(color1, RoundedCornerShape(topStart = 4.dp, topEnd = 4.dp))&#10;        )&#10;        Spacer(modifier = Modifier.height(2.dp))&#10;        // Pink bar&#10;        Box(&#10;            modifier = Modifier&#10;                .width(12.dp)&#10;                .fillMaxHeight(heightPercent * 0.5f)&#10;                .background(color2, RoundedCornerShape(bottomStart = 4.dp, bottomEnd = 4.dp))&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun CalendarWidget(&#10;    calendar: Calendar,&#10;    onMonthChanged: (Calendar) -&gt; Unit,&#10;    selectedDates: List&lt;Int&gt;&#10;) {&#10;    // Create a copy to avoid mutating original when computing values&#10;    val displayCal = calendar.clone() as Calendar&#10;    displayCal.set(Calendar.DAY_OF_MONTH, 1)&#10;    // Use non-deprecated locale creation&#10;    val localeId = Locale.forLanguageTag(&quot;id-ID&quot;)&#10;    val monthYearFormat = SimpleDateFormat(&quot;MMMM yyyy&quot;, localeId)&#10;    val monthYearLabel = monthYearFormat.format(displayCal.time).replaceFirstChar { it.titlecase(localeId) }&#10;    val firstDayOfWeekIndex = displayCal.get(Calendar.DAY_OF_WEEK) - 1 // 0..6 (Sunday=1)&#10;    val daysInMonth = displayCal.getActualMaximum(Calendar.DAY_OF_MONTH)&#10;&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            // Month/Year Header with navigation&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                IconButton(onClick = {&#10;                    val newCal = (calendar.clone() as Calendar).apply { add(Calendar.MONTH, -1) }&#10;                    onMonthChanged(newCal)&#10;                }) {&#10;                    Icon(Icons.AutoMirrored.Filled.KeyboardArrowLeft, &quot;Previous Month&quot;, tint = Color.Gray)&#10;                }&#10;&#10;                Text(&#10;                    text = monthYearLabel,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold&#10;                )&#10;&#10;                IconButton(onClick = {&#10;                    val newCal = (calendar.clone() as Calendar).apply { add(Calendar.MONTH, 1) }&#10;                    onMonthChanged(newCal)&#10;                }) {&#10;                    Icon(Icons.AutoMirrored.Filled.KeyboardArrowRight, &quot;Next Month&quot;, tint = Color.Gray)&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            // Day headers (S M T W T F S)&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceEvenly&#10;            ) {&#10;                listOf(&quot;S&quot;, &quot;M&quot;, &quot;T&quot;, &quot;W&quot;, &quot;T&quot;, &quot;F&quot;, &quot;S&quot;).forEach { day -&gt;&#10;                    Text(&#10;                        text = day,&#10;                        modifier = Modifier.weight(1f),&#10;                        textAlign = TextAlign.Center,&#10;                        fontSize = 12.sp,&#10;                        color = Color.Gray,&#10;                        fontWeight = FontWeight.Medium&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(8.dp))&#10;&#10;            // Calendar days with colored backgrounds&#10;            Column {&#10;                var dayCounter = 1&#10;                repeat(6) { week -&gt;&#10;                    if (dayCounter &lt;= daysInMonth) {&#10;                        Row(&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            horizontalArrangement = Arrangement.SpaceEvenly&#10;                        ) {&#10;                            repeat(7) { dayOfWeek -&gt;&#10;                                if (week == 0 &amp;&amp; dayOfWeek &lt; firstDayOfWeekIndex) {&#10;                                    Spacer(modifier = Modifier.weight(1f))&#10;                                } else if (dayCounter &lt;= daysInMonth) {&#10;                                    CalendarDayItem(&#10;                                        day = dayCounter,&#10;                                        isSelected = selectedDates.contains(dayCounter),&#10;                                        color = getDayColor(dayCounter, selectedDates),&#10;                                        modifier = Modifier.weight(1f)&#10;                                    )&#10;                                    dayCounter++&#10;                                } else {&#10;                                    Spacer(modifier = Modifier.weight(1f))&#10;                                }&#10;                            }&#10;                        }&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;fun getDayColor(day: Int, selectedDates: List&lt;Int&gt;): Color {&#10;    if (!selectedDates.contains(day)) return Color.Transparent&#10;&#10;    // Rainbow colors for selected days (matching design)&#10;    val colors = listOf(&#10;        Color(0xFFFF1414), // Red - 03&#10;        Color(0xFFFF892F), // Orange - 04&#10;        Color(0xFFFFE629), // Yellow - 05&#10;        Color(0xFF77FF4A), // Green - 06&#10;        Color(0xFF58BAFF), // Blue - 07&#10;        Color(0xFF9B89FF), // Purple - 08&#10;        Color(0xFFEF74FF)  // Pink - 09&#10;    )&#10;&#10;    val index = selectedDates.indexOf(day)&#10;    return if (index in colors.indices) colors[index] else Color.Gray&#10;}&#10;&#10;@Composable&#10;fun CalendarDayItem(&#10;    day: Int,&#10;    isSelected: Boolean,&#10;    color: Color,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Box(&#10;        modifier = modifier&#10;            .aspectRatio(1f)&#10;            .padding(4.dp)&#10;            .clip(RoundedCornerShape(12.dp))&#10;            .background(color)&#10;            .border(&#10;                width = if (isSelected) 2.dp else 0.dp,&#10;                color = if (isSelected) Color.White else Color.Transparent,&#10;                shape = RoundedCornerShape(12.dp)&#10;            ),&#10;        contentAlignment = Alignment.Center&#10;    ) {&#10;        Text(&#10;            text = day.toString().padStart(2, '0'),&#10;            color = if (isSelected) Color.White else Color.Black,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isSelected) FontWeight.Bold else FontWeight.Normal&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProgressStatsSection() {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        // Circular Progress&#10;        Box(&#10;            modifier = Modifier.size(140.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            CircularProgressIndicator(&#10;                progress = { 0.87f },&#10;                modifier = Modifier.size(140.dp),&#10;                strokeWidth = 12.dp,&#10;                color = Color(0xFF51E0F9),&#10;                trackColor = Color(0xFFE0E0E0)&#10;            )&#10;            CircularProgressIndicator(&#10;                progress = { 0.65f },&#10;                modifier = Modifier.size(110.dp),&#10;                strokeWidth = 12.dp,&#10;                color = Color(0xFFFF1414),&#10;                trackColor = Color.Transparent&#10;            )&#10;            Text(&#10;                &quot;87%&quot;,&#10;                fontSize = 28.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color.Black&#10;            )&#10;        }&#10;&#10;        Spacer(modifier = Modifier.width(20.dp))&#10;&#10;        // Stats&#10;        Column(&#10;            verticalArrangement = Arrangement.spacedBy(12.dp)&#10;        ) {&#10;            StatItem(&#10;                icon = &quot;&quot;,&#10;                value = &quot;1,820&quot;,&#10;                unit = &quot;kcal&quot;,&#10;                color = Color(0xFF51E0F9)&#10;            )&#10;            StatItem(&#10;                icon = &quot;&quot;,&#10;                value = &quot;50&quot;,&#10;                unit = &quot;mnt&quot;,&#10;                color = Color(0xFFFF1414)&#10;            )&#10;            StatItem(&#10;                icon = &quot;&quot;,&#10;                value = &quot;7&quot;,&#10;                unit = &quot;gelas&quot;,&#10;                color = Color(0xFF9B89FF)&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun StatItem(icon: String, value: String, unit: String, color: Color) {&#10;    Row(&#10;        verticalAlignment = Alignment.CenterVertically,&#10;        horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;    ) {&#10;        Text(icon, fontSize = 20.sp)&#10;        Text(&#10;            value,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = color // gunakan parameter color di sini&#10;        )&#10;        Text(&#10;            unit,&#10;            fontSize = 14.sp,&#10;            color = Color.Gray&#10;        )&#10;    }&#10;}&#10;&#10;data class HistoryItemData(&#10;    val title: String,&#10;    val date: String&#10;)&#10;&#10;val historyItems = listOf(&#10;    HistoryItemData(&quot;Rabu, 18 November 2025&quot;, &quot;Detail&quot;),&#10;    HistoryItemData(&quot;Jumat, 30 November 2025&quot;, &quot;Detail&quot;)&#10;)&#10;&#10;@Composable&#10;fun HistoryItem(item: HistoryItemData) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = Color.White&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Text(&#10;                item.title,&#10;                fontSize = 14.sp,&#10;                color = Color.Black&#10;            )&#10;&#10;            TextButton(onClick = { /* Show detail */ }) {&#10;                Text(&#10;                    &quot;Detail&quot;,&#10;                    color = Color(0xFF56AAFF),&#10;                    fontSize = 14.sp,&#10;                    fontWeight = FontWeight.Medium&#10;                )&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/components/AppBottomNavBar.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/components/AppBottomNavBar.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.components&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.DateRange&#10;import androidx.compose.material.icons.filled.Home&#10;import androidx.compose.material.icons.filled.Person&#10;import androidx.compose.material3.Icon&#10;import androidx.compose.material3.Surface&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.unit.Dp&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.animation.core.animateDpAsState&#10;import androidx.compose.animation.core.animateFloatAsState&#10;import androidx.compose.foundation.interaction.MutableInteractionSource&#10;import androidx.compose.foundation.interaction.collectIsPressedAsState&#10;import androidx.compose.ui.graphics.graphicsLayer&#10;&#10;enum class BottomNavItem { Home, Calendar, Profile }&#10;&#10;@Composable&#10;fun AppBottomNavBar(&#10;    selected: BottomNavItem,&#10;    onHome: () -&gt; Unit,&#10;    onCalendar: () -&gt; Unit,&#10;    onProfile: () -&gt; Unit,&#10;    modifier: Modifier = Modifier,&#10;    height: Dp = 84.dp&#10;) {&#10;    Box(modifier = modifier.fillMaxWidth()) {&#10;        // Batang putih rounded&#10;        Surface(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .height(height)&#10;                .align(Alignment.BottomCenter),&#10;            color = Color.White,&#10;            shape = RoundedCornerShape(28.dp),&#10;            shadowElevation = 8.dp&#10;        ) {&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(horizontal = 32.dp),&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                horizontalArrangement = Arrangement.Start&#10;            ) {&#10;                NavIcon(&#10;                    icon = Icons.Filled.Home,&#10;                    content = &quot;Home&quot;,&#10;                    active = selected == BottomNavItem.Home,&#10;                    onClick = onHome&#10;                )&#10;                Spacer(Modifier.width(40.dp))&#10;                NavIcon(&#10;                    icon = Icons.Filled.DateRange,&#10;                    content = &quot;Calendar&quot;,&#10;                    active = selected == BottomNavItem.Calendar,&#10;                    onClick = onCalendar&#10;                )&#10;            }&#10;        }&#10;        // Lingkaran profil mengambang&#10;        Box(&#10;            modifier = Modifier&#10;                .align(Alignment.BottomEnd)&#10;                .offset(x = (-12).dp, y = (-12).dp)&#10;                .size(56.dp)&#10;                .clip(CircleShape)&#10;                .background(Color(0xFF738A45))&#10;                .clickable { onProfile() },&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Icon(&#10;                imageVector = Icons.Filled.Person,&#10;                contentDescription = &quot;Profile&quot;,&#10;                tint = Color.White&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun NavIcon(&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    content: String,&#10;    active: Boolean,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    val tint = if (active) Color(0xFF738A45) else Color(0xFF5F5F5F)&#10;    val interactionSource = remember { MutableInteractionSource() }&#10;    val pressed by interactionSource.collectIsPressedAsState()&#10;    val scale by animateFloatAsState(if (pressed) 0.9f else 1f, label = &quot;navScale&quot;)&#10;    val elevation by animateDpAsState(if (pressed) 6.dp else 0.dp, label = &quot;navElevation&quot;)&#10;&#10;    Surface(&#10;        modifier = Modifier&#10;            .graphicsLayer(scaleX = scale, scaleY = scale)&#10;            .clip(RoundedCornerShape(18.dp))&#10;            .clickable(interactionSource = interactionSource, indication = null) { onClick() }&#10;            .padding(4.dp),&#10;        color = Color.Transparent,&#10;        shadowElevation = elevation&#10;    ) {&#10;        Icon(icon, contentDescription = content, tint = tint, modifier = Modifier.size(28.dp))&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/home/HomeScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/home/HomeScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.home&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.HealthNoteRepository&#10;import com.example.lifin.ui.components.OtherInformationSection&#10;import androidx.compose.foundation.pager.HorizontalPager&#10;import androidx.compose.foundation.pager.rememberPagerState&#10;import androidx.compose.foundation.border&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    modifier: Modifier = Modifier,&#10;    onNavigateToProfile: () -&gt; Unit = {},&#10;    onNavigateToCalendar: () -&gt; Unit = {}&#10;) {&#10;    var searchQuery by remember { mutableStateOf(&quot;&quot;) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val coroutineScope = rememberCoroutineScope()&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            BottomNavigationBar(&#10;                onProfileClick = onNavigateToProfile,&#10;                onCalendarClick = onNavigateToCalendar&#10;            )&#10;        },&#10;        containerColor = Color.White,&#10;        snackbarHost = { SnackbarHost(hostState = snackbarHostState) }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;                .background(Color.White) // ensure content area is white&#10;        ) {&#10;            // Background Image (keep at top)&#10;            Image(&#10;                painter = painterResource(id = R.drawable.bglanding),&#10;                contentDescription = &quot;Background&quot;,&#10;                contentScale = ContentScale.Crop,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(280.dp)&#10;                    .align(Alignment.TopCenter)&#10;            )&#10;&#10;            // Content&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(horizontal = 20.dp)&#10;            ) {&#10;                LazyColumn(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    item {&#10;                        Spacer(modifier = Modifier.height(60.dp))&#10;                        Text(&#10;                            text = &quot;Hello, everyone!&quot;,&#10;                            fontSize = 24.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.Black&#10;                        )&#10;                        Spacer(modifier = Modifier.height(16.dp))&#10;                        OutlinedTextField(&#10;                            value = searchQuery,&#10;                            onValueChange = { searchQuery = it },&#10;                            placeholder = { Text(&quot;Search&quot;, color = Color.Gray) },&#10;                            leadingIcon = { Icon(Icons.Default.Search, contentDescription = &quot;Search&quot;, tint = Color.Gray) },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            shape = RoundedCornerShape(50.dp),&#10;                            colors = OutlinedTextFieldDefaults.colors(&#10;                                focusedBorderColor = Color.Transparent,&#10;                                unfocusedBorderColor = Color.Transparent,&#10;                                focusedContainerColor = Color.White,&#10;                                unfocusedContainerColor = Color.White&#10;                            ),&#10;                            singleLine = true&#10;                        )&#10;                        Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                        // Carousel: 3 cards&#10;                        val pagerState = rememberPagerState(pageCount = { 3 })&#10;                        Column {&#10;                            HorizontalPager(&#10;                                state = pagerState,&#10;                                modifier = Modifier.fillMaxWidth()&#10;                            ) { page -&gt;&#10;                                when (page) {&#10;                                    0 -&gt; ReminderCard(&#10;                                        title = &quot;Udah minum hari ini ?&quot;,&#10;                                        subtitle = &quot;Jangan lupa minum air 8 gelas perhari !&quot;,&#10;                                        backgroundColor = Color(0xFFA9BF93),&#10;                                        rightImages = listOf(R.drawable.botolpink, R.drawable.botolputih)&#10;                                    )&#10;                                    1 -&gt; ReminderCard(&#10;                                        title = &quot;Bagaimana perasaanmu sekarang ?&quot;,&#10;                                        subtitle = &quot;Jangan lupa istirahat yang cukup ya,\nkarena badan kamu juga butuh perhatian&quot;,&#10;                                        backgroundColor = Color(0xFFBFE3EB),&#10;                                        rightImages = listOf(R.drawable.jamdinding)&#10;                                    )&#10;                                    2 -&gt; ReminderCard(&#10;                                        title = &quot;Udah makan apa hari ini ?&quot;,&#10;                                        subtitle = &quot;Jaga pola makan,\nkurangin minyak dan makanan pedas&quot;,&#10;                                        backgroundColor = Color(0xFFE0C8A5),&#10;                                        rightImages = listOf(R.drawable.sarapan)&#10;                                    )&#10;                                }&#10;                            }&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            // Simple pager indicator&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.Center&#10;                            ) {&#10;                                repeat(3) { i -&gt;&#10;                                    val selected = i == pagerState.currentPage&#10;                                    Box(&#10;                                        modifier = Modifier&#10;                                            .size(if (selected) 10.dp else 8.dp)&#10;                                            .clip(CircleShape)&#10;                                            .background(if (selected) Color(0xFF738A45) else Color.LightGray)&#10;                                    )&#10;                                    Spacer(modifier = Modifier.width(6.dp))&#10;                                }&#10;                            }&#10;                        }&#10;                        // After carousel indicator insert Add Health Note toggle &amp; form&#10;                        var showHealthNoteForm by remember { mutableStateOf(false) }&#10;                        Spacer(modifier = Modifier.height(12.dp))&#10;                        // Toggle Card&#10;                        Card(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(52.dp)&#10;                                .clip(RoundedCornerShape(50.dp))&#10;                                .border(1.dp, Color(0xFF4F5F2E), RoundedCornerShape(50.dp))&#10;                                .clickable { showHealthNoteForm = !showHealthNoteForm },&#10;                            colors = CardDefaults.cardColors(containerColor = Color.White),&#10;                            elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)&#10;                        ) {&#10;                            Row(&#10;                                modifier = Modifier&#10;                                    .fillMaxSize()&#10;                                    .padding(horizontal = 16.dp),&#10;                                verticalAlignment = Alignment.CenterVertically,&#10;                                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                            ) {&#10;                                Icon(Icons.Default.Folder, contentDescription = null, tint = Color(0xFF4F5F2E))&#10;                                Text(&#10;                                    text = &quot;Add your health note&quot;,&#10;                                    fontSize = 14.sp,&#10;                                    fontWeight = FontWeight.Medium,&#10;                                    color = Color(0xFF4F5F2E)&#10;                                )&#10;                            }&#10;                        }&#10;                        if (showHealthNoteForm) {&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            val repo: HealthNoteRepository = remember { HealthNoteRepository() }&#10;                            HealthNoteForm(&#10;                                onSave = { note -&gt;&#10;                                    val userId = repo.currentUserId()&#10;                                    if (userId == null) {&#10;                                        coroutineScope.launch { snackbarHostState.showSnackbar(&quot;Harus login terlebih dahulu&quot;) }&#10;                                        return@HealthNoteForm&#10;                                    }&#10;                                    val v = repo.validate(&#10;                                        weight = note.beratBadan,&#10;                                        height = note.tinggiBadan,&#10;                                        bloodPressure = note.tekananDarah,&#10;                                        bloodGlucose = note.gulaDarah,&#10;                                        activityMinutes = note.aktivitas,&#10;                                        nutrition = note.nutrisi&#10;                                    )&#10;                                    if (!v.isValid) {&#10;                                        coroutineScope.launch { snackbarHostState.showSnackbar(v.errors.joinToString(&quot;\n&quot;)) }&#10;                                    } else {&#10;                                        coroutineScope.launch {&#10;                                            val result = repo.save(&#10;                                                userId = userId,&#10;                                                weight = note.beratBadan,&#10;                                                height = note.tinggiBadan,&#10;                                                bloodPressure = note.tekananDarah,&#10;                                                bloodGlucose = note.gulaDarah,&#10;                                                activityMinutes = note.aktivitas,&#10;                                                nutrition = note.nutrisi&#10;                                            )&#10;                                            if (result.isSuccess) {&#10;                                                snackbarHostState.showSnackbar(&quot;Catatan tersimpan&quot;)&#10;                                                showHealthNoteForm = false&#10;                                            } else {&#10;                                                snackbarHostState.showSnackbar(&quot;Gagal: ${result.exceptionOrNull()?.message}&quot;)&#10;                                            }&#10;                                        }&#10;                                    }&#10;                                }&#10;                            )&#10;                        }&#10;                    }&#10;                    // Health Metrics Grid as single item&#10;                    item {&#10;                        LazyVerticalGrid(&#10;                            columns = GridCells.Fixed(2),&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(12.dp),&#10;                            modifier = Modifier.fillMaxWidth().height(400.dp)&#10;                        ) {&#10;                            items(healthMetrics) { metric -&gt;&#10;                                HealthMetricCard(metric)&#10;                            }&#10;                        }&#10;                    }&#10;                    // Insert Other Information Section&#10;                    item {&#10;                        OtherInformationSection()&#10;                        Spacer(modifier = Modifier.height(32.dp))&#10;                    }&#10;                    // Bottom spacer for nav bar overlap&#10;                    item { Spacer(modifier = Modifier.height(80.dp)) }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// ReminderCard composable used in carousel&#10;@Composable&#10;private fun ReminderCard(&#10;    title: String,&#10;    subtitle: String,&#10;    backgroundColor: Color,&#10;    rightImages: List&lt;Int&gt;&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(120.dp),&#10;        shape = RoundedCornerShape(24.dp),&#10;        colors = CardDefaults.cardColors(containerColor = backgroundColor)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically,&#10;            horizontalArrangement = Arrangement.SpaceBetween&#10;        ) {&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                Text(&#10;                    text = title,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;                Text(&#10;                    text = subtitle,&#10;                    fontSize = 12.sp,&#10;                    color = Color.Black.copy(alpha = 0.7f)&#10;                )&#10;            }&#10;            // Right images stacked/horizontal&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                rightImages.forEach { res -&gt;&#10;                    Image(&#10;                        painter = painterResource(id = res),&#10;                        contentDescription = null,&#10;                        modifier = Modifier.size(70.dp),&#10;                        contentScale = ContentScale.Crop&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// Data class for health metrics&#10;data class HealthMetric(&#10;    val value: String,&#10;    val unit: String,&#10;    val label: String = &quot;&quot;,&#10;    val backgroundColor: Color,&#10;    val icon: Int? = null&#10;)&#10;&#10;// Health metrics data&#10;val healthMetrics = listOf(&#10;    HealthMetric(&quot;160&quot;, &quot;cm&quot;, &quot;&quot;, Color(0xFF89C2FF), R.drawable.jerapah),&#10;    HealthMetric(&quot;120/80&quot;, &quot;&quot;, &quot;&quot;, Color(0xFF3F99F8), R.drawable.termometer),&#10;    HealthMetric(&quot;45&quot;, &quot;&quot;, &quot;&quot;, Color(0xFFFF8989), R.drawable.anaksenam),&#10;    HealthMetric(&quot;100&quot;, &quot;mg/dL&quot;, &quot;&quot;, Color(0xFF89FFD0), R.drawable.ukuran),&#10;    HealthMetric(&quot;180&quot;, &quot;kcal&quot;, &quot;&quot;, Color(0xFFC889FF), R.drawable.brokoli),&#10;    HealthMetric(&quot;70&quot;, &quot;kg&quot;, &quot;&quot;, Color(0xFFFF8989), R.drawable.timbangan)&#10;)&#10;&#10;@Composable&#10;fun HealthMetricCard(metric: HealthMetric) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(120.dp),&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = metric.backgroundColor&#10;        )&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(12.dp)&#10;        ) {&#10;            Column(&#10;                modifier = Modifier.align(Alignment.TopStart)&#10;            ) {&#10;                Text(&#10;                    text = metric.value,&#10;                    fontSize = 32.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.White&#10;                )&#10;                if (metric.unit.isNotEmpty()) {&#10;                    Text(&#10;                        text = metric.unit,&#10;                        fontSize = 14.sp,&#10;                        fontWeight = FontWeight.Medium,&#10;                        color = Color.White.copy(alpha = 0.9f)&#10;                    )&#10;                }&#10;            }&#10;&#10;            if (metric.icon != null) {&#10;                Image(&#10;                    painter = painterResource(id = metric.icon),&#10;                    contentDescription = null,&#10;                    modifier = Modifier&#10;                        .size(50.dp)&#10;                        .align(Alignment.BottomEnd)&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomNavigationBar(&#10;    onProfileClick: () -&gt; Unit = {},&#10;    onCalendarClick: () -&gt; Unit = {}&#10;) {&#10;    NavigationBar(&#10;        containerColor = Color(0xFFF5F5F5),&#10;        tonalElevation = 8.dp&#10;    ) {&#10;        NavigationBarItem(&#10;            icon = {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .clip(CircleShape)&#10;                        .background(Color(0xFF738A45)),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        Icons.Default.Home,&#10;                        contentDescription = &quot;Home&quot;,&#10;                        tint = Color.White&#10;                    )&#10;                }&#10;            },&#10;            selected = true,&#10;            onClick = { }&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    Icons.Default.DateRange,&#10;                    contentDescription = &quot;Calendar&quot;,&#10;                    tint = Color.Gray&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onCalendarClick&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    Icons.Default.Person,&#10;                    contentDescription = &quot;Profile&quot;,&#10;                    tint = Color.Gray&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onProfileClick&#10;        )&#10;    }&#10;}&#10;&#10;// Data model for health note&#10;private data class HealthNote(&#10;    val beratBadan: String,&#10;    val tinggiBadan: String,&#10;    val tekananDarah: String,&#10;    val gulaDarah: String,&#10;    val aktivitas: String,&#10;    val nutrisi: String&#10;)&#10;&#10;@Composable&#10;private fun HealthNoteForm(onSave: (HealthNote) -&gt; Unit) {&#10;    // Field states&#10;    var berat by remember { mutableStateOf(&quot;&quot;) }&#10;    var tinggi by remember { mutableStateOf(&quot;&quot;) }&#10;    var tekanan by remember { mutableStateOf(&quot;&quot;) }&#10;    var gula by remember { mutableStateOf(&quot;&quot;) }&#10;    var aktivitas by remember { mutableStateOf(&quot;&quot;) }&#10;    var nutrisi by remember { mutableStateOf(&quot;&quot;) }&#10;    var isSaving by remember { mutableStateOf(false) }&#10;    var fieldErrors by remember { mutableStateOf&lt;List&lt;String&gt;&gt;(emptyList()) }&#10;&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(top = 4.dp)&#10;            .border(1.dp, Color(0xFF4F5F2E), RoundedCornerShape(24.dp)),&#10;        shape = RoundedCornerShape(24.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White)&#10;    ) {&#10;        Column(modifier = Modifier.padding(20.dp)) {&#10;            Text(&#10;                text = &quot;Health note&quot;,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color(0xFF4F5F2E)&#10;            )&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;            Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                Column(modifier = Modifier.weight(1f), verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    LabeledInput(label = &quot;Berat Badan :&quot;, value = berat, placeholder = &quot;kg&quot;, onChange = { berat = it })&#10;                    LabeledInput(label = &quot;Tekanan Darah :&quot;, value = tekanan, placeholder = &quot;120/80&quot;, onChange = { tekanan = it })&#10;                    LabeledInput(label = &quot;Aktivitas :&quot;, value = aktivitas, placeholder = &quot;menit&quot;, onChange = { aktivitas = it })&#10;                }&#10;                Column(modifier = Modifier.weight(1f), verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    LabeledInput(label = &quot;Tinggi Badan :&quot;, value = tinggi, placeholder = &quot;cm&quot;, onChange = { tinggi = it })&#10;                    LabeledInput(label = &quot;Gula Darah :&quot;, value = gula, placeholder = &quot;mg/dL&quot;, onChange = { gula = it })&#10;                    LabeledInput(label = &quot;Nutrisi :&quot;, value = nutrisi, placeholder = &quot;makanan&quot;, onChange = { nutrisi = it })&#10;                }&#10;            }&#10;            Spacer(modifier = Modifier.height(20.dp))&#10;            Button(&#10;                onClick = {&#10;                    if (!isSaving) {&#10;                        isSaving = true&#10;                        fieldErrors = emptyList() // clear previous&#10;                        val note = HealthNote(berat, tinggi, tekanan, gula, aktivitas, nutrisi)&#10;                        onSave(note)&#10;                        isSaving = false&#10;                    }&#10;                },&#10;                modifier = Modifier&#10;                    .align(Alignment.CenterHorizontally)&#10;                    .height(38.dp),&#10;                shape = RoundedCornerShape(50.dp),&#10;                colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF738A45))&#10;            ) {&#10;                Text(&quot;Simpan Catatan&quot;, color = Color.White, fontSize = 14.sp, fontWeight = FontWeight.Medium)&#10;            }&#10;&#10;            // Error messages display&#10;            if (fieldErrors.isNotEmpty()) {&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;                fieldErrors.forEach { err -&gt;&#10;                    Text(err, color = Color.Red, fontSize = 12.sp)&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun LabeledInput(label: String, value: String, placeholder: String, onChange: (String) -&gt; Unit) {&#10;    Column {&#10;        Text(label, fontSize = 12.sp, fontWeight = FontWeight.Medium, color = Color(0xFF4F5F2E))&#10;        Spacer(modifier = Modifier.height(4.dp))&#10;        OutlinedTextField(&#10;            value = value,&#10;            onValueChange = onChange,&#10;            placeholder = { Text(placeholder, color = Color(0xFF4F5F2E).copy(alpha = 0.5f)) },&#10;            singleLine = true,&#10;            shape = RoundedCornerShape(50.dp),&#10;            colors = OutlinedTextFieldDefaults.colors(&#10;                focusedBorderColor = Color.Transparent,&#10;                unfocusedBorderColor = Color.Transparent,&#10;                focusedContainerColor = Color(0xFFF3FCE9),&#10;                unfocusedContainerColor = Color(0xFFF3FCE9)&#10;            ),&#10;            modifier = Modifier.fillMaxWidth()&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.home&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.lazy.grid.items&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.ui.components.OtherInformationSection&#10;import androidx.compose.foundation.pager.HorizontalPager&#10;import androidx.compose.foundation.pager.rememberPagerState&#10;import androidx.compose.foundation.border&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun HomeScreen(&#10;    modifier: Modifier = Modifier,&#10;    onNavigateToProfile: () -&gt; Unit = {},&#10;    onNavigateToCalendar: () -&gt; Unit = {},&#10;    onHealthNoteAdded: () -&gt; Unit = {}&#10;) {&#10;    var searchQuery by remember { mutableStateOf(&quot;&quot;) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val coroutineScope = rememberCoroutineScope()&#10;&#10;    Scaffold(&#10;        bottomBar = {&#10;            BottomNavigationBar(&#10;                onProfileClick = onNavigateToProfile,&#10;                onCalendarClick = onNavigateToCalendar&#10;            )&#10;        },&#10;        containerColor = Color.White,&#10;        snackbarHost = { SnackbarHost(hostState = snackbarHostState) }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;                .background(Color.White) // ensure content area is white&#10;        ) {&#10;            // Background Image (keep at top)&#10;            Image(&#10;                painter = painterResource(id = R.drawable.bglanding),&#10;                contentDescription = &quot;Background&quot;,&#10;                contentScale = ContentScale.Crop,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(280.dp)&#10;                    .align(Alignment.TopCenter)&#10;            )&#10;&#10;            // Content&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(horizontal = 20.dp)&#10;            ) {&#10;                LazyColumn(&#10;                    modifier = Modifier.fillMaxSize(),&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    item {&#10;                        Spacer(modifier = Modifier.height(60.dp))&#10;                        Text(&#10;                            text = &quot;Hello, everyone!&quot;,&#10;                            fontSize = 24.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.Black&#10;                        )&#10;                        Spacer(modifier = Modifier.height(16.dp))&#10;                        OutlinedTextField(&#10;                            value = searchQuery,&#10;                            onValueChange = { searchQuery = it },&#10;                            placeholder = { Text(&quot;Search&quot;, color = Color.Gray) },&#10;                            leadingIcon = { Icon(Icons.Default.Search, contentDescription = &quot;Search&quot;, tint = Color.Gray) },&#10;                            modifier = Modifier.fillMaxWidth(),&#10;                            shape = RoundedCornerShape(50.dp),&#10;                            colors = OutlinedTextFieldDefaults.colors(&#10;                                focusedBorderColor = Color.Transparent,&#10;                                unfocusedBorderColor = Color.Transparent,&#10;                                focusedContainerColor = Color.White,&#10;                                unfocusedContainerColor = Color.White&#10;                            ),&#10;                            singleLine = true&#10;                        )&#10;                        Spacer(modifier = Modifier.height(16.dp))&#10;&#10;                        // Carousel: 3 cards&#10;                        val pagerState = rememberPagerState(pageCount = { 3 })&#10;                        Column {&#10;                            HorizontalPager(&#10;                                state = pagerState,&#10;                                modifier = Modifier.fillMaxWidth()&#10;                            ) { page -&gt;&#10;                                when (page) {&#10;                                    0 -&gt; ReminderCard(&#10;                                        title = &quot;Udah minum hari ini ?&quot;,&#10;                                        subtitle = &quot;Jangan lupa minum air 8 gelas perhari !&quot;,&#10;                                        backgroundColor = Color(0xFFA9BF93),&#10;                                        rightImages = listOf(R.drawable.botolpink, R.drawable.botolputih)&#10;                                    )&#10;                                    1 -&gt; ReminderCard(&#10;                                        title = &quot;Bagaimana perasaanmu sekarang ?&quot;,&#10;                                        subtitle = &quot;Jangan lupa istirahat yang cukup ya,\nkarena badan kamu juga butuh perhatian&quot;,&#10;                                        backgroundColor = Color(0xFFBFE3EB),&#10;                                        rightImages = listOf(R.drawable.jamdinding)&#10;                                    )&#10;                                    2 -&gt; ReminderCard(&#10;                                        title = &quot;Udah makan apa hari ini ?&quot;,&#10;                                        subtitle = &quot;Jaga pola makan,\nkurangin minyak dan makanan pedas&quot;,&#10;                                        backgroundColor = Color(0xFFE0C8A5),&#10;                                        rightImages = listOf(R.drawable.sarapan)&#10;                                    )&#10;                                }&#10;                            }&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            // Simple pager indicator&#10;                            Row(&#10;                                modifier = Modifier.fillMaxWidth(),&#10;                                horizontalArrangement = Arrangement.Center&#10;                            ) {&#10;                                repeat(3) { i -&gt;&#10;                                    val selected = i == pagerState.currentPage&#10;                                    Box(&#10;                                        modifier = Modifier&#10;                                            .size(if (selected) 10.dp else 8.dp)&#10;                                            .clip(CircleShape)&#10;                                            .background(if (selected) Color(0xFF738A45) else Color.LightGray)&#10;                                    )&#10;                                    Spacer(modifier = Modifier.width(6.dp))&#10;                                }&#10;                            }&#10;                        }&#10;                        // After carousel indicator insert Add Health Note toggle &amp; form&#10;                        var showHealthNoteForm by remember { mutableStateOf(false) }&#10;                        Spacer(modifier = Modifier.height(12.dp))&#10;                        // Toggle Card&#10;                        Card(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .height(52.dp)&#10;                                .clip(RoundedCornerShape(50.dp))&#10;                                .border(1.dp, Color(0xFF4F5F2E), RoundedCornerShape(50.dp))&#10;                                .clickable { showHealthNoteForm = !showHealthNoteForm },&#10;                            colors = CardDefaults.cardColors(containerColor = Color.White),&#10;                            elevation = CardDefaults.cardElevation(defaultElevation = 0.dp)&#10;                        ) {&#10;                            Row(&#10;                                modifier = Modifier&#10;                                    .fillMaxSize()&#10;                                    .padding(horizontal = 16.dp),&#10;                                verticalAlignment = Alignment.CenterVertically,&#10;                                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                            ) {&#10;                                Icon(Icons.Default.Folder, contentDescription = null, tint = Color(0xFF4F5F2E))&#10;                                Text(&#10;                                    text = &quot;Add your health note&quot;,&#10;                                    fontSize = 14.sp,&#10;                                    fontWeight = FontWeight.Medium,&#10;                                    color = Color(0xFF4F5F2E)&#10;                                )&#10;                            }&#10;                        }&#10;                        if (showHealthNoteForm) {&#10;                            Spacer(modifier = Modifier.height(8.dp))&#10;                            HealthNoteForm(&#10;                                onSave = { note -&gt;&#10;                                    // Validasi sederhana lalu trigger callback ke NavGraph untuk menandai tanggal hijau&#10;                                    val hasData = listOf(&#10;                                        note.beratBadan,&#10;                                        note.tinggiBadan,&#10;                                        note.tekananDarah,&#10;                                        note.gulaDarah,&#10;                                        note.aktivitas,&#10;                                        note.nutrisi&#10;                                    ).any { it.isNotBlank() }&#10;                                    if (!hasData) {&#10;                                        coroutineScope.launch { snackbarHostState.showSnackbar(&quot;Isi minimal satu field dulu&quot;) }&#10;                                        return@HealthNoteForm&#10;                                    }&#10;                                    onHealthNoteAdded()&#10;                                    showHealthNoteForm = false&#10;                                    coroutineScope.launch { snackbarHostState.showSnackbar(&quot;Catatan tersimpan&quot;) }&#10;                                }&#10;                            )&#10;                        }&#10;                    }&#10;                    // Health Metrics Grid as single item&#10;                    item {&#10;                        LazyVerticalGrid(&#10;                            columns = GridCells.Fixed(2),&#10;                            horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                            verticalArrangement = Arrangement.spacedBy(12.dp),&#10;                            modifier = Modifier.fillMaxWidth().height(400.dp)&#10;                        ) {&#10;                            items(healthMetrics) { metric -&gt;&#10;                                HealthMetricCard(metric)&#10;                            }&#10;                        }&#10;                    }&#10;                    // Insert Other Information Section&#10;                    item {&#10;                        OtherInformationSection()&#10;                        Spacer(modifier = Modifier.height(32.dp))&#10;                    }&#10;                    // Bottom spacer for nav bar overlap&#10;                    item { Spacer(modifier = Modifier.height(80.dp)) }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// ReminderCard composable used in carousel&#10;@Composable&#10;private fun ReminderCard(&#10;    title: String,&#10;    subtitle: String,&#10;    backgroundColor: Color,&#10;    rightImages: List&lt;Int&gt;&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(120.dp),&#10;        shape = RoundedCornerShape(24.dp),&#10;        colors = CardDefaults.cardColors(containerColor = backgroundColor)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically,&#10;            horizontalArrangement = Arrangement.SpaceBetween&#10;        ) {&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(4.dp)&#10;            ) {&#10;                Text(&#10;                    text = title,&#10;                    fontSize = 18.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.Black&#10;                )&#10;                Text(&#10;                    text = subtitle,&#10;                    fontSize = 12.sp,&#10;                    color = Color.Black.copy(alpha = 0.7f)&#10;                )&#10;            }&#10;            // Right images stacked/horizontal&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                rightImages.forEach { res -&gt;&#10;                    Image(&#10;                        painter = painterResource(id = res),&#10;                        contentDescription = null,&#10;                        modifier = Modifier.size(70.dp),&#10;                        contentScale = ContentScale.Crop&#10;                    )&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;// Data class for health metrics&#10;data class HealthMetric(&#10;    val value: String,&#10;    val unit: String,&#10;    val label: String = &quot;&quot;,&#10;    val backgroundColor: Color,&#10;    val icon: Int? = null&#10;)&#10;&#10;// Health metrics data&#10;val healthMetrics = listOf(&#10;    HealthMetric(&quot;160&quot;, &quot;cm&quot;, &quot;&quot;, Color(0xFF89C2FF), R.drawable.jerapah),&#10;    HealthMetric(&quot;120/80&quot;, &quot;&quot;, &quot;&quot;, Color(0xFF3F99F8), R.drawable.termometer),&#10;    HealthMetric(&quot;45&quot;, &quot;&quot;, &quot;&quot;, Color(0xFFFF8989), R.drawable.anaksenam),&#10;    HealthMetric(&quot;100&quot;, &quot;mg/dL&quot;, &quot;&quot;, Color(0xFF89FFD0), R.drawable.ukuran),&#10;    HealthMetric(&quot;180&quot;, &quot;kcal&quot;, &quot;&quot;, Color(0xFFC889FF), R.drawable.brokoli),&#10;    HealthMetric(&quot;70&quot;, &quot;kg&quot;, &quot;&quot;, Color(0xFFFF8989), R.drawable.timbangan)&#10;)&#10;&#10;@Composable&#10;fun HealthMetricCard(metric: HealthMetric) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .height(120.dp),&#10;        shape = RoundedCornerShape(16.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = metric.backgroundColor&#10;        )&#10;    ) {&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(12.dp)&#10;        ) {&#10;            Column(&#10;                modifier = Modifier.align(Alignment.TopStart)&#10;            ) {&#10;                Text(&#10;                    text = metric.value,&#10;                    fontSize = 32.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = Color.White&#10;                )&#10;                if (metric.unit.isNotEmpty()) {&#10;                    Text(&#10;                        text = metric.unit,&#10;                        fontSize = 14.sp,&#10;                        fontWeight = FontWeight.Medium,&#10;                        color = Color.White.copy(alpha = 0.9f)&#10;                    )&#10;                }&#10;            }&#10;&#10;            if (metric.icon != null) {&#10;                Image(&#10;                    painter = painterResource(id = metric.icon),&#10;                    contentDescription = null,&#10;                    modifier = Modifier&#10;                        .size(50.dp)&#10;                        .align(Alignment.BottomEnd)&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun BottomNavigationBar(&#10;    onProfileClick: () -&gt; Unit = {},&#10;    onCalendarClick: () -&gt; Unit = {}&#10;) {&#10;    NavigationBar(&#10;        containerColor = Color(0xFFF5F5F5),&#10;        tonalElevation = 8.dp&#10;    ) {&#10;        NavigationBarItem(&#10;            icon = {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .clip(CircleShape)&#10;                        .background(Color(0xFF738A45)),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        Icons.Default.Home,&#10;                        contentDescription = &quot;Home&quot;,&#10;                        tint = Color.White&#10;                    )&#10;                }&#10;            },&#10;            selected = true,&#10;            onClick = { }&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    Icons.Default.DateRange,&#10;                    contentDescription = &quot;Calendar&quot;,&#10;                    tint = Color.Gray&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onCalendarClick&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    Icons.Default.Person,&#10;                    contentDescription = &quot;Profile&quot;,&#10;                    tint = Color.Gray&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onProfileClick&#10;        )&#10;    }&#10;}&#10;&#10;// Data model for health note&#10;private data class HealthNote(&#10;    val beratBadan: String,&#10;    val tinggiBadan: String,&#10;    val tekananDarah: String,&#10;    val gulaDarah: String,&#10;    val aktivitas: String,&#10;    val nutrisi: String&#10;)&#10;&#10;@Composable&#10;private fun HealthNoteForm(onSave: (HealthNote) -&gt; Unit) {&#10;    // Field states&#10;    var berat by remember { mutableStateOf(&quot;&quot;) }&#10;    var tinggi by remember { mutableStateOf(&quot;&quot;) }&#10;    var tekanan by remember { mutableStateOf(&quot;&quot;) }&#10;    var gula by remember { mutableStateOf(&quot;&quot;) }&#10;    var aktivitas by remember { mutableStateOf(&quot;&quot;) }&#10;    var nutrisi by remember { mutableStateOf(&quot;&quot;) }&#10;    var isSaving by remember { mutableStateOf(false) }&#10;    var fieldErrors by remember { mutableStateOf&lt;List&lt;String&gt;&gt;(emptyList()) }&#10;&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(top = 4.dp)&#10;            .border(1.dp, Color(0xFF4F5F2E), RoundedCornerShape(24.dp)),&#10;        shape = RoundedCornerShape(24.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White)&#10;    ) {&#10;        Column(modifier = Modifier.padding(20.dp)) {&#10;            Text(&#10;                text = &quot;Health note&quot;,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color(0xFF4F5F2E)&#10;            )&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;            Row(modifier = Modifier.fillMaxWidth(), horizontalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                Column(modifier = Modifier.weight(1f), verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    LabeledInput(label = &quot;Berat Badan :&quot;, value = berat, placeholder = &quot;kg&quot;, onChange = { berat = it })&#10;                    LabeledInput(label = &quot;Tekanan Darah :&quot;, value = tekanan, placeholder = &quot;120/80&quot;, onChange = { tekanan = it })&#10;                    LabeledInput(label = &quot;Aktivitas :&quot;, value = aktivitas, placeholder = &quot;menit&quot;, onChange = { aktivitas = it })&#10;                }&#10;                Column(modifier = Modifier.weight(1f), verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    LabeledInput(label = &quot;Tinggi Badan :&quot;, value = tinggi, placeholder = &quot;cm&quot;, onChange = { tinggi = it })&#10;                    LabeledInput(label = &quot;Gula Darah :&quot;, value = gula, placeholder = &quot;mg/dL&quot;, onChange = { gula = it })&#10;                    LabeledInput(label = &quot;Nutrisi :&quot;, value = nutrisi, placeholder = &quot;makanan&quot;, onChange = { nutrisi = it })&#10;                }&#10;            }&#10;            Spacer(modifier = Modifier.height(20.dp))&#10;            Button(&#10;                onClick = {&#10;                    if (!isSaving) {&#10;                        isSaving = true&#10;                        fieldErrors = emptyList() // clear previous&#10;                        val note = HealthNote(berat, tinggi, tekanan, gula, aktivitas, nutrisi)&#10;                        onSave(note)&#10;                        isSaving = false&#10;                    }&#10;                },&#10;                modifier = Modifier&#10;                    .align(Alignment.CenterHorizontally)&#10;                    .height(38.dp),&#10;                shape = RoundedCornerShape(50.dp),&#10;                colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF738A45))&#10;            ) {&#10;                Text(&quot;Simpan Catatan&quot;, color = Color.White, fontSize = 14.sp, fontWeight = FontWeight.Medium)&#10;            }&#10;&#10;            // Error messages display&#10;            if (fieldErrors.isNotEmpty()) {&#10;                Spacer(modifier = Modifier.height(12.dp))&#10;                fieldErrors.forEach { err -&gt;&#10;                    Text(err, color = Color.Red, fontSize = 12.sp)&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun LabeledInput(label: String, value: String, placeholder: String, onChange: (String) -&gt; Unit) {&#10;    Column {&#10;        Text(label, fontSize = 12.sp, fontWeight = FontWeight.Medium, color = Color(0xFF4F5F2E))&#10;        Spacer(modifier = Modifier.height(4.dp))&#10;        OutlinedTextField(&#10;            value = value,&#10;            onValueChange = onChange,&#10;            placeholder = { Text(placeholder, color = Color(0xFF4F5F2E).copy(alpha = 0.5f)) },&#10;            singleLine = true,&#10;            shape = RoundedCornerShape(50.dp),&#10;            colors = OutlinedTextFieldDefaults.colors(&#10;                focusedBorderColor = Color.Transparent,&#10;                unfocusedBorderColor = Color.Transparent,&#10;                focusedContainerColor = Color(0xFFF3FCE9),&#10;                unfocusedContainerColor = Color(0xFFF3FCE9)&#10;            ),&#10;            modifier = Modifier.fillMaxWidth()&#10;        )&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/profile/EditProfileScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/profile/EditProfileScreen.kt" />
              <option name="originalContent" value="&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.profile&#10;&#10;import android.app.DatePickerDialog&#10;import androidx.compose.foundation.BorderStroke&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.grid.GridCells&#10;import androidx.compose.foundation.lazy.grid.LazyVerticalGrid&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.filled.CameraAlt&#10;import androidx.compose.material.icons.filled.CalendarToday&#10;import androidx.compose.material.icons.filled.Face&#10;import androidx.compose.material.icons.filled.KeyboardArrowDown&#10;import androidx.compose.material.icons.filled.KeyboardArrowUp&#10;import androidx.compose.material.icons.filled.Edit&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import java.util.Calendar&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun EditProfileScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    onSaved: () -&gt; Unit,&#10;    onNavigateToChangePin: () -&gt; Unit = {}&#10;) {&#10;    val context = LocalContext.current&#10;    val prefs = remember { com.example.lifin.data.local.EncryptedPreferences(context) }&#10;&#10;    var firstName by remember { mutableStateOf(prefs.getProfileFirstName()) }&#10;    var lastName by remember { mutableStateOf(prefs.getProfileLastName()) }&#10;    var dob by remember { mutableStateOf(prefs.getProfileDob() ?: &quot;&quot;) }&#10;    var gender by remember { mutableStateOf(prefs.getProfileGender()) }&#10;    var showGenderDropdown by remember { mutableStateOf(false) }&#10;    var showAvatarPicker by remember { mutableStateOf(false) }&#10;    var avatarIndex by remember { mutableStateOf(prefs.getProfileAvatarIndex()) }&#10;    val avatarColors = listOf(&#10;        Color(0xFFFFCDD2), // pink red (F)&#10;        Color(0xFFF8BBD0), // pink (F)&#10;        Color(0xFFBBDEFB), // blue (M)&#10;        Color(0xFFC8E6C9), // green (M)&#10;        Color(0xFFFFF9C4), // yellow (F)&#10;        Color(0xFFD1C4E9), // purple (F)&#10;        Color(0xFFFFE0B2), // orange (M)&#10;    )&#10;    val genderOptions = listOf(&quot;Laki-laki&quot;, &quot;Perempuan&quot;, &quot;Lainnya&quot;)&#10;&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    // Field color styling (step 5)&#10;    val fieldColors = TextFieldDefaults.colors(&#10;        focusedContainerColor = Color(0xFFE4F1D3),&#10;        unfocusedContainerColor = Color(0xFFE4F1D3),&#10;        disabledContainerColor = Color(0xFFE4F1D3),&#10;        focusedIndicatorColor = Color(0xFF738A45),&#10;        unfocusedIndicatorColor = Color(0xFF90A763),&#10;        disabledIndicatorColor = Color(0xFF90A763),&#10;        cursorColor = Color(0xFF738A45),&#10;        focusedLabelColor = Color(0xFF4E5F2E),&#10;        unfocusedLabelColor = Color(0xFF4E5F2E)&#10;    )&#10;&#10;    fun openDatePicker() {&#10;        val cal = Calendar.getInstance()&#10;        DatePickerDialog(context, { _, y, m, d -&gt;&#10;            val mm = (m + 1).toString().padStart(2, '0')&#10;            val dd = d.toString().padStart(2, '0')&#10;            dob = &quot;$y-$mm-$dd&quot;&#10;        }, cal.get(Calendar.YEAR), cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH)).show()&#10;    }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Profil Saya&quot;, fontSize = 18.sp, fontWeight = FontWeight.Bold) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = &quot;Back&quot;)&#10;                    }&#10;                },&#10;                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Transparent)&#10;            )&#10;        },&#10;        snackbarHost = { SnackbarHost(snackbarHostState) }&#10;    ) { padding -&gt;&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(padding)&#10;                .padding(24.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.spacedBy(20.dp)&#10;        ) {&#10;            // Avatar&#10;            Box(&#10;                modifier = Modifier.size(120.dp),&#10;                contentAlignment = Alignment.BottomCenter&#10;            ) {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(120.dp)&#10;                        .clip(CircleShape)&#10;                        .background(if (avatarIndex &gt;= 0) avatarColors[avatarIndex.coerceIn(0, avatarColors.lastIndex)] else Color(0xFFE0E0E0)),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    if (avatarIndex &gt;= 0) {&#10;                        Icon(Icons.Filled.Face, contentDescription = &quot;Avatar&quot;, tint = Color(0xFF37474F), modifier = Modifier.size(56.dp))&#10;                    } else {&#10;                        Icon(Icons.Default.CameraAlt, contentDescription = null, tint = Color.DarkGray, modifier = Modifier.size(48.dp))&#10;                    }&#10;                }&#10;                IconButton(&#10;                    onClick = { showAvatarPicker = true },&#10;                    modifier = Modifier&#10;                        .offset(y = 12.dp)&#10;                        .size(36.dp)&#10;                        .clip(CircleShape)&#10;                        .background(Color.White)&#10;                ) {&#10;                    Icon(Icons.Default.CameraAlt, contentDescription = &quot;Change Photo&quot;, tint = Color(0xFF738A45))&#10;                }&#10;            }&#10;&#10;            // Nama Depan &amp; Belakang (step 3 trailing edit icon)&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;            ) {&#10;                OutlinedTextField(&#10;                    value = firstName,&#10;                    onValueChange = { firstName = it.take(32) },&#10;                    label = { Text(&quot;Nama Depan&quot;) },&#10;                    trailingIcon = { Icon(Icons.Filled.Edit, contentDescription = &quot;Edit Nama Depan&quot;, tint = Color(0xFF738A45)) },&#10;                    singleLine = true,&#10;                    modifier = Modifier.weight(1f),&#10;                    shape = RoundedCornerShape(8.dp),&#10;                    colors = fieldColors&#10;                )&#10;                OutlinedTextField(&#10;                    value = lastName,&#10;                    onValueChange = { lastName = it.take(32) },&#10;                    label = { Text(&quot;Nama Belakang&quot;) },&#10;                    trailingIcon = { Icon(Icons.Filled.Edit, contentDescription = &quot;Edit Nama Belakang&quot;, tint = Color(0xFF738A45)) },&#10;                    singleLine = true,&#10;                    modifier = Modifier.weight(1f),&#10;                    shape = RoundedCornerShape(8.dp),&#10;                    colors = fieldColors&#10;                )&#10;            }&#10;&#10;            // Tanggal lahir&#10;            OutlinedTextField(&#10;                value = if (dob.isNotBlank()) dob else &quot;Tanggal Lahir&quot;,&#10;                onValueChange = {},&#10;                label = { Text(&quot;Tanggal Lahir&quot;) },&#10;                enabled = false,&#10;                trailingIcon = {&#10;                    IconButton(onClick = { openDatePicker() }) {&#10;                        Icon(Icons.Filled.CalendarToday, contentDescription = &quot;Pick Date&quot;, tint = Color(0xFF738A45))&#10;                    }&#10;                },&#10;                modifier = Modifier.fillMaxWidth(),&#10;                shape = RoundedCornerShape(8.dp),&#10;                colors = fieldColors&#10;            )&#10;&#10;            // Gender dropdown&#10;            Box(modifier = Modifier.fillMaxWidth()) {&#10;                OutlinedTextField(&#10;                    value = gender,&#10;                    onValueChange = {},&#10;                    label = { Text(&quot;Jenis Kelamin&quot;) },&#10;                    enabled = false,&#10;                    trailingIcon = {&#10;                        IconButton(onClick = { showGenderDropdown = !showGenderDropdown }) {&#10;                            Icon(&#10;                                if (showGenderDropdown) Icons.Default.KeyboardArrowUp else Icons.Default.KeyboardArrowDown,&#10;                                contentDescription = &quot;Toggle Gender&quot;,&#10;                                tint = Color(0xFF738A45)&#10;                            )&#10;                        }&#10;                    },&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    shape = RoundedCornerShape(8.dp),&#10;                    colors = fieldColors&#10;                )&#10;                DropdownMenu(expanded = showGenderDropdown, onDismissRequest = { showGenderDropdown = false }) {&#10;                    genderOptions.forEach { opt -&gt;&#10;                        DropdownMenuItem(&#10;                            text = { Text(opt) },&#10;                            onClick = { gender = opt; showGenderDropdown = false }&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;&#10;            // Tombol Ubah PIN&#10;            OutlinedButton(&#10;                onClick = { onNavigateToChangePin() },&#10;                modifier = Modifier.fillMaxWidth().height(48.dp),&#10;                shape = RoundedCornerShape(8.dp),&#10;                colors = ButtonDefaults.outlinedButtonColors(contentColor = Color(0xFF738A45)),&#10;                border = BorderStroke(1.dp, Color(0xFF738A45))&#10;            ) { Text(&quot;Ubah PIN&quot;, fontWeight = FontWeight.Medium) }&#10;&#10;            // Simpan (step 1 snackbar + step 4 simpan nama lengkap)&#10;            Button(&#10;                onClick = {&#10;                    prefs.setProfileFirstName(firstName)&#10;                    prefs.setProfileLastName(lastName)&#10;                    prefs.setProfileName(&quot;$firstName $lastName&quot;.trim())&#10;                    if (dob.isNotBlank()) prefs.setProfileDob(dob)&#10;                    prefs.setProfileGender(gender)&#10;                    // show snackbar using coroutine scope&#10;                    scope.launch {&#10;                        snackbarHostState.showSnackbar(&quot;Profil disimpan&quot;)&#10;                    }&#10;                    onSaved()&#10;                },&#10;                modifier = Modifier.fillMaxWidth().height(56.dp),&#10;                shape = RoundedCornerShape(12.dp),&#10;                colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF738A45))&#10;            ) {&#10;                Text(&quot;Simpan&quot;, color = Color.White, fontSize = 16.sp, fontWeight = FontWeight.Bold)&#10;            }&#10;&#10;            // Avatar picker dialog&#10;            if (showAvatarPicker) {&#10;                AvatarPickerGrid(&#10;                    colors = avatarColors,&#10;                    onPick = { idx -&gt;&#10;                        avatarIndex = idx&#10;                        prefs.setProfileAvatarIndex(idx)&#10;                        showAvatarPicker = false&#10;                    },&#10;                    onDismiss = { showAvatarPicker = false }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun AvatarPickerGrid(colors: List&lt;Color&gt;, onPick: (Int) -&gt; Unit, onDismiss: () -&gt; Unit) {&#10;    AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        confirmButton = {},&#10;        title = { Text(&quot;Pilih Avatar&quot;) },&#10;        text = {&#10;            Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                Text(&quot;Pilih salah satu karakter:&quot;)&#10;                LazyVerticalGrid(&#10;                    columns = GridCells.Fixed(3),&#10;                    modifier = Modifier.height(240.dp)&#10;                ) {&#10;                    items(colors.size) { idx -&gt;&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .padding(8.dp)&#10;                                .size(72.dp)&#10;                                .clip(CircleShape)&#10;                                .background(colors[idx])&#10;                                .clickable { onPick(idx) },&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            Icon(Icons.Filled.Face, contentDescription = &quot;Avatar $idx&quot;, tint = Color(0xFF37474F), modifier = Modifier.size(40.dp))&#10;                        }&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/profile/ProfileScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/profile/ProfileScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.profile&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.*&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.AuthRepository&#10;import com.example.lifin.data.repository.PinRepository&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ProfileScreen(&#10;    authRepository: AuthRepository,&#10;    pinRepository: PinRepository,&#10;    onNavigateBack: () -&gt; Unit = {},&#10;    onNavigateToHome: () -&gt; Unit = {},&#10;    onNavigateToCalendar: () -&gt; Unit = {},&#10;    onLogoutSuccess: () -&gt; Unit = {}&#10;) {&#10;    var notificationEnabled by remember { mutableStateOf(true) }&#10;    var showLogoutDialog by remember { mutableStateOf(false) }&#10;    var clearPinChecked by remember { mutableStateOf(false) }&#10;    var isLoggingOut by remember { mutableStateOf(false) }&#10;    val scope = rememberCoroutineScope()&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = {&#10;                    Text(&#10;                        &quot;My Profile&quot;,&#10;                        fontSize = 18.sp,&#10;                        fontWeight = FontWeight.Bold&#10;                    )&#10;                },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(&#10;                            Icons.Default.ArrowBack,&#10;                            contentDescription = &quot;Back&quot;,&#10;                            tint = Color.Black&#10;                        )&#10;                    }&#10;                },&#10;                actions = {&#10;                    IconButton(onClick = { /* Menu action */ }) {&#10;                        Icon(&#10;                            Icons.Default.Menu,&#10;                            contentDescription = &quot;Menu&quot;,&#10;                            tint = Color.Black&#10;                        )&#10;                    }&#10;                },&#10;                colors = TopAppBarDefaults.topAppBarColors(&#10;                    containerColor = Color.Transparent&#10;                )&#10;            )&#10;        },&#10;        bottomBar = {&#10;            ProfileBottomNavigationBar(&#10;                onHomeClick = onNavigateToHome,&#10;                onCalendarClick = onNavigateToCalendar,&#10;                onProfileClick = { /* Already on profile */ }&#10;            )&#10;        },&#10;        snackbarHost = { SnackbarHost(snackbarHostState) }&#10;    ) { paddingValues -&gt;&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(paddingValues)&#10;        ) {&#10;            // Background Image&#10;            Image(&#10;                painter = painterResource(id = R.drawable.bglanding),&#10;                contentDescription = &quot;Background&quot;,&#10;                contentScale = ContentScale.Crop,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(300.dp)&#10;                    .align(Alignment.TopCenter)&#10;            )&#10;&#10;            // Content&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .padding(horizontal = 20.dp),&#10;                horizontalAlignment = Alignment.CenterHorizontally&#10;            ) {&#10;                Spacer(modifier = Modifier.height(40.dp))&#10;&#10;                // Profile Picture&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(120.dp)&#10;                        .clip(CircleShape)&#10;                        .border(4.dp, Color.White, CircleShape)&#10;                        .background(Color.White)&#10;                ) {&#10;                    Image(&#10;                        painter = painterResource(id = R.drawable.anaksenam),&#10;                        contentDescription = &quot;Profile Picture&quot;,&#10;                        contentScale = ContentScale.Crop,&#10;                        modifier = Modifier.fillMaxSize()&#10;                    )&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                // Profile Info Card&#10;                Card(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .wrapContentHeight(),&#10;                    shape = RoundedCornerShape(20.dp),&#10;                    colors = CardDefaults.cardColors(&#10;                        containerColor = Color(0xFFEDFFC9).copy(alpha = 0.9f)&#10;                    ),&#10;                    elevation = CardDefaults.cardElevation(defaultElevation = 4.dp)&#10;                ) {&#10;                    Column(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .padding(20.dp),&#10;                        verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                    ) {&#10;                        ProfileInfoRow(&quot;Nama&quot;, &quot;Zahra Aulia Ananta&quot;)&#10;                        ProfileInfoRow(&quot;Usia&quot;, &quot;19 Tahun&quot;)&#10;                        ProfileInfoRow(&quot;Tanggal Lahir&quot;, &quot;28 Agustus 2006&quot;)&#10;                    }&#10;                }&#10;&#10;                Spacer(modifier = Modifier.height(24.dp))&#10;&#10;                // Menu Items&#10;                Column(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    verticalArrangement = Arrangement.spacedBy(12.dp)&#10;                ) {&#10;                    // Edit Profile&#10;                    ProfileMenuItem(&#10;                        icon = Icons.Default.Person,&#10;                        iconColor = Color(0xFF738A45),&#10;                        text = &quot;Edit Profile&quot;,&#10;                        onClick = { /* Navigate to edit profile */ }&#10;                    )&#10;&#10;                    // Notifikasi with Switch&#10;                    Card(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        shape = RoundedCornerShape(12.dp),&#10;                        colors = CardDefaults.cardColors(&#10;                            containerColor = Color.White&#10;                        ),&#10;                        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;                    ) {&#10;                        Row(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(16.dp),&#10;                            horizontalArrangement = Arrangement.SpaceBetween,&#10;                            verticalAlignment = Alignment.CenterVertically&#10;                        ) {&#10;                            Row(&#10;                                verticalAlignment = Alignment.CenterVertically,&#10;                                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;                            ) {&#10;                                Icon(&#10;                                    Icons.Default.Notifications,&#10;                                    contentDescription = &quot;Notifikasi&quot;,&#10;                                    tint = Color(0xFF738A45),&#10;                                    modifier = Modifier.size(24.dp)&#10;                                )&#10;                                Text(&#10;                                    &quot;Notifikasi&quot;,&#10;                                    fontSize = 16.sp,&#10;                                    color = Color.Black&#10;                                )&#10;                            }&#10;&#10;                            Switch(&#10;                                checked = notificationEnabled,&#10;                                onCheckedChange = { notificationEnabled = it },&#10;                                colors = SwitchDefaults.colors(&#10;                                    checkedThumbColor = Color.White,&#10;                                    checkedTrackColor = Color(0xFF738A45),&#10;                                    uncheckedThumbColor = Color.White,&#10;                                    uncheckedTrackColor = Color.Gray&#10;                                )&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Ubah Password&#10;                    ProfileMenuItem(&#10;                        icon = Icons.Default.Lock,&#10;                        iconColor = Color(0xFF738A45),&#10;                        text = &quot;Ubah Password&quot;,&#10;                        onClick = { /* Navigate to change password */ }&#10;                    )&#10;&#10;                    // Logout (new)&#10;                    ProfileMenuItem(&#10;                        icon = Icons.Default.Logout,&#10;                        iconColor = Color(0xFFD32F2F),&#10;                        text = if (isLoggingOut) &quot;Processing...&quot; else &quot;Logout&quot;,&#10;                        onClick = { if (!isLoggingOut) showLogoutDialog = true }&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Loading overlay&#10;        if (isLoggingOut) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .fillMaxSize()&#10;                    .background(Color.Black.copy(alpha = 0.3f)),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;                    CircularProgressIndicator(color = Color(0xFF738A45))&#10;                    Spacer(Modifier.height(12.dp))&#10;                    Text(&quot;Logout...&quot;, color = Color.White)&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Confirmation Dialog&#10;    if (showLogoutDialog) {&#10;        AlertDialog(&#10;            onDismissRequest = { if (!isLoggingOut) showLogoutDialog = false },&#10;            title = { Text(&quot;Konfirmasi Logout&quot;) },&#10;            text = {&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    Text(&quot;Anda yakin ingin logout?&quot;)&#10;                    Row(verticalAlignment = Alignment.CenterVertically) {&#10;                        Checkbox(&#10;                            checked = clearPinChecked,&#10;                            onCheckedChange = { clearPinChecked = it }&#10;                        )&#10;                        Text(&quot;Hapus PIN dari perangkat&quot;)&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        isLoggingOut = true&#10;                        scope.launch {&#10;                            val result = authRepository.logout()&#10;                            if (clearPinChecked) {&#10;                                pinRepository.clearPin()&#10;                            }&#10;                            isLoggingOut = false&#10;                            showLogoutDialog = false&#10;                            if (result.isSuccess) {&#10;                                snackbarHostState.showSnackbar(&quot;Logout berhasil&quot;)&#10;                                onLogoutSuccess()&#10;                            } else {&#10;                                snackbarHostState.showSnackbar(&#10;                                    &quot;Logout gagal: ${result.exceptionOrNull()?.message ?: &quot;Unknown&quot;}&quot;&#10;                                )&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;Logout&quot;, color = Color(0xFFD32F2F), fontWeight = FontWeight.Bold)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = { if (!isLoggingOut) showLogoutDialog = false }) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProfileInfoRow(label: String, value: String) {&#10;    Row(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            color = Color.Black,&#10;            fontWeight = FontWeight.Normal&#10;        )&#10;        Text(&#10;            text = value,&#10;            fontSize = 14.sp,&#10;            color = Color.Black,&#10;            fontWeight = FontWeight.Medium&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProfileMenuItem(&#10;    icon: androidx.compose.ui.graphics.vector.ImageVector,&#10;    iconColor: Color,&#10;    text: String,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Card(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onClick),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(&#10;            containerColor = Color.White&#10;        ),&#10;        elevation = CardDefaults.cardElevation(defaultElevation = 2.dp)&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Row(&#10;                verticalAlignment = Alignment.CenterVertically,&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp)&#10;            ) {&#10;                Icon(&#10;                    icon,&#10;                    contentDescription = text,&#10;                    tint = iconColor,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;                Text(&#10;                    text,&#10;                    fontSize = 16.sp,&#10;                    color = Color.Black&#10;                )&#10;            }&#10;&#10;            Icon(&#10;                Icons.Default.KeyboardArrowRight,&#10;                contentDescription = &quot;Navigate&quot;,&#10;                tint = Color.Gray&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProfileBottomNavigationBar(&#10;    onHomeClick: () -&gt; Unit,&#10;    onCalendarClick: () -&gt; Unit,&#10;    onProfileClick: () -&gt; Unit&#10;) {&#10;    NavigationBar(&#10;        containerColor = Color(0xFFF5F5F5),&#10;        tonalElevation = 8.dp&#10;    ) {&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    painter = painterResource(id = R.drawable.ic_launcher_foreground),&#10;                    contentDescription = &quot;Home&quot;,&#10;                    tint = Color.Gray,&#10;                    modifier = Modifier.size(32.dp)&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onHomeClick&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Icon(&#10;                    Icons.Default.DateRange,&#10;                    contentDescription = &quot;Calendar&quot;,&#10;                    tint = Color.Gray&#10;                )&#10;            },&#10;            selected = false,&#10;            onClick = onCalendarClick&#10;        )&#10;        NavigationBarItem(&#10;            icon = {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .size(48.dp)&#10;                        .clip(CircleShape)&#10;                        .background(Color(0xFF738A45)),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Icon(&#10;                        Icons.Default.Person,&#10;                        contentDescription = &quot;Profile&quot;,&#10;                        tint = Color.White&#10;                    )&#10;                }&#10;            },&#10;            selected = true,&#10;            onClick = onProfileClick&#10;        )&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.profile&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material.icons.automirrored.filled.KeyboardArrowRight&#10;import androidx.compose.material.icons.filled.CameraAlt&#10;import androidx.compose.material.icons.filled.Face&#10;import androidx.compose.material.icons.filled.Lock&#10;import androidx.compose.material.icons.filled.Logout&#10;import androidx.compose.material.icons.filled.Menu&#10;import androidx.compose.material.icons.filled.Notifications&#10;import androidx.compose.material.icons.filled.Person&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.AuthRepository&#10;import com.example.lifin.data.repository.PinRepository&#10;import com.example.lifin.ui.components.AppBottomNavBar&#10;import com.example.lifin.ui.components.BottomNavItem&#10;import kotlinx.coroutines.launch&#10;&#10;fun calculateAgeLabel(dateIso: String): String {&#10;    val parts = dateIso.split(&quot;-&quot;)&#10;    if (parts.size &lt; 3) return &quot;-&quot;&#10;    return try {&#10;        val (y, m, d) = parts&#10;        val now = java.time.LocalDate.now()&#10;        var age = now.year - y.toInt()&#10;        if (now.monthValue &lt; m.toInt() || (now.monthValue == m.toInt() &amp;&amp; now.dayOfMonth &lt; d.toInt())) age--&#10;        &quot;$age Tahun&quot;&#10;    } catch (_: Exception) { &quot;-&quot; }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ProfileScreen(&#10;    authRepository: AuthRepository,&#10;    pinRepository: PinRepository,&#10;    onNavigateBack: () -&gt; Unit = {},&#10;    onNavigateToHome: () -&gt; Unit = {},&#10;    onNavigateToCalendar: () -&gt; Unit = {},&#10;    onLogoutSuccess: () -&gt; Unit = {},&#10;    onNavigateToChangePassword: () -&gt; Unit = {},&#10;    onNavigateToEditProfile: () -&gt; Unit = {}&#10;) {&#10;    // State&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;    val prefs = remember { com.example.lifin.data.local.EncryptedPreferences(context) }&#10;    var notificationEnabled by remember { mutableStateOf(true) }&#10;    var notifHour by remember { mutableStateOf(prefs.getNotificationHour()) }&#10;    var notifMinute by remember { mutableStateOf(prefs.getNotificationMinute()) }&#10;    var showLogout by remember { mutableStateOf(false) }&#10;    var clearPin by remember { mutableStateOf(false) }&#10;    var loggingOut by remember { mutableStateOf(false) }&#10;    val scope = rememberCoroutineScope()&#10;    val snackbarHost = remember { SnackbarHostState() }&#10;&#10;    // Profile data&#10;    val firstName = prefs.getProfileFirstName()&#10;    val lastName = prefs.getProfileLastName()&#10;    val dob = prefs.getProfileDob()&#10;    val ageLabel = dob?.let { calculateAgeLabel(it) } ?: &quot;-&quot;&#10;    val avatarIndex = prefs.getProfileAvatarIndex()&#10;    val avatarColors = listOf(&#10;        Color(0xFFFFCDD2), Color(0xFFF8BBD0), Color(0xFFBBDEFB), Color(0xFFC8E6C9),&#10;        Color(0xFFFFF9C4), Color(0xFFD1C4E9), Color(0xFFFFE0B2)&#10;    )&#10;&#10;    LaunchedEffect(Unit) { notificationEnabled = prefs.isNotificationEnabled() }&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;My Profile&quot;, fontSize = 18.sp, fontWeight = FontWeight.Bold) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = &quot;Back&quot;)&#10;                    }&#10;                },&#10;                actions = {&#10;                    IconButton(onClick = { /* future menu */ }) {&#10;                        Icon(Icons.Filled.Menu, contentDescription = &quot;Menu&quot;)&#10;                    }&#10;                },&#10;                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Transparent)&#10;            )&#10;        },&#10;        bottomBar = {&#10;            AppBottomNavBar(&#10;                selected = BottomNavItem.Profile,&#10;                onHome = onNavigateToHome,&#10;                onCalendar = onNavigateToCalendar,&#10;                onProfile = {}&#10;            )&#10;        },&#10;        snackbarHost = { SnackbarHost(snackbarHost) }&#10;    ) { padding -&gt;&#10;        Box(Modifier.fillMaxSize().padding(padding)) {&#10;            Image(&#10;                painter = painterResource(R.drawable.bglanding),&#10;                contentDescription = null,&#10;                contentScale = ContentScale.Crop,&#10;                modifier = Modifier.fillMaxWidth().height(280.dp).align(Alignment.TopCenter)&#10;            )&#10;            Column(&#10;                modifier = Modifier.fillMaxSize().padding(horizontal = 20.dp),&#10;                horizontalAlignment = Alignment.CenterHorizontally&#10;            ) {&#10;                Spacer(Modifier.height(40.dp))&#10;                // Avatar&#10;                Box(&#10;                    modifier = Modifier.size(120.dp)&#10;                        .clip(CircleShape)&#10;                        .border(4.dp, Color.White, CircleShape)&#10;                        .background(if (avatarIndex &gt;= 0) avatarColors[avatarIndex.coerceIn(0, avatarColors.lastIndex)] else Color.White),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    if (avatarIndex &gt;= 0) {&#10;                        Icon(Icons.Filled.Face, contentDescription = null, tint = Color(0xFF37474F), modifier = Modifier.size(64.dp))&#10;                    } else {&#10;                        Icon(Icons.Filled.CameraAlt, contentDescription = null, tint = Color(0xFF738A45), modifier = Modifier.size(48.dp))&#10;                    }&#10;                }&#10;                Spacer(Modifier.height(24.dp))&#10;                // Info Card&#10;                Card(&#10;                    modifier = Modifier.fillMaxWidth(),&#10;                    shape = RoundedCornerShape(20.dp),&#10;                    colors = CardDefaults.cardColors(containerColor = Color(0xFFEDFFC9).copy(alpha = 0.9f)),&#10;                    elevation = CardDefaults.cardElevation(4.dp)&#10;                ) {&#10;                    Column(Modifier.fillMaxWidth().padding(20.dp), verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                        ProfileInfoRow(&quot;Nama&quot;, (&quot;$firstName $lastName&quot;).trim().ifBlank { &quot;Nama Anda&quot; })&#10;                        ProfileInfoRow(&quot;Usia&quot;, ageLabel)&#10;                        ProfileInfoRow(&quot;Tanggal Lahir&quot;, dob ?: &quot;-&quot;)&#10;                    }&#10;                }&#10;                Spacer(Modifier.height(24.dp))&#10;                // Menu Section&#10;                Column(Modifier.fillMaxWidth(), verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    ProfileMenuItem(Icons.Filled.Person, Color(0xFF738A45), &quot;Edit Profil&quot;) { onNavigateToEditProfile() }&#10;                    NotificationSettingsCard(&#10;                        enabled = notificationEnabled,&#10;                        hour = notifHour,&#10;                        minute = notifMinute,&#10;                        onToggle = { checked -&gt;&#10;                            notificationEnabled = checked&#10;                            prefs.setNotificationEnabled(checked)&#10;                            if (checked) {&#10;                                scheduleDailyNotification(context, notifHour, notifMinute, scope, snackbarHost)&#10;                            } else {&#10;                                com.example.lifin.notification.NotificationHelper.cancelDaily(context)&#10;                                scope.launch { snackbarHost.showSnackbar(&quot;Daily notifications disabled&quot;) }&#10;                            }&#10;                        },&#10;                        onPickTime = { h, m -&gt;&#10;                            notifHour = h&#10;                            notifMinute = m&#10;                            prefs.setNotificationTime(h, m)&#10;                            if (notificationEnabled) scheduleDailyNotification(context, h, m, scope, snackbarHost)&#10;                        }&#10;                    )&#10;                    ProfileMenuItem(Icons.Filled.Lock, Color(0xFF738A45), &quot;Ubah Password&quot;) { onNavigateToChangePassword() }&#10;                    ProfileMenuItem(Icons.Filled.Logout, Color(0xFFD32F2F), if (loggingOut) &quot;Memproses...&quot; else &quot;Keluar&quot;) {&#10;                        if (!loggingOut) showLogout = true&#10;                    }&#10;                }&#10;            }&#10;            if (loggingOut) LoadingOverlay()&#10;        }&#10;    }&#10;    if (showLogout) LogoutDialog(&#10;        clearPin = clearPin,&#10;        onClearPinChange = { clearPin = it },&#10;        isProcessing = loggingOut,&#10;        onDismiss = { if (!loggingOut) showLogout = false },&#10;        onConfirm = {&#10;            loggingOut = true&#10;            val scope2 = scope&#10;            scope2.launch {&#10;                val result = authRepository.logout()&#10;                if (clearPin) pinRepository.clearPin()&#10;                loggingOut = false&#10;                showLogout = false&#10;                if (result.isSuccess) {&#10;                    snackbarHost.showSnackbar(&quot;Logout berhasil&quot;)&#10;                    onLogoutSuccess()&#10;                } else {&#10;                    snackbarHost.showSnackbar(&quot;Logout gagal: ${result.exceptionOrNull()?.message ?: &quot;Unknown&quot;}&quot;)&#10;                }&#10;            }&#10;        }&#10;    )&#10;}&#10;&#10;@Composable&#10;private fun NotificationSettingsCard(&#10;    enabled: Boolean,&#10;    hour: Int,&#10;    minute: Int,&#10;    onToggle: (Boolean) -&gt; Unit,&#10;    onPickTime: (Int, Int) -&gt; Unit&#10;) {&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;    val scope = rememberCoroutineScope()&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth(),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White),&#10;        elevation = CardDefaults.cardElevation(2.dp)&#10;    ) {&#10;        Row(&#10;            Modifier.fillMaxWidth().padding(16.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Column(verticalArrangement = Arrangement.spacedBy(4.dp)) {&#10;                Row(verticalAlignment = Alignment.CenterVertically, horizontalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    Icon(Icons.Filled.Notifications, contentDescription = null, tint = Color(0xFF738A45))&#10;                    Text(&quot;Notifikasi&quot;, fontSize = 16.sp)&#10;                }&#10;                Text(&quot;${String.format(&quot;%02d&quot;, hour)}:${String.format(&quot;%02d&quot;, minute)}&quot;, fontSize = 12.sp, color = Color.Gray)&#10;                TextButton(onClick = {&#10;                    val picker = android.app.TimePickerDialog(&#10;                        context,&#10;                        { _, h, m -&gt; onPickTime(h, m) },&#10;                        hour,&#10;                        minute,&#10;                        true&#10;                    )&#10;                    picker.show()&#10;                }) { Text(&quot;Pilih Waktu&quot;) }&#10;            }&#10;            Switch(&#10;                checked = enabled,&#10;                onCheckedChange = onToggle,&#10;                colors = SwitchDefaults.colors(&#10;                    checkedThumbColor = Color.White,&#10;                    checkedTrackColor = Color(0xFF738A45),&#10;                    uncheckedThumbColor = Color.White,&#10;                    uncheckedTrackColor = Color.Gray&#10;                )&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;private fun scheduleDailyNotification(&#10;    context: android.content.Context,&#10;    hour: Int,&#10;    minute: Int,&#10;    scope: kotlinx.coroutines.CoroutineScope,&#10;    host: SnackbarHostState&#10;) {&#10;    com.example.lifin.notification.NotificationHelper.scheduleDaily(context, hour, minute)&#10;    scope.launch { host.showSnackbar(&quot;Daily notifications enabled&quot;) }&#10;}&#10;&#10;@Composable&#10;private fun LoadingOverlay() {&#10;    Box(&#10;        Modifier.fillMaxSize().background(Color.Black.copy(alpha = 0.3f)),&#10;        contentAlignment = Alignment.Center&#10;    ) {&#10;        Column(horizontalAlignment = Alignment.CenterHorizontally) {&#10;            CircularProgressIndicator(color = Color(0xFF738A45))&#10;            Spacer(Modifier.height(12.dp))&#10;            Text(&quot;Logout...&quot;, color = Color.White)&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun LogoutDialog(&#10;    clearPin: Boolean,&#10;    onClearPinChange: (Boolean) -&gt; Unit,&#10;    isProcessing: Boolean,&#10;    onDismiss: () -&gt; Unit,&#10;    onConfirm: () -&gt; Unit&#10;) {&#10;    if (!isProcessing) {&#10;        AlertDialog(&#10;            onDismissRequest = onDismiss,&#10;            title = { Text(&quot;Konfirmasi Logout&quot;) },&#10;            text = {&#10;                Column(verticalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                    Text(&quot;Anda yakin ingin logout?&quot;)&#10;                    Row(verticalAlignment = Alignment.CenterVertically) {&#10;                        Checkbox(checked = clearPin, onCheckedChange = onClearPinChange)&#10;                        Text(&quot;Hapus PIN dari perangkat&quot;)&#10;                    }&#10;                }&#10;            },&#10;            confirmButton = {&#10;                TextButton(onClick = onConfirm) { Text(&quot;Keluar&quot;, color = Color(0xFFD32F2F), fontWeight = FontWeight.Bold) }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) { Text(&quot;Batal&quot;) }&#10;            }&#10;        )&#10;    } else {&#10;        // Show simple blocking indicator (optional)&#10;        AlertDialog(&#10;            onDismissRequest = {},&#10;            title = { Text(&quot;Keluar&quot;) },&#10;            text = { Row(verticalAlignment = Alignment.CenterVertically) { CircularProgressIndicator(); Spacer(Modifier.width(16.dp)); Text(&quot;Memproses...&quot;) } },&#10;            confirmButton = {},&#10;            dismissButton = {}&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProfileInfoRow(label: String, value: String) {&#10;    Row(&#10;        Modifier.fillMaxWidth(),&#10;        horizontalArrangement = Arrangement.SpaceBetween,&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Text(label, fontSize = 14.sp)&#10;        Text(value, fontSize = 14.sp, fontWeight = FontWeight.Medium)&#10;    }&#10;}&#10;&#10;@Composable&#10;fun ProfileMenuItem(icon: androidx.compose.ui.graphics.vector.ImageVector, iconColor: Color, text: String, onClick: () -&gt; Unit) {&#10;    Card(&#10;        modifier = Modifier.fillMaxWidth().clickable(onClick = onClick),&#10;        shape = RoundedCornerShape(12.dp),&#10;        colors = CardDefaults.cardColors(containerColor = Color.White),&#10;        elevation = CardDefaults.cardElevation(2.dp)&#10;    ) {&#10;        Row(&#10;            Modifier.fillMaxWidth().padding(16.dp),&#10;            horizontalArrangement = Arrangement.SpaceBetween,&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Row(verticalAlignment = Alignment.CenterVertically, horizontalArrangement = Arrangement.spacedBy(12.dp)) {&#10;                Icon(icon, contentDescription = text, tint = iconColor, modifier = Modifier.size(24.dp))&#10;                Text(text, fontSize = 16.sp)&#10;            }&#10;            Icon(Icons.AutoMirrored.Filled.KeyboardArrowRight, contentDescription = null, tint = Color.Gray)&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/ChangePasswordScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/ChangePasswordScreen.kt" />
              <option name="originalContent" value="&#10;&#10;&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.security&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.automirrored.filled.ArrowBack&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import kotlinx.coroutines.launch&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun ChangePasswordScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    onPasswordChanged: () -&gt; Unit&#10;) {&#10;    var currentPassword by remember { mutableStateOf(&quot;&quot;) }&#10;    var newPassword by remember { mutableStateOf(&quot;&quot;) }&#10;    var confirmPassword by remember { mutableStateOf(&quot;&quot;) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var isSubmitting by remember { mutableStateOf(false) }&#10;    val snackbarHostState = remember { SnackbarHostState() }&#10;    val scope = rememberCoroutineScope()&#10;    val context = androidx.compose.ui.platform.LocalContext.current&#10;&#10;    Scaffold(&#10;        topBar = {&#10;            TopAppBar(&#10;                title = { Text(&quot;Change Password&quot;, fontSize = 18.sp, fontWeight = FontWeight.Bold) },&#10;                navigationIcon = {&#10;                    IconButton(onClick = onNavigateBack) {&#10;                        Icon(Icons.AutoMirrored.Filled.ArrowBack, contentDescription = &quot;Back&quot;)&#10;                    }&#10;                },&#10;                colors = TopAppBarDefaults.topAppBarColors(containerColor = Color.Transparent)&#10;            )&#10;        },&#10;        snackbarHost = { SnackbarHost(snackbarHostState) }&#10;    ) { padding -&gt;&#10;        Box(modifier = Modifier.fillMaxSize().padding(padding)) {&#10;            // Background&#10;            Image(&#10;                painter = painterResource(id = R.drawable.bgawal),&#10;                contentDescription = null,&#10;                contentScale = ContentScale.Crop,&#10;                modifier = Modifier.fillMaxSize(),&#10;                alpha = 0.5f&#10;            )&#10;&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(24.dp)&#10;                    .align(Alignment.Center),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(containerColor = Color(0xFFF5F5F5).copy(alpha = 0.95f)),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier.padding(24.dp),&#10;                    verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                ) {&#10;                    PasswordField(&#10;                        label = &quot;Current Password&quot;,&#10;                        value = currentPassword,&#10;                        onChange = { currentPassword = it }&#10;                    )&#10;                    PasswordField(&#10;                        label = &quot;New Password&quot;,&#10;                        value = newPassword,&#10;                        onChange = { newPassword = it }&#10;                    )&#10;                    PasswordField(&#10;                        label = &quot;Confirm Password&quot;,&#10;                        value = confirmPassword,&#10;                        onChange = { confirmPassword = it }&#10;                    )&#10;&#10;                    if (errorMessage != null) {&#10;                        Text(errorMessage!!, color = Color.Red, fontSize = 12.sp)&#10;                    }&#10;&#10;                    Button(&#10;                        onClick = {&#10;                            if (isSubmitting) return@Button&#10;                            isSubmitting = true&#10;                            errorMessage = null&#10;                            when {&#10;                                currentPassword.isBlank() || newPassword.isBlank() || confirmPassword.isBlank() -&gt; {&#10;                                    errorMessage = &quot;All fields are required&quot;&#10;                                }&#10;                                newPassword.length &lt; 6 -&gt; {&#10;                                    errorMessage = &quot;New password must be at least 6 characters&quot;&#10;                                }&#10;                                newPassword != confirmPassword -&gt; {&#10;                                    errorMessage = &quot;Password confirmation does not match&quot;&#10;                                }&#10;                                else -&gt; {&#10;                                    // Integrasi stub AuthRepository&#10;                                    val result = com.example.lifin.data.repository.AuthRepository(context).changePassword(currentPassword, newPassword)&#10;                                    if (result.isSuccess) {&#10;                                        scope.launch { snackbarHostState.showSnackbar(&quot;Password changed successfully&quot;) }&#10;                                        onPasswordChanged()&#10;                                    } else {&#10;                                        errorMessage = result.exceptionOrNull()?.message ?: &quot;Failed to change password&quot;&#10;                                    }&#10;                                }&#10;                            }&#10;                            if (errorMessage != null) {&#10;                                scope.launch { snackbarHostState.showSnackbar(errorMessage!!) }&#10;                            }&#10;                            isSubmitting = false&#10;                        },&#10;                        modifier = Modifier.fillMaxWidth().height(48.dp),&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        colors = ButtonDefaults.buttonColors(containerColor = Color(0xFF738A45))&#10;                    ) {&#10;                        Text(&quot;Save&quot;, color = Color.White, fontWeight = FontWeight.Bold)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PasswordField(label: String, value: String, onChange: (String) -&gt; Unit) {&#10;    Column(verticalArrangement = Arrangement.spacedBy(8.dp)) {&#10;        Text(label, fontSize = 12.sp, fontWeight = FontWeight.Medium)&#10;        OutlinedTextField(&#10;            value = value,&#10;            onValueChange = onChange,&#10;            visualTransformation = PasswordVisualTransformation(),&#10;            singleLine = true,&#10;            keyboardOptions = KeyboardOptions(&#10;                keyboardType = KeyboardType.Password,&#10;                imeAction = ImeAction.Next&#10;            ),&#10;            shape = RoundedCornerShape(8.dp),&#10;            colors = OutlinedTextFieldDefaults.colors(&#10;                focusedBorderColor = Color(0xFF738A45),&#10;                unfocusedBorderColor = Color(0xFFB7B4B4),&#10;                focusedContainerColor = Color.White,&#10;                unfocusedContainerColor = Color.White&#10;            ),&#10;            modifier = Modifier.fillMaxWidth()&#10;        )&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/PinEntryScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/PinEntryScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.security&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.Backspace&#10;import androidx.compose.material.icons.filled.Fingerprint&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;&#10;@Composable&#10;fun PinEntryScreen(&#10;    title: String = &quot;Masukkan PIN&quot;,&#10;    subtitle: String = &quot;Masukkan 4-6 digit PIN Anda&quot;,&#10;    pinLength: Int = 4,&#10;    onPinComplete: (String) -&gt; Unit,&#10;    onBiometricClick: (() -&gt; Unit)? = null,&#10;    showBiometric: Boolean = false,&#10;    isError: Boolean = false&#10;) {&#10;    var pin by remember { mutableStateOf(&quot;&quot;) }&#10;    var showError by remember { mutableStateOf(false) }&#10;&#10;    LaunchedEffect(isError) {&#10;        if (isError) {&#10;            showError = true&#10;            kotlinx.coroutines.delay(500)&#10;            pin = &quot;&quot;&#10;            showError = false&#10;        }&#10;    }&#10;&#10;    Box(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(Color(0xFF1E1E1E)),&#10;        contentAlignment = Alignment.Center&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(24.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally,&#10;            verticalArrangement = Arrangement.spacedBy(24.dp)&#10;        ) {&#10;            // Title&#10;            Text(&#10;                text = title,&#10;                fontSize = 24.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color.White&#10;            )&#10;&#10;            Text(&#10;                text = subtitle,&#10;                fontSize = 14.sp,&#10;                color = Color(0xFFB0B0B0)&#10;            )&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // PIN Dots&#10;            Row(&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                modifier = Modifier.padding(vertical = 32.dp)&#10;            ) {&#10;                repeat(pinLength) { index -&gt;&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .size(16.dp)&#10;                            .clip(CircleShape)&#10;                            .background(&#10;                                if (index &lt; pin.length) {&#10;                                    if (showError) Color(0xFFCF6679)&#10;                                    else Color(0xFF4CAF50)&#10;                                } else Color(0xFF3D3D3D)&#10;                            )&#10;                            .border(&#10;                                width = 2.dp,&#10;                                color = if (showError) Color(0xFFCF6679)&#10;                                       else if (index &lt; pin.length) Color(0xFF4CAF50)&#10;                                       else Color(0xFF3D3D3D),&#10;                                shape = CircleShape&#10;                            )&#10;                    )&#10;                }&#10;            }&#10;&#10;            // Error Message&#10;            if (showError) {&#10;                Text(&#10;                    text = &quot; PIN salah, coba lagi&quot;,&#10;                    color = Color(0xFFCF6679),&#10;                    fontSize = 14.sp&#10;                )&#10;            } else {&#10;                Spacer(modifier = Modifier.height(28.dp))&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // Number Pad&#10;            Column(&#10;                verticalArrangement = Arrangement.spacedBy(16.dp)&#10;            ) {&#10;                // Row 1: 1 2 3&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(16.dp, Alignment.CenterHorizontally),&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    NumberButton(&quot;1&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;1&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                    NumberButton(&quot;2&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;2&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                    NumberButton(&quot;3&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;3&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                }&#10;&#10;                // Row 2: 4 5 6&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(16.dp, Alignment.CenterHorizontally),&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    NumberButton(&quot;4&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;4&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                    NumberButton(&quot;5&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;5&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                    NumberButton(&quot;6&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;6&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                }&#10;&#10;                // Row 3: 7 8 9&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(16.dp, Alignment.CenterHorizontally),&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    NumberButton(&quot;7&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;7&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                    NumberButton(&quot;8&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;8&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                    NumberButton(&quot;9&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;9&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;                }&#10;&#10;                // Row 4: Biometric 0 Backspace&#10;                Row(&#10;                    horizontalArrangement = Arrangement.spacedBy(16.dp, Alignment.CenterHorizontally),&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    // Biometric or Empty&#10;                    if (showBiometric &amp;&amp; onBiometricClick != null) {&#10;                        IconButton(&#10;                            onClick = onBiometricClick,&#10;                            modifier = Modifier.size(72.dp)&#10;                        ) {&#10;                            Icon(&#10;                                Icons.Default.Fingerprint,&#10;                                contentDescription = &quot;Biometric&quot;,&#10;                                tint = Color(0xFF4CAF50),&#10;                                modifier = Modifier.size(32.dp)&#10;                            )&#10;                        }&#10;                    } else {&#10;                        Spacer(modifier = Modifier.size(72.dp))&#10;                    }&#10;&#10;                    // 0&#10;                    NumberButton(&quot;0&quot;) {&#10;                        if (pin.length &lt; pinLength) pin += &quot;0&quot;&#10;                        if (pin.length == pinLength) onPinComplete(pin)&#10;                    }&#10;&#10;                    // Backspace&#10;                    IconButton(&#10;                        onClick = { if (pin.isNotEmpty()) pin = pin.dropLast(1) },&#10;                        modifier = Modifier.size(72.dp)&#10;                    ) {&#10;                        Icon(&#10;                            Icons.Default.Backspace,&#10;                            contentDescription = &quot;Delete&quot;,&#10;                            tint = Color(0xFFB0B0B0),&#10;                            modifier = Modifier.size(28.dp)&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;fun NumberButton(number: String, onClick: () -&gt; Unit) {&#10;    Box(&#10;        modifier = Modifier&#10;            .size(72.dp)&#10;            .clip(CircleShape)&#10;            .background(Color(0xFF2D2D2D))&#10;            .clickable(onClick = onClick)&#10;            .border(1.dp, Color(0xFF3D3D3D), CircleShape),&#10;        contentAlignment = Alignment.Center&#10;    ) {&#10;        Text(&#10;            text = number,&#10;            fontSize = 24.sp,&#10;            fontWeight = FontWeight.Medium,&#10;            color = Color.White&#10;        )&#10;    }&#10;}&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.security&#10;&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.focus.FocusRequester&#10;import androidx.compose.ui.focus.focusRequester&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.compose.ui.input.key.onKeyEvent&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.foundation.text.KeyboardActions&#10;&#10;@Composable&#10;fun PinEntryScreen(&#10;    title: String = &quot;Masukan PIN&quot;,&#10;    subtitle: String = &quot;Masukkan 6 digit PIN Anda&quot;,&#10;    onPinComplete: (String) -&gt; Unit,&#10;    isError: Boolean = false,&#10;    onForgotPin: (() -&gt; Unit)? = null&#10;) {&#10;    val boxCount = 6&#10;    val digits = remember { mutableStateListOf(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) }&#10;    val focusRequesters = remember { List(boxCount) { FocusRequester() } }&#10;    var localError by remember { mutableStateOf(isError) }&#10;&#10;    LaunchedEffect(isError) { localError = isError }&#10;&#10;    fun currentPin(): String = digits.joinToString(&quot;&quot;)&#10;&#10;    Box(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(Color(0xFF1E1E1E)),&#10;        contentAlignment = Alignment.Center&#10;    ) {&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(horizontal = 24.dp, vertical = 32.dp),&#10;            horizontalAlignment = Alignment.CenterHorizontally&#10;        ) {&#10;            Text(&#10;                text = title,&#10;                fontSize = 24.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = Color.White&#10;            )&#10;            Spacer(Modifier.height(4.dp))&#10;            Text(&#10;                text = subtitle,&#10;                fontSize = 14.sp,&#10;                color = Color(0xFFB0B0B0)&#10;            )&#10;            Spacer(Modifier.height(28.dp))&#10;&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                repeat(boxCount) { index -&gt;&#10;                    val value = digits[index]&#10;                    OutlinedTextField(&#10;                        value = value,&#10;                        onValueChange = { ch -&gt;&#10;                            if (ch.length &lt;= 1 &amp;&amp; ch.all { it.isDigit() }) {&#10;                                digits[index] = ch&#10;                                if (ch.isNotEmpty()) {&#10;                                    if (index &lt; boxCount - 1) {&#10;                                        focusRequesters[index + 1].requestFocus()&#10;                                    } else {&#10;                                        if (currentPin().length == boxCount) onPinComplete(currentPin())&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        modifier = Modifier&#10;                            .size(52.dp)&#10;                            .focusRequester(focusRequesters[index])&#10;                            .onKeyEvent { e -&gt;&#10;                                val isBackspace = e.nativeKeyEvent.keyCode == android.view.KeyEvent.KEYCODE_DEL&#10;                                if (isBackspace) {&#10;                                    if (digits[index].isEmpty() &amp;&amp; index &gt; 0) {&#10;                                        digits[index - 1] = &quot;&quot;&#10;                                        focusRequesters[index - 1].requestFocus()&#10;                                    } else if (digits[index].isNotEmpty()) {&#10;                                        digits[index] = &quot;&quot;&#10;                                    }&#10;                                    true&#10;                                } else false&#10;                            },&#10;                        singleLine = true,&#10;                        textStyle = LocalTextStyle.current.copy(&#10;                            textAlign = TextAlign.Center,&#10;                            fontSize = 20.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(10.dp),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = if (localError) Color.Red else Color(0xFF4CAF50),&#10;                            unfocusedBorderColor = if (localError) Color.Red else Color(0xFF3D3D3D),&#10;                            focusedContainerColor = Color(0xFF2C2C2C),&#10;                            unfocusedContainerColor = Color(0xFF2C2C2C),&#10;                            cursorColor = Color(0xFF4CAF50),&#10;                            focusedTextColor = Color.White,&#10;                            unfocusedTextColor = Color.White&#10;                        ),&#10;                        keyboardOptions = KeyboardOptions(&#10;                            keyboardType = KeyboardType.Number,&#10;                            imeAction = ImeAction.Next&#10;                        ),&#10;                        keyboardActions = KeyboardActions(onNext = {}),&#10;                        placeholder = {},&#10;                        isError = localError&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(Modifier.height(16.dp))&#10;&#10;            if (localError) {&#10;                Text(&#10;                    text = &quot;PIN salah, coba lagi&quot;,&#10;                    color = Color.Red,&#10;                    fontSize = 14.sp&#10;                )&#10;                Spacer(Modifier.height(12.dp))&#10;            }&#10;&#10;            // Backspace mass clear &amp; optional forgot PIN&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                TextButton(onClick = {&#10;                    // Clear all digits&#10;                    for (i in 0 until boxCount) digits[i] = &quot;&quot;&#10;                    focusRequesters[0].requestFocus()&#10;                    localError = false&#10;                }) {&#10;                    Text(&quot;Hapus&quot;, color = Color.White, fontSize = 14.sp)&#10;                }&#10;                if (onForgotPin != null) {&#10;                    TextButton(onClick = onForgotPin) {&#10;                        Text(&quot;Lupa PIN?&quot;, color = Color(0xFF4CAF50), fontSize = 14.sp)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/PinVerifyScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/PinVerifyScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.security&#10;&#10;import android.app.Activity&#10;import androidx.activity.compose.BackHandler&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardActions&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.PinRepository&#10;import com.example.lifin.security.AppLockManager&#10;import kotlinx.coroutines.launch&#10;&#10;@Composable&#10;fun PinVerifyScreen(&#10;    onPinVerified: () -&gt; Unit&#10;) {&#10;    val context = LocalContext.current&#10;    val pinRepository = remember { PinRepository(context) }&#10;    val lockManager = remember { AppLockManager.getInstance(context) }&#10;    var pin by remember { mutableStateOf(&quot;&quot;) }&#10;    var isError by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var attemptCount by remember { mutableStateOf(0) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    // Disable back navigation to prevent bypass; back should close the app&#10;    BackHandler(enabled = true) {&#10;        (context as? Activity)?.finishAffinity()&#10;    }&#10;&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize(),&#10;            alpha = 0.5f&#10;        )&#10;&#10;        // Content Card&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(horizontal = 32.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .wrapContentHeight(),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFF5F5F5).copy(alpha = 0.95f)&#10;                ),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(32.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(20.dp)&#10;                ) {&#10;                    // Title&#10;                    Text(&#10;                        text = &quot;Masukkan PIN&quot;,&#10;                        fontSize = 20.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.Black&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // PIN Input Field&#10;                    OutlinedTextField(&#10;                        value = pin,&#10;                        onValueChange = {&#10;                            if (it.length &lt;= 6 &amp;&amp; it.all { char -&gt; char.isDigit() }) {&#10;                                pin = it&#10;                                errorMessage = null&#10;                                isError = false&#10;                            }&#10;                        },&#10;                        placeholder = {&#10;                            Text(&#10;                                &quot;Masukkan PIN&quot;,&#10;                                color = Color(0xFFB7B4B4),&#10;                                fontSize = 14.sp&#10;                            )&#10;                        },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = if (isError) Color.Red else Color(0xFF738A45),&#10;                            unfocusedBorderColor = if (isError) Color.Red else Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        keyboardOptions = KeyboardOptions(&#10;                            keyboardType = KeyboardType.NumberPassword,&#10;                            imeAction = ImeAction.Done&#10;                        ),&#10;                        keyboardActions = KeyboardActions(&#10;                            onDone = {&#10;                                if (pin.length &gt;= 4) {&#10;                                    val isValid = pinRepository.verifyPin(pin)&#10;                                    if (isValid) {&#10;                                        lockManager.unlock()&#10;                                        onPinVerified()&#10;                                    } else {&#10;                                        attemptCount++&#10;                                        isError = true&#10;                                        errorMessage = &quot;PIN salah, coba lagi&quot;&#10;                                        scope.launch {&#10;                                            kotlinx.coroutines.delay(2000)&#10;                                            pin = &quot;&quot;&#10;                                            isError = false&#10;                                            errorMessage = null&#10;                                        }&#10;                                    }&#10;                                } else {&#10;                                    isError = true&#10;                                    errorMessage = &quot;PIN minimal 4 digit&quot;&#10;                                }&#10;                            }&#10;                        ),&#10;                        singleLine = true,&#10;                        isError = isError&#10;                    )&#10;&#10;                    // Error Message&#10;                    if (errorMessage != null) {&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;&#10;                    // Masuk Button&#10;                    Button(&#10;                        onClick = {&#10;                            if (pin.length &gt;= 4) {&#10;                                val isValid = pinRepository.verifyPin(pin)&#10;                                if (isValid) {&#10;                                    lockManager.unlock()&#10;                                    onPinVerified()&#10;                                } else {&#10;                                    attemptCount++&#10;                                    isError = true&#10;                                    errorMessage = &quot;PIN salah, coba lagi&quot;&#10;                                    scope.launch {&#10;                                        kotlinx.coroutines.delay(2000)&#10;                                        pin = &quot;&quot;&#10;                                        isError = false&#10;                                        errorMessage = null&#10;                                    }&#10;                                }&#10;                            } else {&#10;                                isError = true&#10;                                errorMessage = &quot;PIN minimal 4 digit&quot;&#10;                            }&#10;                        },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(50.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        enabled = pin.isNotEmpty()&#10;                    ) {&#10;                        Text(&#10;                            &quot;Masuk&quot;,&#10;                            fontSize = 16.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // &quot;Belum punya akun? Daftar&quot; text&#10;                    Row(&#10;                        horizontalArrangement = Arrangement.Center,&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Belum punya akun? &quot;,&#10;                            color = Color.Black,&#10;                            fontSize = 14.sp&#10;                        )&#10;                        Text(&#10;                            text = &quot;Daftar&quot;,&#10;                            color = Color(0xFF738A45),&#10;                            fontSize = 14.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            modifier = Modifier.clickable {&#10;                                // Navigate back to registration&#10;                                // This will be handled by navigation&#10;                            }&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Lock after 5 failed attempts&#10;    if (attemptCount &gt;= 5) {&#10;        AlertDialog(&#10;            onDismissRequest = { },&#10;            title = { Text(&quot;Terlalu Banyak Percobaan&quot;) },&#10;            text = { Text(&quot;Anda telah mencoba terlalu banyak kali. Silakan coba lagi nanti.&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = { attemptCount = 0 }) {&#10;                    Text(&quot;OK&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.security&#10;&#10;import android.app.Activity&#10;import androidx.activity.compose.BackHandler&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardActions&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.focus.FocusRequester&#10;import androidx.compose.ui.focus.focusRequester&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.input.key.onKeyEvent&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.PinRepository&#10;import com.example.lifin.security.AppLockManager&#10;import kotlinx.coroutines.launch&#10;&#10;@Composable&#10;fun PinVerifyScreen(&#10;    onPinVerified: () -&gt; Unit&#10;) {&#10;    val context = LocalContext.current&#10;    val pinRepository = remember { PinRepository(context) }&#10;    val lockManager = remember { AppLockManager.getInstance(context) }&#10;&#10;    // State&#10;    val boxCount = 6&#10;    val pinDigits = remember { mutableStateListOf(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) }&#10;    val focusRequesters = remember { List(boxCount) { FocusRequester() } }&#10;    var isError by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var attemptCount by remember { mutableStateOf(0) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    fun pinValue(): String = pinDigits.joinToString(&quot;&quot;)&#10;&#10;    fun clearWithDelay() {&#10;        scope.launch {&#10;            kotlinx.coroutines.delay(1200)&#10;            for (i in 0 until boxCount) pinDigits[i] = &quot;&quot;&#10;            focusRequesters[0].requestFocus()&#10;            isError = false&#10;            errorMessage = null&#10;        }&#10;    }&#10;&#10;    fun submitIfReady() {&#10;        val pin = pinValue()&#10;        if (pin.length == boxCount) {&#10;            val isValid = pinRepository.verifyPin(pin)&#10;            if (isValid) {&#10;                lockManager.unlock()&#10;                onPinVerified()&#10;            } else {&#10;                attemptCount++&#10;                isError = true&#10;                errorMessage = &quot;PIN salah, coba lagi&quot;&#10;                clearWithDelay()&#10;            }&#10;        } else {&#10;            isError = true&#10;            errorMessage = &quot;PIN harus $boxCount digit&quot;&#10;        }&#10;    }&#10;&#10;    // Disable back navigation to prevent bypass; back should close the app&#10;    BackHandler(enabled = true) {&#10;        (context as? Activity)?.finishAffinity()&#10;    }&#10;&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize(),&#10;            alpha = 0.5f&#10;        )&#10;&#10;        // Content Card centered&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(horizontal = 24.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .wrapContentHeight(),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFF5F5F5).copy(alpha = 0.95f)&#10;                ),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(24.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally&#10;                ) {&#10;                    // Title aligned start like screenshot&#10;                    Row(modifier = Modifier.fillMaxWidth()) {&#10;                        Text(&#10;                            text = &quot;Masukan PIN&quot;,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Medium,&#10;                            color = Color.Black&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                    // PIN boxes row&#10;                    Row(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        repeat(boxCount) { index -&gt;&#10;                            SinglePinBox(&#10;                                value = pinDigits[index],&#10;                                onValueChange = { newChar -&gt;&#10;                                    if (newChar.length &lt;= 1 &amp;&amp; newChar.all { it.isDigit() }) {&#10;                                        pinDigits[index] = newChar&#10;                                        if (newChar.isNotEmpty()) {&#10;                                            // move to next focus&#10;                                            if (index &lt; boxCount - 1) {&#10;                                                focusRequesters[index + 1].requestFocus()&#10;                                            } else {&#10;                                                submitIfReady()&#10;                                            }&#10;                                        }&#10;                                    }&#10;                                },&#10;                                onBackspace = {&#10;                                    if (pinDigits[index].isEmpty() &amp;&amp; index &gt; 0) {&#10;                                        pinDigits[index - 1] = &quot;&quot;&#10;                                        focusRequesters[index - 1].requestFocus()&#10;                                    } else if (pinDigits[index].isNotEmpty()) {&#10;                                        pinDigits[index] = &quot;&quot;&#10;                                    }&#10;                                },&#10;                                focusRequester = focusRequesters[index],&#10;                                isError = isError&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    if (errorMessage != null) {&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                    // Masuk Button&#10;                    val canSubmit = pinValue().length == boxCount&#10;                    Button(&#10;                        onClick = { submitIfReady() },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(48.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        enabled = canSubmit&#10;                    ) {&#10;                        Text(&#10;                            &quot;Masuk&quot;,&#10;                            fontSize = 16.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // &quot;Belum punya akun? Daftar&quot; text&#10;                    Row(&#10;                        horizontalArrangement = Arrangement.Center,&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        Text(&#10;                            text = &quot;Belum punya akun? &quot;,&#10;                            color = Color.Black,&#10;                            fontSize = 14.sp&#10;                        )&#10;                        Text(&#10;                            text = &quot;Daftar&quot;,&#10;                            color = Color(0xFF738A45),&#10;                            fontSize = 14.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            modifier = Modifier.clickable {&#10;                                // Navigation handled by parent if needed&#10;                            }&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;&#10;    // Lock after 5 failed attempts&#10;    if (attemptCount &gt;= 5) {&#10;        AlertDialog(&#10;            onDismissRequest = { },&#10;            title = { Text(&quot;Terlalu Banyak Percobaan&quot;) },&#10;            text = { Text(&quot;Anda telah mencoba terlalu banyak kali. Silakan coba lagi nanti.&quot;) },&#10;            confirmButton = {&#10;                TextButton(onClick = { attemptCount = 0 }) {&#10;                    Text(&quot;OK&quot;)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun SinglePinBox(&#10;    value: String,&#10;    onValueChange: (String) -&gt; Unit,&#10;    onBackspace: () -&gt; Unit,&#10;    focusRequester: FocusRequester,&#10;    isError: Boolean&#10;) {&#10;    val borderColor = if (isError) Color.Red else Color(0xFF738A45)&#10;    val container = Color.White&#10;&#10;    OutlinedTextField(&#10;        value = value,&#10;        onValueChange = onValueChange,&#10;        modifier = Modifier&#10;            .size(48.dp)&#10;            .focusRequester(focusRequester)&#10;            .onKeyEvent { event -&gt;&#10;                val isBackspace = event.nativeKeyEvent.keyCode == android.view.KeyEvent.KEYCODE_DEL&#10;                if (isBackspace) { onBackspace(); true } else false&#10;            },&#10;        singleLine = true,&#10;        textStyle = LocalTextStyle.current.copy(&#10;            textAlign = TextAlign.Center,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Bold&#10;        ),&#10;        shape = RoundedCornerShape(8.dp),&#10;        colors = OutlinedTextFieldDefaults.colors(&#10;            focusedBorderColor = borderColor,&#10;            unfocusedBorderColor = borderColor.copy(alpha = 0.6f),&#10;            focusedContainerColor = container,&#10;            unfocusedContainerColor = container,&#10;            cursorColor = Color(0xFF738A45),&#10;            focusedTextColor = Color.Black,&#10;            unfocusedTextColor = Color.Black&#10;        ),&#10;        keyboardOptions = KeyboardOptions(&#10;            keyboardType = KeyboardType.Number,&#10;            imeAction = ImeAction.Next&#10;        ),&#10;        keyboardActions = KeyboardActions(onNext = { }),&#10;        placeholder = { },&#10;        isError = isError&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/SetPinScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/lifin/ui/security/SetPinScreen.kt" />
              <option name="originalContent" value="package com.example.lifin.ui.security&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.text.KeyboardActions&#10;import androidx.compose.foundation.text.KeyboardOptions&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.input.ImeAction&#10;import androidx.compose.ui.text.input.KeyboardType&#10;import androidx.compose.ui.text.input.PasswordVisualTransformation&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.PinRepository&#10;import kotlinx.coroutines.launch&#10;&#10;enum class SetPinStep {&#10;    ENTER_PIN,&#10;    CONFIRM_PIN&#10;}&#10;&#10;@Composable&#10;fun SetPinScreen(&#10;    onPinSet: () -&gt; Unit&#10;) {&#10;    val context = LocalContext.current&#10;    val pinRepository = remember { PinRepository(context) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    var step by remember { mutableStateOf(SetPinStep.ENTER_PIN) }&#10;    var firstPin by remember { mutableStateOf(&quot;&quot;) }&#10;    var confirmPin by remember { mutableStateOf(&quot;&quot;) }&#10;    var showError by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image - bgawal.png dengan blur effect&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize(),&#10;            alpha = 0.5f&#10;        )&#10;&#10;        // Content Card&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(horizontal = 32.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .wrapContentHeight(),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFF5F5F5).copy(alpha = 0.95f)&#10;                ),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(32.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    verticalArrangement = Arrangement.spacedBy(20.dp)&#10;                ) {&#10;                    // Title&#10;                    Text(&#10;                        text = if (step == SetPinStep.ENTER_PIN) &quot;Buat PIN&quot; else &quot;Konfirmasi PIN&quot;,&#10;                        fontSize = 20.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = Color.Black&#10;                    )&#10;&#10;                    Text(&#10;                        text = if (step == SetPinStep.ENTER_PIN)&#10;                            &quot;Masukkan 4-6 digit PIN untuk keamanan&quot;&#10;                        else&#10;                            &quot;Masukkan PIN sekali lagi&quot;,&#10;                        fontSize = 12.sp,&#10;                        color = Color.Gray,&#10;                        textAlign = TextAlign.Center&#10;                    )&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // PIN Input Field - Keyboard akan muncul otomatis saat klik&#10;                    OutlinedTextField(&#10;                        value = if (step == SetPinStep.ENTER_PIN) firstPin else confirmPin,&#10;                        onValueChange = {&#10;                            if (it.length &lt;= 6 &amp;&amp; it.all { char -&gt; char.isDigit() }) {&#10;                                if (step == SetPinStep.ENTER_PIN) {&#10;                                    firstPin = it&#10;                                } else {&#10;                                    confirmPin = it&#10;                                }&#10;                                errorMessage = null&#10;                                showError = false&#10;                            }&#10;                        },&#10;                        placeholder = {&#10;                            Text(&#10;                                &quot;Masukkan PIN&quot;,&#10;                                color = Color(0xFFB7B4B4),&#10;                                fontSize = 14.sp&#10;                            )&#10;                        },&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        colors = OutlinedTextFieldDefaults.colors(&#10;                            focusedBorderColor = if (showError) Color.Red else Color(0xFF738A45),&#10;                            unfocusedBorderColor = if (showError) Color.Red else Color(0xFFB7B4B4),&#10;                            focusedTextColor = Color.Black,&#10;                            unfocusedTextColor = Color.Black,&#10;                            cursorColor = Color(0xFF738A45),&#10;                            focusedContainerColor = Color.White,&#10;                            unfocusedContainerColor = Color.White&#10;                        ),&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        visualTransformation = PasswordVisualTransformation(),&#10;                        keyboardOptions = KeyboardOptions(&#10;                            keyboardType = KeyboardType.NumberPassword,&#10;                            imeAction = ImeAction.Done&#10;                        ),&#10;                        keyboardActions = KeyboardActions(&#10;                            onDone = {&#10;                                if (step == SetPinStep.ENTER_PIN) {&#10;                                    if (firstPin.length in 4..6) {&#10;                                        step = SetPinStep.CONFIRM_PIN&#10;                                    } else {&#10;                                        showError = true&#10;                                        errorMessage = &quot;PIN harus 4-6 digit&quot;&#10;                                    }&#10;                                } else {&#10;                                    if (confirmPin == firstPin) {&#10;                                        val result = pinRepository.setupPin(confirmPin)&#10;                                        result.onSuccess {&#10;                                            onPinSet()&#10;                                        }.onFailure { error -&gt;&#10;                                            errorMessage = error.message ?: &quot;Gagal menyimpan PIN&quot;&#10;                                            showError = true&#10;                                        }&#10;                                    } else {&#10;                                        showError = true&#10;                                        errorMessage = &quot;PIN tidak cocok, coba lagi&quot;&#10;                                        scope.launch {&#10;                                            kotlinx.coroutines.delay(2000)&#10;                                            step = SetPinStep.ENTER_PIN&#10;                                            firstPin = &quot;&quot;&#10;                                            confirmPin = &quot;&quot;&#10;                                            showError = false&#10;                                            errorMessage = null&#10;                                        }&#10;                                    }&#10;                                }&#10;                            }&#10;                        ),&#10;                        singleLine = true,&#10;                        isError = showError&#10;                    )&#10;&#10;                    // Error Message&#10;                    if (errorMessage != null) {&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;&#10;                    // Submit Button&#10;                    Button(&#10;                        onClick = {&#10;                            if (step == SetPinStep.ENTER_PIN) {&#10;                                if (firstPin.length in 4..6) {&#10;                                    step = SetPinStep.CONFIRM_PIN&#10;                                } else {&#10;                                    showError = true&#10;                                    errorMessage = &quot;PIN harus 4-6 digit&quot;&#10;                                }&#10;                            } else {&#10;                                if (confirmPin == firstPin) {&#10;                                    val result = pinRepository.setupPin(confirmPin)&#10;                                    result.onSuccess {&#10;                                        onPinSet()&#10;                                    }.onFailure { error -&gt;&#10;                                        errorMessage = error.message ?: &quot;Gagal menyimpan PIN&quot;&#10;                                        showError = true&#10;                                    }&#10;                                } else {&#10;                                    showError = true&#10;                                    errorMessage = &quot;PIN tidak cocok, coba lagi&quot;&#10;                                    scope.launch {&#10;                                        kotlinx.coroutines.delay(2000)&#10;                                        step = SetPinStep.ENTER_PIN&#10;                                        firstPin = &quot;&quot;&#10;                                        confirmPin = &quot;&quot;&#10;                                        showError = false&#10;                                        errorMessage = null&#10;                                    }&#10;                                }&#10;                            }&#10;                        },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(50.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        enabled = if (step == SetPinStep.ENTER_PIN)&#10;                            firstPin.isNotEmpty()&#10;                        else&#10;                            confirmPin.isNotEmpty()&#10;                    ) {&#10;                        Text(&#10;                            if (step == SetPinStep.ENTER_PIN) &quot;Lanjutkan&quot; else &quot;Selesai&quot;,&#10;                            fontSize = 16.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.lifin.ui.security&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.focus.FocusRequester&#10;import androidx.compose.ui.focus.focusRequester&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.input.key.onKeyEvent // added&#10;import androidx.compose.foundation.text.KeyboardOptions // added&#10;import androidx.compose.foundation.text.KeyboardActions // added&#10;import androidx.compose.ui.layout.ContentScale&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.lifin.R&#10;import com.example.lifin.data.repository.PinRepository&#10;import kotlinx.coroutines.launch&#10;import androidx.compose.ui.text.input.ImeAction // added&#10;import androidx.compose.ui.text.input.KeyboardType // added&#10;&#10;enum class SetPinStep {&#10;    ENTER_PIN,&#10;    CONFIRM_PIN&#10;}&#10;&#10;@Composable&#10;fun SetPinScreen(&#10;    onPinSet: () -&gt; Unit&#10;) {&#10;    val context = LocalContext.current&#10;    val pinRepository = remember { PinRepository(context) }&#10;    val scope = rememberCoroutineScope()&#10;&#10;    var step by remember { mutableStateOf(SetPinStep.ENTER_PIN) }&#10;    val boxCount = 6&#10;&#10;    // segmented states for both steps&#10;    val firstDigits = remember { mutableStateListOf(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) }&#10;    val confirmDigits = remember { mutableStateListOf(&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;) }&#10;    val firstFocus = remember { List(boxCount) { FocusRequester() } }&#10;    val confirmFocus = remember { List(boxCount) { FocusRequester() } }&#10;&#10;    var showError by remember { mutableStateOf(false) }&#10;    var errorMessage by remember { mutableStateOf&lt;String?&gt;(null) }&#10;&#10;    fun firstPin(): String = firstDigits.joinToString(&quot;&quot;)&#10;    fun confirmPin(): String = confirmDigits.joinToString(&quot;&quot;)&#10;&#10;    fun clearFirst() {&#10;        for (i in 0 until boxCount) firstDigits[i] = &quot;&quot;&#10;        firstFocus[0].requestFocus()&#10;    }&#10;    fun clearConfirm() {&#10;        for (i in 0 until boxCount) confirmDigits[i] = &quot;&quot;&#10;        confirmFocus[0].requestFocus()&#10;    }&#10;&#10;    fun proceedOrError() {&#10;        if (firstPin().length == boxCount) {&#10;            step = SetPinStep.CONFIRM_PIN&#10;            showError = false&#10;            errorMessage = null&#10;        } else {&#10;            showError = true&#10;            errorMessage = &quot;PIN harus 6 digit&quot;&#10;        }&#10;    }&#10;&#10;    fun finishIfValid() {&#10;        val f = firstPin()&#10;        val c = confirmPin()&#10;        if (c.length != boxCount) {&#10;            showError = true&#10;            errorMessage = &quot;PIN harus 6 digit&quot;&#10;            return&#10;        }&#10;        if (f == c) {&#10;            val result = pinRepository.setupPin(c)&#10;            result.onSuccess { onPinSet() }&#10;                .onFailure { error -&gt;&#10;                    errorMessage = error.message ?: &quot;Gagal menyimpan PIN&quot;&#10;                    showError = true&#10;                }&#10;        } else {&#10;            showError = true&#10;            errorMessage = &quot;PIN tidak cocok, coba lagi&quot;&#10;            scope.launch {&#10;                kotlinx.coroutines.delay(1500)&#10;                showError = false&#10;                errorMessage = null&#10;                step = SetPinStep.ENTER_PIN&#10;                clearFirst()&#10;                clearConfirm()&#10;            }&#10;        }&#10;    }&#10;&#10;    Box(&#10;        modifier = Modifier.fillMaxSize()&#10;    ) {&#10;        // Background Image&#10;        Image(&#10;            painter = painterResource(id = R.drawable.bgawal),&#10;            contentDescription = &quot;Background&quot;,&#10;            contentScale = ContentScale.Crop,&#10;            modifier = Modifier.fillMaxSize(),&#10;            alpha = 0.5f&#10;        )&#10;&#10;        // Centered card&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxSize()&#10;                .padding(horizontal = 32.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Card(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .wrapContentHeight(),&#10;                shape = RoundedCornerShape(16.dp),&#10;                colors = CardDefaults.cardColors(&#10;                    containerColor = Color(0xFFF5F5F5).copy(alpha = 0.95f)&#10;                ),&#10;                elevation = CardDefaults.cardElevation(defaultElevation = 8.dp)&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(24.dp),&#10;                    horizontalAlignment = Alignment.CenterHorizontally&#10;                ) {&#10;                    // Title&#10;                    Row(modifier = Modifier.fillMaxWidth()) {&#10;                        Text(&#10;                            text = if (step == SetPinStep.ENTER_PIN) &quot;Buat PIN&quot; else &quot;Konfirmasi PIN&quot;,&#10;                            fontSize = 18.sp,&#10;                            fontWeight = FontWeight.Medium,&#10;                            color = Color.Black&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                    // Segmented PIN row for current step&#10;                    Row(&#10;                        modifier = Modifier.fillMaxWidth(),&#10;                        horizontalArrangement = Arrangement.spacedBy(12.dp),&#10;                        verticalAlignment = Alignment.CenterVertically&#10;                    ) {&#10;                        repeat(boxCount) { index -&gt;&#10;                            val value = if (step == SetPinStep.ENTER_PIN) firstDigits[index] else confirmDigits[index]&#10;                            val requester = if (step == SetPinStep.ENTER_PIN) firstFocus[index] else confirmFocus[index]&#10;                            PinDigitBox(&#10;                                value = value,&#10;                                onValueChange = { ch -&gt;&#10;                                    if (ch.length &lt;= 1 &amp;&amp; ch.all { it.isDigit() }) {&#10;                                        if (step == SetPinStep.ENTER_PIN) {&#10;                                            firstDigits[index] = ch&#10;                                            if (ch.isNotEmpty()) {&#10;                                                if (index &lt; boxCount - 1) firstFocus[index + 1].requestFocus() else proceedOrError()&#10;                                            }&#10;                                        } else {&#10;                                            confirmDigits[index] = ch&#10;                                            if (ch.isNotEmpty()) {&#10;                                                if (index &lt; boxCount - 1) confirmFocus[index + 1].requestFocus() else finishIfValid()&#10;                                            }&#10;                                        }&#10;                                    }&#10;                                },&#10;                                onBackspace = {&#10;                                    if (step == SetPinStep.ENTER_PIN) {&#10;                                        if (firstDigits[index].isEmpty() &amp;&amp; index &gt; 0) {&#10;                                            firstDigits[index - 1] = &quot;&quot;&#10;                                            firstFocus[index - 1].requestFocus()&#10;                                        } else if (firstDigits[index].isNotEmpty()) {&#10;                                            firstDigits[index] = &quot;&quot;&#10;                                        }&#10;                                    } else {&#10;                                        if (confirmDigits[index].isEmpty() &amp;&amp; index &gt; 0) {&#10;                                            confirmDigits[index - 1] = &quot;&quot;&#10;                                            confirmFocus[index - 1].requestFocus()&#10;                                        } else if (confirmDigits[index].isNotEmpty()) {&#10;                                            confirmDigits[index] = &quot;&quot;&#10;                                        }&#10;                                    }&#10;                                },&#10;                                focusRequester = requester,&#10;                                isError = showError&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    if (showError &amp;&amp; errorMessage != null) {&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;                        Text(&#10;                            text = errorMessage!!,&#10;                            color = Color.Red,&#10;                            fontSize = 12.sp,&#10;                            textAlign = TextAlign.Center&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(12.dp))&#10;&#10;                    // Primary button&#10;                    Button(&#10;                        onClick = {&#10;                            if (step == SetPinStep.ENTER_PIN) proceedOrError() else finishIfValid()&#10;                        },&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .height(48.dp),&#10;                        colors = ButtonDefaults.buttonColors(&#10;                            containerColor = Color(0xFF738A45)&#10;                        ),&#10;                        shape = RoundedCornerShape(8.dp),&#10;                        enabled = if (step == SetPinStep.ENTER_PIN) firstPin().length == boxCount else confirmPin().length == boxCount&#10;                    ) {&#10;                        Text(&#10;                            text = if (step == SetPinStep.ENTER_PIN) &quot;Lanjutkan&quot; else &quot;Selesai&quot;,&#10;                            fontSize = 16.sp,&#10;                            fontWeight = FontWeight.Bold,&#10;                            color = Color.White&#10;                        )&#10;                    }&#10;&#10;                    Spacer(modifier = Modifier.height(8.dp))&#10;&#10;                    // Optional helper&#10;                    if (step == SetPinStep.CONFIRM_PIN) {&#10;                        Text(&#10;                            text = &quot;Ubah PIN?&quot;,&#10;                            color = Color(0xFF738A45),&#10;                            fontSize = 14.sp,&#10;                            modifier = Modifier.clickable {&#10;                                step = SetPinStep.ENTER_PIN&#10;                                clearConfirm()&#10;                                showError = false&#10;                                errorMessage = null&#10;                            }&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PinDigitBox(&#10;    value: String,&#10;    onValueChange: (String) -&gt; Unit,&#10;    onBackspace: () -&gt; Unit,&#10;    focusRequester: FocusRequester,&#10;    isError: Boolean&#10;) {&#10;    val borderColor = if (isError) Color.Red else Color(0xFF738A45)&#10;    OutlinedTextField(&#10;        value = value,&#10;        onValueChange = onValueChange,&#10;        modifier = Modifier&#10;            .size(48.dp)&#10;            .focusRequester(focusRequester)&#10;            .onKeyEvent { evt -&gt;&#10;                val isBackspace = evt.nativeKeyEvent.keyCode == android.view.KeyEvent.KEYCODE_DEL&#10;                if (isBackspace) { onBackspace(); true } else false&#10;            },&#10;        singleLine = true,&#10;        textStyle = LocalTextStyle.current.copy(&#10;            textAlign = TextAlign.Center,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Bold&#10;        ),&#10;        shape = RoundedCornerShape(8.dp),&#10;        colors = OutlinedTextFieldDefaults.colors(&#10;            focusedBorderColor = borderColor,&#10;            unfocusedBorderColor = borderColor.copy(alpha = 0.6f),&#10;            focusedContainerColor = Color.White,&#10;            unfocusedContainerColor = Color.White,&#10;            cursorColor = Color(0xFF738A45),&#10;            focusedTextColor = Color.Black,&#10;            unfocusedTextColor = Color.Black&#10;        ),&#10;        keyboardOptions = KeyboardOptions(&#10;            keyboardType = KeyboardType.Number,&#10;            imeAction = ImeAction.Next&#10;        ),&#10;        keyboardActions = KeyboardActions(onNext = {}),&#10;        placeholder = {},&#10;        isError = isError&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>